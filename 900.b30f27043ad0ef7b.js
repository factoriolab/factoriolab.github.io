"use strict";(self.webpackChunkfactoriolab=self.webpackChunkfactoriolab||[]).push([[900],{6900:(lt,d,i)=>{i.r(d),i.d(d,{MainModule:()=>k});var g=i(6895),x=i(2518),p=i(4258),f=i(9841),_=i(4004),h=i(590),v=i(7791),r=i(8273),s=i(2882),t=i(4650),u=i(7504),Z=i(2997),T=i(5593),M=i(4247),b=i(805),C=i(1493),y=i(7932),A=i(1795),S=i(6163),I=i(3646),J=i(958),O=i(6577),N=i(6188);function Q(n,a){if(1&n&&(t._UZ(0,"span",20),t.TgZ(1,"span",21),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){const e=a.$implicit;t.Tol(e.icon),t.xp6(2),t.Oqu(t.lcZ(3,3,e.label))}}const L=function(n,a,e,o,l,c){return{resultType:n,time:a,pivots:e,rows:o,cols:l,cost:c}};function U(n,a){if(1&n&&(t.TgZ(0,"div")(1,"div"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw(5).ngIf;t.xp6(2),t.hij(" ",t.xi3(3,1,"app.simplexSolved",t.HTZ(4,L,e.result.resultType.toLowerCase(),e.result.time,e.result.pivots,e.result.A.length,e.result.A[0].length,e.result.O[e.result.O.length-1].toPrecision(2)))," ")}}function E(n,a){if(1&n&&(t.ynx(0),t.YNc(1,U,4,11,"div",0),t.BQk()),2&n){const e=t.oxw(4).ngIf;t.xp6(1),t.Q6J("ngIf",e.result.A&&e.result.O)}}const H=function(n){return{resultType:n}};function Y(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){const e=t.oxw(4).ngIf;t.xp6(1),t.Oqu(t.xi3(2,1,"app.simplexUnsolved",t.VKq(4,H,e.result.resultType.toLowerCase())))}}function F(n,a){if(1&n&&(t.TgZ(0,"div",22),t.YNc(1,E,2,1,"ng-container",2),t.YNc(2,Y,3,6,"ng-template",null,23,t.W1O),t.TgZ(4,"span"),t._uU(5),t.qZA()()),2&n){const e=t.MAs(3),o=t.oxw(3).ngIf,l=t.oxw();t.xp6(1),t.Q6J("ngIf",o.result.resultType===l.MatrixResultType.Solved||o.result.resultType===l.MatrixResultType.Cached)("ngIfElse",e),t.xp6(4),t.Oqu(l.version)}}function R(n,a){if(1&n&&(t.ynx(0),t._UZ(1,"lab-objectives"),t.TgZ(2,"p-card",16),t.ALo(3,"translate"),t.TgZ(4,"p-tabMenu",17),t.YNc(5,Q,4,5,"ng-template",18),t.qZA(),t._UZ(6,"router-outlet"),t.YNc(7,F,6,3,"ng-template",19),t.qZA(),t.BQk()),2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("header",t.lcZ(3,2,"app.factory")),t.xp6(2),t.Q6J("model",e.tabItems)}}function w(n,a){1&n&&(t.TgZ(0,"div",24),t._UZ(1,"p-progressSpinner"),t.qZA())}function B(n,a){1&n&&(t.TgZ(0,"div",25),t._UZ(1,"i",26),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"app.simplexError")))}const P=function(){return{width:"576px"}},$=function(){return{"576px":"100%"}};function j(n,a){if(1&n){const e=t.EpF();t.ynx(0),t._UZ(1,"lab-settings",4),t.TgZ(2,"div",5),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return t.KtG(l.contentSvc.toggleSettings())}),t.qZA(),t.TgZ(3,"div",6)(4,"main",7),t.YNc(5,R,8,4,"ng-container",2),t.YNc(6,w,2,0,"ng-template",null,8,t.W1O),t.TgZ(8,"p-dialog",9),t.NdJ("visibleChange",function(l){t.CHM(e);const c=t.oxw(2);return t.KtG(c.showSimplexErr=l)}),t.YNc(9,B,5,3,"ng-template",10),t.TgZ(10,"div"),t._UZ(11,"div",11),t.ALo(12,"translate"),t.TgZ(13,"div",12)(14,"button",13),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return l.showSimplexErr=!1,t.KtG(l.simplexErrSub.unsubscribe())}),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"button",14),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return t.KtG(l.tryFixSimplex())}),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"button",15),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return t.KtG(l.showSimplexErr=!1)}),t.ALo(19,"translate"),t.qZA()()()()()(),t.BQk()}if(2&n){const e=t.MAs(7),o=t.oxw().ngIf,l=t.oxw();t.xp6(1),t.Q6J("active",o.settingsActive)("hidden",o.settingsXlHidden),t.xp6(1),t.ekj("active",o.settingsActive),t.xp6(1),t.ekj("settings-xl-hidden",o.settingsXlHidden),t.xp6(2),t.Q6J("ngIf",null!=o.mod)("ngIfElse",e),t.xp6(3),t.Akn(t.DdM(28,P)),t.Q6J("visible",l.showSimplexErr)("modal",!0)("draggable",!1)("resizable",!1)("breakpoints",t.DdM(29,$)),t.xp6(3),t.Q6J("innerText",t.lcZ(12,20,"app.simplexErrorDetail")),t.xp6(3),t.Q6J("label",t.lcZ(15,22,"app.dontShowAgain")),t.xp6(2),t.Q6J("label",t.lcZ(17,24,"app.trySuggestedFix"))("loading",l.isFixingSimplex),t.xp6(2),t.Q6J("label",t.lcZ(19,26,"ok"))}}function z(n,a){1&n&&(t.TgZ(0,"div",32),t._UZ(1,"i",33),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"app.error")))}function G(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"p-dialog",27),t.YNc(1,z,5,3,"ng-template",10),t.TgZ(2,"div",28)(3,"div"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",29),t._uU(7),t.qZA(),t.TgZ(8,"div",30)(9,"button",31),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().ngIf,c=t.oxw();return t.KtG(c.reset(l.game))}),t.ALo(10,"translate"),t.qZA()()()()}if(2&n){const e=t.oxw().ngIf,o=t.oxw();t.Q6J("visible",!0)("modal",!0)("draggable",!1)("resizable",!1)("closable",!1)("closeOnEscape",!1),t.xp6(4),t.Oqu(t.lcZ(5,10,"app.errorDetail")),t.xp6(3),t.Oqu(e.errorMsg),t.xp6(2),t.Q6J("label",t.lcZ(10,12,"app.reset"))("loading",o.isResetting)}}function X(n,a){if(1&n&&(t.ynx(0),t._UZ(1,"lab-header",1),t.YNc(2,j,20,30,"ng-container",2),t.YNc(3,G,11,14,"ng-template",null,3,t.W1O),t.BQk()),2&n){const e=a.ngIf,o=t.MAs(4);t.xp6(1),t.Q6J("sticky",e.scrollTop>16)("settingsXlHidden",e.settingsXlHidden),t.xp6(1),t.Q6J("ngIf",null==e.errorMsg)("ngIfElse",o)}}const K=[{path:"",component:(()=>{class n{constructor(e,o,l,c,W,V){this.contentSvc=e,this.ngZone=o,this.ref=l,this.router=c,this.store=W,this.errorSvc=V,this.vm$=(0,f.a)([this.store.select(s.Zr.cF),this.store.select(s.Zr.IK),this.store.select(s.QI.p5),this.contentSvc.settingsActive$,this.contentSvc.settingsXlHidden$,this.contentSvc.scrollTop$,this.errorSvc.message$]).pipe((0,_.U)(([m,q,tt,nt,et,it,ot])=>({game:m,mod:q,result:tt,settingsActive:nt,settingsXlHidden:et,scrollTop:it,errorMsg:ot}))),this.version=`${r.lw} ${v.N.version}`,this.isResetting=!1,this.showSimplexErr=!1,this.isFixingSimplex=!1,this.simplexErrSub=this.store.select(s.QI.p5).subscribe(m=>this.showSimplexErr=m.resultType===r.xN.Failed),this.tabItems=[{label:"app.list",icon:"fa-solid fa-list",routerLink:"list",queryParamsHandling:"preserve"},{label:"app.flow",icon:"fa-solid fa-diagram-project",routerLink:"flow",queryParamsHandling:"preserve"},{label:"app.matrix",icon:"fa-solid fa-table-cells",routerLink:"matrix",queryParamsHandling:"preserve"}],this.Game=r.lA,this.ItemId=r.bN,this.MatrixResultType=r.xN}ngAfterViewInit(){this.errorSvc.message$.subscribe(()=>this.ref.detectChanges())}tryFixSimplex(){this.isFixingSimplex=!0,setTimeout(()=>{this.store.select(s.Zr.JP).pipe((0,h.P)()).subscribe(e=>{this.store.dispatch(new s.uP.eX(r.tW.WasmFloat64)),this.store.dispatch(new s.Zr.t0({value:[],def:e?.disabledRecipeIds})),this.showSimplexErr=!1,this.isFixingSimplex=!1})},10)}reset(e){this.isResetting=!0,setTimeout(()=>{this.ngZone.run(()=>{this.errorSvc.message$.next(null),this.router.navigateByUrl(r.dL[e].route),this.store.dispatch(new s.gV.rc),this.isResetting=!1})},10)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u._s),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(p.F0),t.Y36(Z.yh),t.Y36(u.T_))},n.\u0275cmp=t.Xpm({type:n,selectors:[["lab-main"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"sticky","settingsXlHidden"],[4,"ngIf","ngIfElse"],["errorDialog",""],[3,"active","hidden"],[1,"layout-mask",3,"click"],[1,"layout-content"],[1,"px-1","px-sm-4","py-4"],["loading",""],[3,"visible","modal","draggable","resizable","breakpoints","visibleChange"],["pTemplate","header"],[3,"innerText"],[1,"text-end","mt-2"],["pButton","","pRipple","","type","button",1,"mt-2","p-button-outlined",3,"label","click"],["pButton","","pRipple","","type","button",1,"mt-2","ms-2","p-button-outlined",3,"label","loading","click"],["pButton","","pRipple","","type","button",1,"mt-2","ms-2",3,"label","click"],["styleClass","mt-4",3,"header"],[3,"model"],["pTemplate","item"],["pTemplate","footer"],[1,"p-menuitem-icon"],[1,"p-menuitem-text"],[1,"d-flex","align-items-center","justify-content-between"],["notSolved",""],[1,"d-flex","flex-column","align-items-center","mt-5"],[1,"p-dialog-title"],[1,"fa-solid","fa-triangle-exclamation","me-2"],[3,"visible","modal","draggable","resizable","closable","closeOnEscape"],[1,"p-error"],[1,"mt-4"],[1,"text-end","mt-4"],["pButton","","pRipple","","type","button",3,"label","loading","click"],[1,"p-dialog-title","p-error"],[1,"fa-solid","fa-circle-exclamation","me-2"]],template:function(e,o){1&e&&(t.YNc(0,X,5,4,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.vm$))},dependencies:[g.O5,T.Hq,M.Z,b.jx,C.V,p.lC,y.G,A.H,S.d,I.G,J.P,O.f,g.Ov,N.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.layout-content[_ngcontent-%COMP%]{transition:margin .4s cubic-bezier(.05,.74,.2,.99);margin-left:320px;padding-top:4rem}@media (max-width: 1199.98px){.layout-content[_ngcontent-%COMP%]{margin-left:0;padding-top:6rem}}@media (min-width: 1200px){.layout-content.settings-xl-hidden[_ngcontent-%COMP%]{margin-left:0}}@media (max-width: 1199.98px){.layout-mask.active[_ngcontent-%COMP%]{position:fixed;z-index:3;top:0;left:0;width:100%;height:100%;background-color:var(--maskbg)}}"],changeDetection:0}),n})(),children:[{path:"list",loadChildren:()=>i.e(568).then(i.bind(i,4568)).then(n=>n.ListModule)},{path:"flow",loadChildren:()=>i.e(772).then(i.bind(i,8772)).then(n=>n.FlowModule)},{path:"matrix",loadChildren:()=>i.e(973).then(i.bind(i,1973)).then(n=>n.MatrixModule)}]}];let D=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(K),p.Bz]}),n})(),k=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,x.o,D]}),n})()}}]);
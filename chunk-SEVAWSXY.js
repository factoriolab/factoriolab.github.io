import{$ as J,$a as Me,$b as xe,Ac as Ti,Ae as $i,Ba as d,Bb as _t,Bc as wi,Bd as L,Ca as ie,Cd as V,Ce as Ai,Da as Ee,Db as ct,Dd as G,Ea as I,Ed as q,Ee as Ni,Fa as g,Fe as Ui,Ga as be,Gc as yi,Ge as Wi,Ha as Ve,He as zi,I as ue,Ia as F,Ie as yt,Ja as D,Jd as N,Ka as s,Kd as $,Ke as Li,L as Zt,La as r,Le as Hi,Ma as x,Mb as j,Me as Gi,Na as A,Nb as dt,Oa as y,Pa as h,Pb as ai,Qa as l,Rc as Y,Rd as Vi,Sb as li,Tb as fe,Td as We,Ua as st,Ub as pi,Va as rt,Vb as si,Vd as Ct,Wa as T,Wb as ri,Wc as Ue,Wd as ee,X as Jt,Xa as b,Xb as z,Xc as oe,Xd as gt,Ya as w,Yb as _i,Yd as Mi,Za as M,Zb as ci,Zd as ft,_ as R,_b as di,_d as Oi,a as me,aa as Yt,ab as Oe,ac as mi,ae as te,b as ke,ba as lt,bb as Re,bc as ne,bd as Ii,be as ze,ca as U,cc as Rt,ce as xt,dc as ui,dd as ae,de as ht,ea as S,eb as X,ec as Ci,ee as St,fa as v,fb as ye,fe as se,ga as De,gb as Q,gd as ut,hb as Ot,hc as Pt,he as re,ic as gi,id as le,ie as vt,j as Kt,jb as Ae,jc as fi,jd as pe,je as Ri,ka as ei,kb as c,kc as xi,kd as Bi,ke as Pi,la as ve,lb as m,lc as K,ld as Ft,le as Fi,ma as je,mb as E,mc as mt,md as he,nb as ge,nc as hi,ne as Be,ob as B,od as ki,pa as ti,pc as Si,pd as Ei,pe as Di,qa as ii,qc as vi,qd as Ie,qe as _e,ra as p,rb as ni,s as Mt,se as bt,ub as Z,va as Ce,vb as Ne,wa as pt,wb as oi,we as ce,xa as $e,xe as Tt,yc as bi,yd as Ke,ye as wt,z as Xt,za as u,zd as de,ze as ji}from"./chunk-45LGRGKG.js";var Dt=(()=>{let o=class o{transform(i){return i}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=U({name:"asStep",type:o,pure:!0});let e=o;return e})();var Xe=(()=>{let o=class o{transform(i,n,a){if(i==null)return[];if(!n?.length)return i;let _=new Set(n);return i.filter(C=>!_.has(C.value)||C.value===a)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=U({name:"filterOptions",type:o,pure:!0});let e=o;return e})();var jt=(()=>{let o=class o{transform(i,n){if(i!=null){let a=vi[n.inserterTarget][n.inserterCapacity]?.find(_=>_.value.gt(i)||_.id===z.StackInserter);return a==null?null:{id:a.id,value:i.div(a.value)}}return null}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=U({name:"inserterSpeed",type:o,pure:!0});let e=o;return e})();var $t=(()=>{let o=class o{transform(i){return i==null?"":" ".repeat(4-i.length)+i}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=U({name:"leftPad",type:o,pure:!0});let e=o;return e})();var Se=(()=>{let o=class o{static transform(i,n){if(n==null)return i.toFraction();if(n===-2)return Math.round(i.mul(j(100n)).toNumber()).toString();let _=i.toPrecision(n).toString();if(n>0){let C=j(1,Math.pow(10,n));i.gt(j(0n))&&i.lt(C)&&(_=`<${_}`);let f=_.split(".");if(f.length>1){if(f[1].length<n){let k=n-f[1].length;return _+"0".repeat(k)}}else return i.isInteger()?_+" ".repeat(n+1):_+"."+"0".repeat(n)}return _}transform(i,n){return o.transform(i,n)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=U({name:"rate",type:o,pure:!0});let e=o;return e})();var At=(()=>{let o=class o{transform(i,n,a){return a===z.Pumpjack?`${Se.transform(i.mul(j(100n)),n!=null?Math.max(n-2,0):n)}%`:Se.transform(i,n)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=U({name:"machineRate",type:o,pure:!0});let e=o;return e})();var Nt=(()=>{let o=class o{transform(i,n){return n!==fe.CaptainOfIndustry||i!==z.MineControlTower}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=U({name:"machineShowRate",type:o,pure:!0});let e=o;return e})();var Ut=(()=>{let o=class o{transform(i,n){return i==null?!1:n!==fe.DysonSphereProgram||i!==z.MiningMachine}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=U({name:"machineShow",type:o,pure:!0});let e=o;return e})();var Wt=(()=>{let o=class o{transform(i,n,a=!1){if(i==null)return[];let _=i.map(C=>({label:n[C].name,value:C}));return a&&_.unshift({label:"None",value:z.Module}),_}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=U({name:"options",type:o,pure:!0});let e=o;return e})();var zt=(()=>{let o=class o{transform(i,n,a){switch(a){case Rt.GW:return`${Se.transform(i.div(j(1000000n)),n)} GW`;case Rt.MW:return`${Se.transform(i.div(j(1000n)),n)} MW`;default:return`${Se.transform(i,n)} kW`}}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=U({name:"power",type:o,pure:!0});let e=o;return e})();var Lt=(()=>{let o=class o{constructor(){this.routerSvc=R(We)}transform(i,n,a){let _=i;if(_.recipeId){let C=a.adjustedRecipe[_.recipeId];C.isTechnology&&C.productivity&&i.items&&(_=ke(me({},i),{items:i.items.div(C.productivity)}))}return this.routerSvc.stepHref(_,n,a.hash)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=U({name:"stepHref",type:o,pure:!0});let e=o;return e})();var Pe=(()=>{let o=class o{static transform(i){return i.itemId??i.recipeObjectiveId??i.recipeId??i.id}transform(i){return o.transform(i)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=U({name:"stepId",type:o,pure:!0});let e=o;return e})();var Te=(()=>{let o=class o{constructor(){this.contentSvc=R(he),this.pDropdown=R(re,{self:!0}),this.labDropdownBase=ve(),this.setAutoFocusFilter=Ne(()=>{let i=this.contentSvc.isMobile();this.pDropdown.autofocusFilter=!i}),this.setStyleClass=Ne(()=>{this.pDropdown.styleClass=this.labDropdownBase()})}ngOnInit(){this.pDropdown.appendTo="body",this.pDropdown.filter=!0,this.pDropdown.scrollHeight="40vh",this.pDropdown.panelStyleClass="tooltip"}};o.\u0275fac=function(n){return new(n||o)},o.\u0275dir=lt({type:o,selectors:[["","labDropdownBase",""]],inputs:{labDropdownBase:[1,"labDropdownBase"]}});let e=o;return e})();var mn=(e,o)=>o.id;function un(e,o){if(e&1&&(s(0,"div",8),x(1,"i"),c(2,"iconSmClass"),r()),e&2){let t=o.$implicit;p(),I(m(2,2,t.value))}}function Cn(e,o){if(e&1&&x(0,"lab-tooltip",11),e&2){let t=l().$implicit;d("id",t.value)}}function gn(e,o){if(e&1&&(s(0,"div",9),x(1,"i"),c(2,"iconSmClass"),s(3,"div",10),b(4),r(),u(5,Cn,1,1,"ng-template",null,0,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",t.value!=="module"?i:void 0),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function fn(e,o){if(e&1&&x(0,"lab-tooltip",11),e&2){let t=l(2).$implicit;d("id",t.id)}}function xn(e,o){if(e&1&&u(0,fn,1,1,"lab-tooltip",11),e&2){let t=l().$implicit;g(t.id?0:-1)}}function hn(e,o){if(e&1){let t=y();s(0,"button",12),h("click",function(){S(t);let n=l().$index,a=l();return v(a.removeEntry(n))}),r()}if(e&2){let t=l().$implicit,i=l();d("disabled",t.id===i.ItemId.Module)}}function Sn(e,o){if(e&1){let t=y();s(0,"div",2)(1,"lab-input-number",3),h("setValue",function(n){let a=S(t).$index,_=l();return v(_.setCount(a,n))}),r(),s(2,"p-dropdown",4),c(3,"filterOptions"),h("onChange",function(n){let a=S(t).$index,_=l();return v(_.setId(a,n))}),u(4,un,3,4,"ng-template",5)(5,gn,7,6,"ng-template",6),r(),u(6,xn,1,1,"ng-template",null,0,B)(8,hn,1,1,"button",7),r()}if(e&2){let t,i=o.$implicit,n=o.$index,a=T(7),_=l();p(),d("value",(t=i.count)!==null&&t!==void 0?t:_.zero)("maximum",_.maximum()[n])("disabled",i.id===_.ItemId.Module),p(),d("ngModel",i.id)("pTooltip",a)("options",ge(3,7,_.options(),_.exclude(),i.id)),p(6),g(_.entity().modules!==!0?8:-1)}}var it=(()=>{let o=class o{constructor(){this.store=R(Y),this.entity=ve.required(),this.modules=ve.required(),this.recipeId=ve(),this.setValue=ei(),this.data=this.store.selectSignal(V.getDataset),this.exclude=Z(()=>this.modules().map(i=>i.id).filter(mt)),this.sum=Z(()=>this.modules().map(i=>i.count).filter(mt).reduce((i,n)=>i.add(n),j(0n))),this.options=Z(()=>de.moduleOptions(this.entity(),this.data(),this.recipeId())),this.maximum=Z(()=>{let i=this.modules(),n=K(this.entity().modules,j(0n));if(n===!0)return i.map(()=>null);let a=this.sum(),_=i.find(f=>f.id===z.Module);_&&(a=a.sub(K(_.count,j(0n))));let C=n.sub(a);return i.map(f=>K(f.count,j(0n)).add(C))}),this.zero=j(0n),this.ItemId=z}setCount(i,n){let a=this.modules().map((_,C)=>i===C?ke(me({},_),{count:n}):_);this.updateEmpty(a),this.setValue.emit(a)}setId(i,n){n.originalEvent.stopPropagation();let a=n.value,_=this.modules().map((C,f)=>i===f?ke(me({},C),{id:a}):C);this.setValue.emit(_)}removeEntry(i){let n=this.modules().filter((a,_)=>i!==_);this.updateEmpty(n),this.setValue.emit(n)}updateEmpty(i){let n=this.entity().modules;if(n===!0||n==null)return;let a=i.map(_=>_.count).filter(mt).reduce((_,C)=>_.add(C),j(0n));if(a.lt(n)){let _=n.sub(a),C=i.find(f=>f.id===z.Module);C?C.count=K(C.count,j(0n)).add(_):i.push({id:z.Module,count:_})}else if(a.gt(n)){let _=a.sub(n),C=i.find(f=>f.id===z.Module);C&&(C.count=K(C.count,j(0n)).sub(_),C.count.isZero()&&i.splice(i.indexOf(C),1))}}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=J({type:o,selectors:[["lab-modules"]],inputs:{entity:[1,"entity"],modules:[1,"modules"],recipeId:[1,"recipeId"]},outputs:{setValue:"setValue"},decls:3,vars:0,consts:[["tooltip",""],[1,"d-flex","flex-column"],[1,"p-inputgroup"],["width","3rem",3,"setValue","value","maximum","disabled"],["labDropdownBase","icon",3,"onChange","ngModel","pTooltip","options"],["pTemplate","selectedItem"],["pTemplate","item"],["pButton","","pRipple","","type","button","icon","fa-solid fa-times",1,"p-button-outlined",3,"disabled"],[1,"d-flex"],[1,"d-flex","align-items-center","py-2","w-100","h-100",3,"pTooltip"],[1,"ms-3","text-truncate"],["type","module",3,"id"],["pButton","","pRipple","","type","button","icon","fa-solid fa-times",1,"p-button-outlined",3,"click","disabled"]],template:function(n,a){n&1&&(s(0,"div",1),F(1,Sn,9,11,"div",2,mn),r()),n&2&&(p(),D(a.modules()))},dependencies:[le,pe,ae,se,te,re,ee,Be,ce,Te,_e,Xe],changeDetection:0});let e=o;return e})();function bn(e,o){if(e&1){let t=y();s(0,"lab-input-number",10),c(1,"translate"),h("setValue",function(n){S(t);let a=l().$index,_=l();return v(_.setTotal(a,n))}),r()}if(e&2){let t=l().$implicit;d("pTooltip",m(1,2,"beaconsOverlay.totalTooltip"))("value",t.total)}}function Tn(e,o){if(e&1&&(s(0,"div",4),x(1,"i"),c(2,"iconSmClass"),r()),e&2){let t=o.$implicit;p(),I(m(2,2,t.value))}}function wn(e,o){if(e&1&&x(0,"lab-tooltip",19),e&2){let t=l().$implicit;d("id",t.value)}}function yn(e,o){if(e&1&&(s(0,"div",17),x(1,"i"),c(2,"iconSmClass"),s(3,"div",18),b(4),r(),u(5,wn,1,1,"ng-template",null,0,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function In(e,o){if(e&1&&x(0,"lab-tooltip",19),e&2){let t=l(2).$implicit;d("id",t.id)}}function Bn(e,o){if(e&1&&u(0,In,1,1,"lab-tooltip",19),e&2){let t=l().$implicit;g(t.id?0:-1)}}function kn(e,o){if(e&1){let t=y();s(0,"lab-modules",20),h("setValue",function(n){S(t);let a=l().$index,_=l();return v(_.setModules(a,n))}),r()}if(e&2){let t=l().$implicit,i=l();d("entity",i.data().beaconEntities[t.id])("modules",t.modules)("recipeId",i.recipeId())}}function En(e,o){if(e&1){let t=y();s(0,"div",3)(1,"div",9)(2,"lab-input-number",10),c(3,"translate"),h("setValue",function(n){let a=S(t).$index,_=l();return v(_.setCount(a,n))}),r(),u(4,bn,2,4,"lab-input-number",11),s(5,"p-dropdown",12),h("onChange",function(n){let a=S(t).$index,_=l();return v(_.setId(a,n))}),u(6,Tn,3,4,"ng-template",13)(7,yn,7,6,"ng-template",14),r(),u(8,Bn,1,1,"ng-template",null,0,B),s(10,"button",15),h("click",function(){let n=S(t).$index,a=l();return v(a.removeEntry(n))}),r()(),u(11,kn,1,3,"lab-modules",16),r()}if(e&2){let t,i=o.$implicit,n=T(9),a=l();p(2),d("pTooltip",m(3,8,"beaconsOverlay.eachTooltip"))("value",(t=i.count)!==null&&t!==void 0?t:a.zero),p(2),g(i.total?4:-1),p(),d("ngModel",i.id)("pTooltip",n)("options",a.options().beacons),p(5),d("disabled",a.beacons().length===1),p(),g(i.id&&i.modules?11:-1)}}var ot=(()=>{let o=class o extends ft{constructor(){super(...arguments),this.store=R(Y),this.setValue=new je,this.data=this.store.selectSignal(V.getDataset),this.options=this.store.selectSignal(V.getOptions),this.beacons=Ce([]),this.recipeId=Ce(void 0),this.zero=j(0n)}show(i,n,a){this.beacons.set(n.map(_=>ke(me({},_),{modules:_.modules?.map(C=>me({},C))}))),this.recipeId.set(a),this._show(i)}setCount(i,n){this.beacons.update(a=>(a[i].count=n,a))}setId(i,n){n.originalEvent.stopPropagation(),this.beacons.update(a=>(a[i].id=n.value,a))}setModules(i,n){this.beacons.update(a=>(a[i].modules=n,a))}setTotal(i,n){this.beacons.update(a=>(a[i].total=n,a))}removeEntry(i){this.beacons.update(n=>n.filter((a,_)=>_!==i))}addEntry(){this.beacons.update(i=>{let n=this.options().beacons[0].value,a=this.data().beaconEntities[n].modules,_=[{id:z.Module,count:a}];return i.push({id:n,count:j(0n),modules:_}),i})}save(){let i=this.beacons().map(n=>hi(n,{modules:n.modules?.filter(a=>a.count?.nonzero())}));this.setValue.emit(i)}};o.\u0275fac=(()=>{let i;return function(a){return(i||(i=De(o)))(a||o)}})(),o.\u0275cmp=J({type:o,selectors:[["lab-beacons-overlay"]],outputs:{setValue:"setValue"},features:[$e],decls:12,vars:9,consts:[["tooltip",""],["appendTo","body",3,"onHide"],[1,"d-flex","flex-column","gap-2"],[1,"d-flex","flex-column"],[1,"d-flex"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-outlined","p-button-sm","flex-grow-1",3,"click","label"],[1,"d-flex","gap-2"],["pButton","","pRipple","","type","button","icon","fa-solid fa-check",1,"p-button-outlined","p-button-sm","flex-grow-1",3,"click","label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined","p-button-sm","p-button-secondary","flex-grow-1",3,"click","label"],[1,"p-inputgroup"],["width","3rem","tooltipPosition","top",3,"setValue","pTooltip","value"],["width","3rem","tooltipPosition","top",3,"pTooltip","value"],["labDropdownBase","icon",3,"onChange","ngModel","pTooltip","options"],["pTemplate","selectedItem"],["pTemplate","item"],["pButton","","pRipple","","type","button","icon","fa-solid fa-times",1,"p-button-outlined",3,"click","disabled"],[3,"entity","modules","recipeId"],[1,"d-flex","align-items-center","py-2","w-100","h-100",3,"pTooltip"],[1,"ms-3","text-truncate"],["type","beacon",3,"id"],[3,"setValue","entity","modules","recipeId"]],template:function(n,a){n&1&&(s(0,"p-overlayPanel",1),h("onHide",function(){return a.onHide()}),s(1,"div",2),F(2,En,12,10,"div",3,be),s(4,"div",4)(5,"button",5),c(6,"translate"),h("click",function(){return a.addEntry()}),r()(),s(7,"div",6)(8,"button",7),c(9,"translate"),h("click",function(){return a.hide()}),r(),s(10,"button",8),c(11,"translate"),h("click",function(){return a.hide(!0)}),r()()()()),n&2&&(p(2),D(a.beacons()),p(3),d("label",m(6,3,"beaconsOverlay.addBeacons")),p(3),d("label",m(9,5,"ok")),p(2),d("label",m(11,7,"cancel")))},dependencies:[le,pe,ae,se,te,re,gt,ee,Be,ce,it,Te,oe,_e],changeDetection:0});let e=o;return e})();function Vn(e,o){if(e&1){let t=y();s(0,"lab-modules",6),h("setValue",function(n){S(t);let a=l();return v(a.modules.set(n))}),r()}if(e&2){let t=l();d("entity",o)("modules",t.modules())}}var at=(()=>{let o=class o extends ft{constructor(){super(...arguments),this.store=R(Y),this.setValue=new je,this.machine=Ce(void 0),this.modules=Ce([]),this.recipeId=Ce(void 0)}show(i,n,a,_){this.machine.set(a),this.modules.set(n.map(C=>me({},C))),this.recipeId.set(_),this._show(i)}save(){let i=this.modules();this.machine()?.modules!==!0&&(i=i.filter(n=>n.count?.nonzero())),this.setValue.emit(i)}};o.\u0275fac=(()=>{let i;return function(a){return(i||(i=De(o)))(a||o)}})(),o.\u0275cmp=J({type:o,selectors:[["lab-modules-overlay"]],outputs:{setValue:"setValue"},features:[$e],decls:8,vars:7,consts:[["appendTo","body",3,"onHide"],[1,"d-flex","flex-column","gap-2"],[3,"entity","modules"],[1,"d-flex","gap-2"],["pButton","","pRipple","","type","button","icon","fa-solid fa-check",1,"p-button-outlined","p-button-sm","flex-grow-1",3,"click","label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined","p-button-sm","p-button-secondary","flex-grow-1",3,"click","label"],[3,"setValue","entity","modules"]],template:function(n,a){if(n&1&&(s(0,"p-overlayPanel",0),h("onHide",function(){return a.onHide()}),s(1,"div",1),u(2,Vn,1,2,"lab-modules",2),s(3,"div",3)(4,"button",4),c(5,"translate"),h("click",function(){return a.hide()}),r(),s(6,"button",5),c(7,"translate"),h("click",function(){return a.hide(!0)}),r()()()()),n&2){let _;p(2),g((_=a.machine())?2:-1,_),p(2),d("label",m(5,3,"ok")),p(2),d("label",m(7,5,"cancel"))}},dependencies:[te,gt,ee,it,oe],encapsulation:2,changeDetection:0});let e=o;return e})();var Fe=(()=>{let o=class o{onMousedown(i){i.stopPropagation()}onTouchStart(i){i.stopPropagation()}};o.\u0275fac=function(n){return new(n||o)},o.\u0275dir=lt({type:o,selectors:[["","labNoDrag",""]],hostBindings:function(n,a){n&1&&h("mousedown",function(C){return a.onMousedown(C)})("touchstart",function(C){return a.onTouchStart(C)})}});let e=o;return e})();var Rn=["stepsTable"],kt=(e,o)=>o.id,we=(e,o)=>o.key,Pn=()=>[25,50,100,1e3],Yi=()=>[],Fn=(e,o,t,i,n,a,_,C,f,k,O,P,W)=>({items:e,itemId:o,belts:t,beltId:i,wagons:n,wagonId:a,machines:_,machineId:C,recipeId:f,recipeObjectiveId:k,percent:O,percentOnDest:!0,destId:P,inputs:W}),Dn=(e,o,t,i,n,a,_,C,f,k,O,P,W,qe)=>({items:e,itemId:o,belts:t,beltId:i,wagons:n,wagonId:a,machines:_,machineId:C,recipeId:f,recipeObjectiveId:k,percent:O,destId:P,destRecipeObjectiveId:W,destIsRecipe:!0,outputs:qe}),Et=(e,o)=>({step:e,percent:o}),jn=(e,o)=>({items:e,itemId:o}),$n=(e,o,t,i,n,a,_,C,f,k,O,P,W)=>({items:e,itemId:o,belts:t,beltId:i,wagons:n,wagonId:a,machines:_,machineId:C,recipeId:f,recipeObjectiveId:k,percent:O,destId:P,destRecipeObjectiveId:W,destIsRecipe:!0}),An=(e,o,t,i,n,a,_,C,f)=>({items:e,itemId:o,belts:t,beltId:i,wagons:n,wagonId:a,percent:_,destId:C,destRecipeObjectiveId:f,destIsRecipe:!0}),Nn=(e,o,t,i,n,a,_,C,f,k,O,P,W)=>({items:e,itemId:o,belts:t,beltId:i,wagons:n,wagonId:a,machines:_,machineId:C,recipeId:f,recipeObjectiveId:k,percent:O,percentOnDest:!0,destId:P,destRecipeObjectiveId:W}),Ge=(e,o)=>({value:e,itemId:o}),Un=(e,o)=>({columnSettings:e,totals:o,type:"belt"}),Wn=(e,o)=>({columnSettings:e,totals:o}),zn=(e,o,t)=>({columnSettings:e,totals:o,modulesTotals:t,type:"machine"}),Ln=(e,o,t)=>({columnSettings:e,totals:o,modulesTotals:t,type:"beacon"});function Hn(e,o){if(e&1){let t=y();s(0,"button",33),c(1,"translate"),h("click",function(){S(t);let n=l(2);return v(n.exportSvc.stepsToCsv(n.steps()))}),r()}e&2&&d("label",m(1,1,"steps.downloadAsCsv"))}function Gn(e,o){if(e&1){let t=y();s(0,"button",36),c(1,"translate"),h("click",function(){S(t);let n=l(3);return v(n.resetChecked())}),r()}e&2&&d("pTooltip",m(1,1,"steps.checkedUndoTooltip"))}function qn(e,o){if(e&1&&(s(0,"th")(1,"div",34),x(2,"i",35),u(3,Gn,2,3,"button",25),r()()),e&2){let t=l(2);p(3),g(t.itemsModified().checked||t.recipesModified().checked?3:-1)}}function Qn(e,o){e&1&&(s(0,"th"),b(1),c(2,"translate"),r()),e&2&&(p(),w(m(2,1,"options.column.tree")))}function Kn(e,o){e&1&&x(0,"p-sortIcon",24)}function Xn(e,o){if(e&1){let t=y();s(0,"button",36),c(1,"translate"),h("click",function(n){return S(t),l(2).resetExcluded(),v(n.stopImmediatePropagation())}),r()}e&2&&d("pTooltip",m(1,1,"steps.itemsUndoTooltip"))}function Zn(e,o){e&1&&x(0,"p-sortIcon",37)}function Jn(e,o){if(e&1){let t=y();s(0,"button",36),c(1,"translate"),h("click",function(n){return S(t),l(3).resetBelts(),v(n.stopImmediatePropagation())}),r()}e&2&&d("pTooltip",m(1,1,"steps.beltsUndoTooltip"))}function Yn(e,o){if(e&1&&(s(0,"th",26)(1,"div",23)(2,"span"),b(3),c(4,"translate"),r(),u(5,Zn,1,0,"p-sortIcon",37)(6,Jn,2,3,"button",25),r()()),e&2){let t=l(2);p(3),w(m(4,3,"options.column.belts")),p(2),g(t.focus()?-1:5),p(),g(t.itemsModified().belts?6:-1)}}function eo(e,o){e&1&&x(0,"p-sortIcon",38)}function to(e,o){if(e&1){let t=y();s(0,"button",36),c(1,"translate"),h("click",function(n){return S(t),l(3).resetWagons(),v(n.stopImmediatePropagation())}),r()}e&2&&d("pTooltip",m(1,1,"steps.wagonsUndoTooltip"))}function io(e,o){if(e&1&&(s(0,"th",27)(1,"div",23)(2,"span"),b(3),c(4,"translate"),r(),u(5,eo,1,0,"p-sortIcon",38)(6,to,2,3,"button",25),r()()),e&2){let t=l(2);p(3),w(m(4,3,t.dispRateInfo().wagonsLabel)),p(2),g(t.focus()?-1:5),p(),g(t.itemsModified().wagons?6:-1)}}function no(e,o){e&1&&x(0,"p-sortIcon",29)}function oo(e,o){if(e&1){let t=y();s(0,"button",36),c(1,"translate"),h("click",function(n){return S(t),l(2).resetMachines(),v(n.stopImmediatePropagation())}),r()}e&2&&d("pTooltip",m(1,1,"steps.machinesUndoTooltip"))}function ao(e,o){if(e&1){let t=y();s(0,"button",36),c(1,"translate"),h("click",function(){S(t);let n=l(3);return v(n.resetBeacons())}),r()}e&2&&d("pTooltip",m(1,1,"steps.beaconsUndoTooltip"))}function lo(e,o){if(e&1&&(s(0,"th",30)(1,"div",23)(2,"span"),b(3),c(4,"translate"),r(),u(5,ao,2,3,"button",25),r()()),e&2){let t=l(2);p(3),w(m(4,2,"options.column.beacons")),p(2),g(t.recipesModified().beacons?5:-1)}}function po(e,o){e&1&&x(0,"p-sortIcon",40)}function so(e,o){if(e&1&&(s(0,"th",31)(1,"div",39)(2,"span"),b(3),c(4,"translate"),r(),u(5,po,1,0,"p-sortIcon",40),r()()),e&2){let t=l(2);p(3),w(m(4,2,"options.column.power")),p(2),g(t.focus()?-1:5)}}function ro(e,o){e&1&&x(0,"p-sortIcon",41)}function _o(e,o){if(e&1&&(s(0,"th",32)(1,"div",39)(2,"span"),b(3),c(4,"translate"),r(),u(5,ro,1,0,"p-sortIcon",41),r()()),e&2){let t=l(2);p(3),w(m(4,2,t.dispRateInfo().pollutionLabel)),p(2),g(t.focus()?-1:5)}}function co(e,o){e&1&&x(0,"th")}function mo(e,o){if(e&1){let t=y();s(0,"tr")(1,"td",17)(2,"div",18)(3,"button",19),c(4,"translate"),h("click",function(){S(t);let n=l();return v(n.contentSvc.showColumns$.next())}),r(),u(5,Hn,2,3,"button",20),r()()(),s(6,"tr",21),x(7,"th"),u(8,qn,4,1,"th")(9,Qn,3,3,"th"),s(10,"th",22)(11,"div",23)(12,"span"),b(13),c(14,"translate"),r(),u(15,Kn,1,0,"p-sortIcon",24)(16,Xn,2,3,"button",25),r()(),u(17,Yn,7,5,"th",26)(18,io,7,5,"th",27),s(19,"th",28)(20,"div",23)(21,"span"),b(22),c(23,"translate"),r(),u(24,no,1,0,"p-sortIcon",29)(25,oo,2,3,"button",25),r()(),u(26,lo,6,4,"th",30)(27,so,6,4,"th",31)(28,_o,6,4,"th",32)(29,co,1,0,"th"),r()}if(e&2){let t=l();p(3),d("label",m(4,16,"steps.columnSettings")),p(2),g(t.steps().length?5:-1),p(3),g(!t.focus()&&t.columnsState().checkbox.show?8:-1),p(),g(!t.focus()&&t.columnsState().tree.show?9:-1),p(4),w(m(14,18,t.dispRateInfo().itemsLabel)),p(2),g(t.focus()?-1:15),p(),g(t.itemsModified().excluded?16:-1),p(),g(t.columnsState().belts.show?17:-1),p(),g(t.columnsState().wagons.show?18:-1),p(4),w(m(23,20,"options.column.machines")),p(2),g(t.focus()?-1:24),p(),g(t.recipesModified().machines?25:-1),p(),g(t.columnsState().beacons.show?26:-1),p(),g(t.columnsState().power.show?27:-1),p(),g(t.columnsState().pollution.show?28:-1),p(),g(t.columnsState().link.show?29:-1)}}function uo(e,o){if(e&1&&x(0,"div",43),e&2){let t=o.$implicit,i=l();d("id","step_"+i.id+"_"+t.label)}}function Co(e,o){if(e&1){let t=y();s(0,"td",46)(1,"div",51)(2,"p-checkbox",52),h("onChange",function(n){S(t);let a=l(),_=l(2);return v(_.changeStepChecked(a,n.checked))}),r()()()}if(e&2){let t=l();p(2),d("binary",!0)("ngModel",t.checked)}}function go(e,o){if(e&1&&x(0,"div",59),e&2){let t=o.$implicit,i=o.$index,n=o.$count;ie("trail",t)("last",i===n-1)}}function fo(e,o){if(e&1&&(F(0,go,1,4,"div",58,be),x(2,"div",54)),e&2){let t=l(2),i=l(2);D(i.stepTree()[t.id])}}function xo(e,o){if(e&1&&x(0,"lab-tooltip",62),e&2){let t=l(3);d("id",t.itemId)}}function ho(e,o){if(e&1){let t=y();s(0,"button",60),c(1,"iconSmClass"),h("click",function(){S(t);let n=l(2),a=l(2);return v(a.setItemExcluded(n.itemId,!a.itemsState()[n.itemId].excluded))}),x(2,"i",61),u(3,xo,1,1,"ng-template",null,4,B),r()}if(e&2){let t=T(4),i=l(2),n=l(2);ie("hover-active",n.itemsState()[i.itemId].excluded),d("icon",m(1,4,i.itemId))("pTooltip",t)}}function So(e,o){if(e&1&&(s(0,"span"),b(1),r()),e&2){let t=l(3);p(),M("#",t.recipeObjectiveId,"")}}function vo(e,o){if(e&1&&x(0,"lab-tooltip",64),e&2){let t=l(4);d("id",t.recipeId)}}function bo(e,o){if(e&1&&u(0,vo,1,1,"lab-tooltip",64),e&2){let t=l(3);g(t.recipeId?0:-1)}}function To(e,o){if(e&1&&(s(0,"i",63),c(1,"iconSmClass"),u(2,So,2,1,"span")(3,bo,1,1,"ng-template",null,4,B),r()),e&2){let t=T(4),i=l(2);I(E(1,4,i.recipeId,"recipe")),d("pTooltip",t),p(2),g(i.recipeObjectiveId!=null?2:-1)}}function wo(e,o){if(e&1&&(s(0,"td",47)(1,"div",53),u(2,fo,3,0,"div",54),s(3,"div",55),u(4,ho,5,6,"button",56)(5,To,5,7,"i",57),r()()()),e&2){let t,i=l(),n=l(2),a=T(1);p(2),g(!a.sortField&&((t=n.stepTree()[i.id])!=null&&t.length)?2:-1),p(2),g(i.itemId&&i.recipeObjectiveId==null?4:5)}}function yo(e,o){if(e&1&&(s(0,"span",66),b(1),c(2,"rate"),r()),e&2){let t=l(2),i=l(2);p(),M("(+",E(2,1,t.surplus,i.columnsState().items.precision),") ")}}function Io(e,o){if(e&1&&x(0,"lab-tooltip",62),e&2){let t=l(3);d("id",t.itemId)}}function Bo(e,o){if(e&1){let t=y();s(0,"button",60),c(1,"iconSmClass"),h("click",function(){S(t);let n=l(2),a=l(2);return v(a.setItemExcluded(n.itemId,!a.itemsState()[n.itemId].excluded))}),x(2,"i",61),u(3,Io,1,1,"ng-template",null,4,B),r()}if(e&2){let t=T(4),i=l(2),n=l(2);ie("hover-active",n.itemsState()[i.itemId].excluded),d("icon",m(1,4,i.itemId))("pTooltip",t)}}function ko(e,o){if(e&1&&(s(0,"td",65),u(1,yo,3,4,"span",66),s(2,"span",66),b(3),c(4,"rate"),r()(),s(5,"td",67)(6,"div",23)(7,"span",68),b(8),r(),u(9,Bo,5,6,"button",56),r()()),e&2){let t,i=l(),n=l(2);p(),g(i.surplus&&i.surplus.nonzero()?1:-1),p(2),w(E(4,4,i.items.sub((t=i.surplus)!==null&&t!==void 0?t:n.rational(0)),n.columnsState().items.precision)),p(5),w(n.data().itemEntities[i.itemId].name),p(),g(!n.preferences().hideDuplicateIcons||!n.columnsState().tree.show?9:-1)}}function Eo(e,o){e&1&&x(0,"td",30)}function Vo(e,o){if(e&1&&(s(0,"div",44),x(1,"i"),c(2,"iconSmClass"),r()),e&2){let t=l().$implicit;p(),I(m(2,2,t.value))}}function Mo(e,o){if(e&1&&u(0,Vo,3,4,"div",44),e&2){let t=o.$implicit;g(t?0:-1)}}function Oo(e,o){if(e&1&&x(0,"lab-tooltip",75),e&2){let t=l().$implicit;d("id",t.value)}}function Ro(e,o){if(e&1&&(s(0,"div",73),x(1,"i"),c(2,"iconSmClass"),s(3,"div",74),b(4),r(),u(5,Oo,1,1,"ng-template",null,4,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function Po(e,o){if(e&1&&x(0,"lab-tooltip",75),e&2){let t=l(2);d("id",t)}}function Fo(e,o){if(e&1){let t=y();s(0,"p-dropdown",70),h("onChange",function(n){let a=S(t),_=l(4),C=l(2);return v(C.setBelt(_.itemId,n.value,a))}),u(1,Mo,1,1,"ng-template",71)(2,Ro,7,6,"ng-template",72)(3,Po,1,1,"ng-template",null,4,B),r()}if(e&2){let t=T(4),i=l(),n=l(5);d("pTooltip",t)("ngModel",i)("options",n.options().belts)}}function Do(e,o){if(e&1&&(s(0,"div",44),x(1,"i"),c(2,"iconSmClass"),r()),e&2){let t=o.$implicit;p(),I(m(2,2,t.value))}}function jo(e,o){if(e&1&&x(0,"lab-tooltip",76),e&2){let t=l().$implicit;d("id",t.value)}}function $o(e,o){if(e&1&&(s(0,"div",73),x(1,"i"),c(2,"iconSmClass"),s(3,"div",74),b(4),r(),u(5,jo,1,1,"ng-template",null,4,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function Ao(e,o){if(e&1&&x(0,"lab-tooltip",76),e&2){let t=l(3);d("id",t)}}function No(e,o){if(e&1){let t=y();s(0,"p-dropdown",70),h("onChange",function(n){let a=S(t),_=l(5),C=l(2);return v(C.setBelt(_.itemId,n.value,a))}),u(1,Do,3,4,"ng-template",71)(2,$o,7,6,"ng-template",72)(3,Ao,1,1,"ng-template",null,4,B),r()}if(e&2){let t=T(4),i=l(2),n=l(5);d("pTooltip",t)("ngModel",i)("options",n.options().pipes)}}function Uo(e,o){if(e&1&&x(0,"lab-tooltip",76),e&2){let t=l(3);d("id",t)}}function Wo(e,o){if(e&1&&(s(0,"i",63),c(1,"iconClass"),u(2,Uo,1,1,"ng-template",null,4,B),r()),e&2){let t=T(3),i=l(2);I(m(1,3,i)),d("pTooltip",t)}}function zo(e,o){if(e&1&&u(0,No,5,3,"p-dropdown",69)(1,Wo,4,5,"i",57),e&2){let t,i=l(),n=l(5);g((t=n.data().pipeIds.indexOf(i)!==-1&&n.settings().pipeId)?0:1,t)}}function Lo(e,o){if(e&1&&(s(0,"td",65)(1,"span",66),b(2),c(3,"rate"),r()(),s(4,"td",67)(5,"div",23),u(6,Fo,5,3,"p-dropdown",69)(7,zo,2,1),r()()),e&2){let t,i=l(3),n=l(2);p(2),w(E(3,2,i.belts,n.columnsState().belts.precision)),p(4),g((t=n.data().beltIds.indexOf(o)!==-1&&n.settings().beltId)?6:7,t)}}function Ho(e,o){if(e&1&&u(0,Lo,8,5),e&2){let t,i=l(2),n=l(2);g((t=n.itemsState()[i.itemId].beltId)?0:-1,t)}}function Go(e,o){e&1&&x(0,"td",30)}function qo(e,o){if(e&1&&u(0,Ho,1,1)(1,Go,1,0,"td",30),e&2){let t=l();g(t.itemId&&t.belts?0:1)}}function Qo(e,o){if(e&1&&(s(0,"div",44),x(1,"i"),c(2,"iconSmClass"),r()),e&2){let t=l().$implicit;p(),I(m(2,2,t.value))}}function Ko(e,o){if(e&1&&u(0,Qo,3,4,"div",44),e&2){let t=o.$implicit;g(t?0:-1)}}function Xo(e,o){if(e&1&&x(0,"lab-tooltip",77),e&2){let t=l().$implicit;d("id",t.value)}}function Zo(e,o){if(e&1&&(s(0,"div",73),x(1,"i"),c(2,"iconSmClass"),s(3,"div",74),b(4),r(),u(5,Xo,1,1,"ng-template",null,4,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function Jo(e,o){if(e&1&&x(0,"lab-tooltip",77),e&2){let t=l(2);d("id",t)}}function Yo(e,o){if(e&1){let t=y();s(0,"p-dropdown",70),h("onChange",function(n){let a=S(t),_=l(4),C=l(2);return v(C.setWagon(_.itemId,n.value,a))}),u(1,Ko,1,1,"ng-template",71)(2,Zo,7,6,"ng-template",72)(3,Jo,1,1,"ng-template",null,4,B),r()}if(e&2){let t=T(4),i=l(),n=l(5);d("pTooltip",t)("ngModel",i)("options",n.options().cargoWagons)}}function ea(e,o){if(e&1&&(s(0,"div",44),x(1,"i"),c(2,"iconSmClass"),r()),e&2){let t=l().$implicit;p(),I(m(2,2,t.value))}}function ta(e,o){if(e&1&&u(0,ea,3,4,"div",44),e&2){let t=o.$implicit;g(t?0:-1)}}function ia(e,o){if(e&1&&x(0,"lab-tooltip",78),e&2){let t=l().$implicit;d("id",t.value)}}function na(e,o){if(e&1&&(s(0,"div",73),x(1,"i"),c(2,"iconSmClass"),s(3,"div",74),b(4),r()(),u(5,ia,1,1,"ng-template",null,4,B)),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function oa(e,o){if(e&1&&x(0,"lab-tooltip",78),e&2){let t=l(3);d("id",t)}}function aa(e,o){if(e&1){let t=y();s(0,"p-dropdown",70),h("onChange",function(n){let a=S(t),_=l(5),C=l(2);return v(C.setWagon(_.itemId,n.value,a))}),u(1,ta,1,1,"ng-template",71)(2,na,7,6,"ng-template",72)(3,oa,1,1,"ng-template",null,4,B),r()}if(e&2){let t=T(4),i=l(2),n=l(5);d("pTooltip",t)("ngModel",i)("options",n.options().fluidWagons)}}function la(e,o){if(e&1&&u(0,aa,5,3,"p-dropdown",69),e&2){let t,i=l(),n=l(5);g((t=n.data().fluidWagonIds.indexOf(i)!==-1&&n.settings().fluidWagonId)?0:-1,t)}}function pa(e,o){if(e&1&&(s(0,"td",65)(1,"span",66),b(2),c(3,"rate"),r()(),s(4,"td",67)(5,"div",23),u(6,Yo,5,3,"p-dropdown",69)(7,la,1,1),r()()),e&2){let t,i=l(3),n=l(2);p(2),w(E(3,2,i.wagons,n.columnsState().wagons.precision)),p(4),g((t=n.data().cargoWagonIds.indexOf(o)!==-1&&n.settings().cargoWagonId)?6:7,t)}}function sa(e,o){if(e&1&&u(0,pa,8,5),e&2){let t,i=l(2),n=l(2);g((t=n.itemsState()[i.itemId].wagonId)?0:-1,t)}}function ra(e,o){e&1&&x(0,"td",30)}function _a(e,o){if(e&1&&u(0,sa,1,1)(1,ra,1,0,"td",30),e&2){let t=l();g(t.itemId&&t.wagons?0:1)}}function ca(e,o){if(e&1&&(s(0,"span",66),b(1),c(2,"machineRate"),r()),e&2){let t=l(),i=l(),n=l(2);p(),w(ge(2,1,i.machines,n.columnsState().machines.precision,t))}}function da(e,o){if(e&1&&(s(0,"span"),b(1),r()),e&2){let t=l(4);p(),M("#",t.recipeObjectiveId,"")}}function ma(e,o){if(e&1&&x(0,"lab-tooltip",64),e&2){let t=l(4);d("id",t.recipeId)}}function ua(e,o){if(e&1){let t=y();s(0,"button",82),h("click",function(){S(t);let n=l(3),a=l(2);return v(a.addObjective({targetId:n.recipeId,unit:a.ObjectiveUnit.Machines}))}),s(1,"span",83),c(2,"iconSmClass"),u(3,da,2,1,"span"),r(),x(4,"i",84),u(5,ma,1,1,"ng-template",null,4,B),r()}if(e&2){let t=T(6),i=l(3);d("pTooltip",t),p(),I(E(2,4,i.recipeId,"recipe")),p(2),g(i.recipeObjectiveId?3:-1)}}function Ca(e,o){if(e&1&&(s(0,"div",44),x(1,"i"),c(2,"iconSmClass"),r()),e&2){let t=l().$implicit;p(),I(m(2,2,t.value))}}function ga(e,o){if(e&1&&u(0,Ca,3,4,"div",44),e&2){let t=o.$implicit;g(t?0:-1)}}function fa(e,o){if(e&1&&x(0,"lab-tooltip",86),e&2){let t=l().$implicit;d("id",t.value)}}function xa(e,o){if(e&1&&(s(0,"div",73),x(1,"i"),c(2,"iconSmClass"),s(3,"div",74),b(4),r(),u(5,fa,1,1,"ng-template",null,4,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function ha(e,o){if(e&1&&x(0,"lab-tooltip",86),e&2){let t=l(3);d("id",t)}}function Sa(e,o){if(e&1){let t=y();s(0,"p-dropdown",85),c(1,"options"),h("onChange",function(n){S(t);let a=l(3),_=l(2);return v(_.changeRecipeField(a,n.value,"machine"))}),u(2,ga,1,1,"ng-template",71)(3,xa,7,6,"ng-template",72)(4,ha,1,1,"ng-template",null,4,B),r()}if(e&2){let t=T(5),i=l(2),n=l(),a=l(2);d("pTooltip",t)("options",E(1,3,n.recipe.producers,a.data().itemEntities))("ngModel",i)}}function va(e,o){if(e&1){let t=y();s(0,"p-inputNumber",87,5),c(2,"translate"),h("onBlur",function(){let n;S(t);let a=T(1),_=l(3),C=l(2);return v(C.changeRecipeField(_,(n=a.value)!==null&&n!==void 0?n:100,"overclock"))}),r()}if(e&2){let t=l(3);d("min",1)("max",250)("step",10)("maxFractionDigits",2)("size",3)("pTooltip",m(2,7,"steps.overclockTooltip"))("ngModel",t.recipeSettings.overclock)}}function ba(e,o){if(e&1&&x(0,"lab-tooltip",89),e&2){let t=l(2);d("id",t)}}function Ta(e,o){if(e&1&&(s(0,"div",23)(1,"i",88),c(2,"iconSmClass"),u(3,ba,1,1,"ng-template",null,4,B),r()()),e&2){let t=T(4),i=l();p(),I(m(2,3,i)),d("pTooltip",t)}}function wa(e,o){if(e&1&&(s(0,"div",44),x(1,"i"),c(2,"iconSmClass"),r()),e&2){let t=o.$implicit;p(),I(m(2,2,t.value))}}function ya(e,o){if(e&1&&x(0,"lab-tooltip",89),e&2){let t=l().$implicit;d("id",t.value)}}function Ia(e,o){if(e&1&&(s(0,"div",73),x(1,"i"),c(2,"iconSmClass"),s(3,"div",74),b(4),r(),u(5,ya,1,1,"ng-template",null,4,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function Ba(e,o){if(e&1&&x(0,"lab-tooltip",89),e&2){let t=l(2);d("id",t)}}function ka(e,o){if(e&1){let t=y();s(0,"p-dropdown",70),h("onChange",function(n){S(t);let a=l(4),_=l(2);return v(_.changeRecipeField(a,n.value,"fuel"))}),u(1,wa,3,4,"ng-template",71)(2,Ia,7,6,"ng-template",72)(3,Ba,1,1,"ng-template",null,4,B),r()}if(e&2){let t,i=T(4),n=l(),a=l(3);d("pTooltip",i)("ngModel",n)("options",(t=a.recipeSettings.fuelOptions)!==null&&t!==void 0?t:X(3,Yi))}}function Ea(e,o){if(e&1&&u(0,Ta,5,5,"div",23)(1,ka,5,4,"p-dropdown",69),e&2){let t=l(3);g(t.recipe.isBurn?0:t.recipeSettings.machineId?1:-1)}}function Va(e,o){if(e&1&&(s(0,"div",44),x(1,"i"),c(2,"iconSmClass"),r()),e&2){let t=o.$implicit;p(),I(m(2,2,t.value))}}function Ma(e,o){if(e&1&&x(0,"lab-tooltip",92),e&2){let t=l().$implicit;d("id",t.value)}}function Oa(e,o){if(e&1&&(s(0,"div",73),x(1,"i"),c(2,"iconSmClass"),s(3,"div",74),b(4),r(),u(5,Ma,1,1,"ng-template",null,4,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",t.value!=="module"?i:void 0),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function Ra(e,o){if(e&1){let t=y();s(0,"p-dropdown",91),c(1,"translate"),h("onChange",function(n){S(t);let a=l(5),_=l(2);return v(_.changeRecipeField(a,[{id:n.value,count:_.rational(1)}],"modules"))}),u(2,Va,3,4,"ng-template",71)(3,Oa,7,6,"ng-template",72),r()}if(e&2){let t,i=l(2),n=l(3);d("pTooltip",m(1,3,"settings.modifierTooltip"))("ngModel",i[0].id)("options",(t=n.recipeSettings.moduleOptions)!==null&&t!==void 0?t:X(5,Yi))}}function Pa(e,o){if(e&1&&(s(0,"i",83),c(1,"iconSmClass"),s(2,"span"),b(3),r()()),e&2){let t=o.$implicit;I(m(1,3,t.id)),p(3),w(t.count)}}function Fa(e,o){if(e&1&&x(0,"lab-tooltip",92),e&2){let t=l().$implicit;d("id",t.id)}}function Da(e,o){if(e&1&&u(0,Fa,1,1,"lab-tooltip",92),e&2){let t=o.$implicit;g(t.id?0:-1)}}function ja(e,o){if(e&1&&F(0,Da,1,1,null,null,kt),e&2){let t=l(3);D(t)}}function $a(e,o){if(e&1){let t=y();s(0,"button",93),h("click",function(n){S(t);let a=T(5),_=l(),C=l(),f=l(3);return v(a.show(n,C,_,f.recipeId))}),F(1,Pa,4,5,"i",94,kt),x(3,"i",95),r(),s(4,"lab-modules-overlay",96,6),h("setValue",function(n){S(t);let a=l(5),_=l(2);return v(_.changeRecipeField(a,n,"modules"))}),r(),u(6,ja,2,0,"ng-template",null,4,B)}if(e&2){let t=T(7),i=l(2);d("pTooltip",t),p(),D(i)}}function Aa(e,o){if(e&1&&u(0,Ra,4,6,"p-dropdown",90)(1,$a,8,1),e&2){let t=o;g(t.modules!==!0&&(t.modules!=null&&t.modules.isOne())?0:t.modules!=null?1:-1)}}function Na(e,o){if(e&1&&u(0,Aa,2,1),e&2){let t,i=l(2),n=l(3);g((t=n.data().machineEntities[i])?0:-1,t)}}function Ua(e,o){if(e&1&&(s(0,"div",23)(1,"span",68),b(2),r(),u(3,ua,7,7,"button",79)(4,Sa,6,6,"p-dropdown",80),c(5,"machineShow"),u(6,va,3,9,"p-inputNumber",81)(7,Ea,2,1)(8,Na,1,1),r()),e&2){let t,i,n=l(),a=l(),_=l(2);p(2),w(a.recipe.name),p(),g(!_.preferences().hideDuplicateIcons||a.itemId!=null&&a.itemId!==a.recipeId?3:-1),p(),g(E(5,6,n,_.data().game)?4:-1),p(2),g(_.data().game===_.Game.Satisfactory?6:-1),p(),g((t=a.recipeSettings==null?null:a.recipeSettings.fuelId)?7:-1,t),p(),g((i=a.recipeSettings==null?null:a.recipeSettings.modules)?8:-1,i)}}function Wa(e,o){if(e&1&&(s(0,"td",65),u(1,ca,3,5,"span",66),c(2,"machineShowRate"),r(),s(3,"td",67),u(4,Ua,9,9,"div",23),r()),e&2){let t=l(),i=l(2);p(),g(t.machines&&t.machines.nonzero()&&E(2,2,o,i.data().game)?1:-1),p(3),g(t.recipeId&&t.recipe&&t.recipeSettings?4:-1)}}function za(e,o){e&1&&x(0,"td",30)}function La(e,o){if(e&1&&(s(0,"i",99),c(1,"iconSmClass"),s(2,"span"),b(3),r()()),e&2){let t=l().$implicit;I(m(1,3,t.id)),p(3),w(t.total)}}function Ha(e,o){if(e&1&&(s(0,"i",83),c(1,"iconSmClass"),s(2,"span"),b(3),r()()),e&2){let t=o.$implicit;I(m(1,3,t.id)),p(3),w(t.count)}}function Ga(e,o){if(e&1&&(s(0,"div",44)(1,"i",83),c(2,"iconSmClass"),s(3,"span"),b(4),r()(),u(5,La,4,5,"i",98),F(6,Ha,4,5,"i",94,kt),r()),e&2){let t=o.$implicit;p(),I(m(2,4,t.id)),p(3),w(t.count),p(),g(t.total?5:-1),p(),D(t.modules)}}function qa(e,o){e&1&&x(0,"lab-tooltip",100),e&2&&d("id",o)}function Qa(e,o){if(e&1&&u(0,qa,1,1,"lab-tooltip",100),e&2){let t,i=l(3);g((t=i.recipeSettings.beacons==null||i.recipeSettings.beacons[0]==null?null:i.recipeSettings.beacons[0].id)?0:-1,t)}}function Ka(e,o){if(e&1){let t=y();s(0,"button",97),h("click",function(n){S(t);let a=T(5),_=l(2);return v(a.show(n,_.recipeSettings.beacons))}),F(1,Ga,8,6,"div",44,be),x(3,"i",95),r(),s(4,"lab-beacons-overlay",96,7),h("setValue",function(n){S(t);let a=l(2),_=l(2);return v(_.changeRecipeField(a,n,"beacons"))}),r(),u(6,Qa,1,1,"ng-template",null,4,B)}if(e&2){let t=T(7),i=l(2);d("pTooltip",t),p(),D(i.recipeSettings.beacons)}}function Xa(e,o){if(e&1&&(s(0,"td",48),u(1,Ka,8,1),r()),e&2){let t=l();p(),g(t.recipeId&&t.recipeSettings&&t.recipeSettings.beacons?1:-1)}}function Za(e,o){if(e&1&&(s(0,"span",66),b(1),c(2,"power"),r()),e&2){let t=l(2),i=l(2);p(),w(ge(2,1,t.power,i.columnsState().power.precision,i.effectivePowerUnit()))}}function Ja(e,o){if(e&1&&(s(0,"td",49),u(1,Za,3,5,"span",66),r()),e&2){let t=l();p(),g(t.power&&t.power.nonzero()?1:-1)}}function Ya(e,o){if(e&1&&(s(0,"span",66),b(1),c(2,"rate"),r()),e&2){let t=l(2),i=l(2);p(),w(E(2,1,t.pollution,i.columnsState().pollution.precision))}}function el(e,o){if(e&1&&(s(0,"td",49),u(1,Ya,3,4,"span",66),r()),e&2){let t=l();p(),g(t.pollution&&t.pollution.nonzero()?1:-1)}}function tl(e,o){if(e&1){let t=y();s(0,"button",104),c(1,"translate"),h("click",function(){S(t);let n=l(2),a=l(2);return v(a.resetStep(n))}),r()}e&2&&d("pTooltip",m(1,1,"steps.stepUndoTooltip"))}function il(e,o){if(e&1&&(s(0,"td",50)(1,"div",44)(2,"a",101),c(3,"stepHref"),x(4,"button",102),c(5,"translate"),r(),u(6,tl,2,3,"button",103),r()()),e&2){let t=l(),i=l(2);p(2),d("href",ge(3,3,t,i.routerSvc.zipConfig(),i.data()),ii),p(2),d("pTooltip",m(5,7,"steps.openNewTabTooltip")),p(2),g(t.recipeId&&i.stepsModified().recipes[t.recipeId]||t.itemId&&i.stepsModified().items[t.itemId]||t.recipeObjectiveId&&i.stepsModified().objectives[t.recipeObjectiveId]?6:-1)}}function nl(e,o){if(e&1){let t=y();s(0,"tr")(1,"td",42),x(2,"div",43),F(3,uo,1,1,"div",43,kt),s(5,"div",44)(6,"button",45),c(7,"translate"),h("click",function(){let n=S(t),a=l().expanded,_=l();return v(_.expandRow(n,a))}),r()()(),u(8,Co,3,2,"td",46)(9,wo,6,2,"td",47)(10,ko,10,7)(11,Eo,1,0,"td",30)(12,qo,2,1)(13,_a,2,1)(14,Wa,5,5)(15,za,1,0,"td",30)(16,Xa,2,1,"td",48)(17,Ja,2,1,"td",49)(18,el,2,1,"td",49)(19,il,7,9,"td",50),r()}if(e&2){let t,i=o,n=l().expanded,a=l();p(2),d("id","step_"+i.id),p(),D(a.stepDetails()[i.id].tabs),p(3),ie("fa-rotate-90",n),d("pTooltip",m(7,15,n?"steps.hideDetails":"steps.showDetails"))("pRowToggler",i),p(2),g(!a.focus()&&a.columnsState().checkbox.show?8:-1),p(),g(!a.focus()&&a.columnsState().tree.show?9:-1),p(),g(i.itemId&&i.items?10:11),p(2),g(a.columnsState().belts.show?12:-1),p(),g(a.columnsState().wagons.show?13:-1),p(),g((t=i.recipeSettings==null?null:i.recipeSettings.machineId)?14:15,t),p(2),g(a.columnsState().beacons.show?16:-1),p(),g(a.columnsState().power.show?17:-1),p(),g(a.columnsState().pollution.show?18:-1),p(),g(a.columnsState().link.show?19:-1)}}function ol(e,o){if(e&1&&(u(0,nl,20,17,"tr"),c(1,"asStep")),e&2){let t,i=o.$implicit;g((t=m(1,1,i))?0:-1,t)}}function al(e,o){if(e&1&&(s(0,"a",110),x(1,"span",111),s(2,"span",112),b(3),c(4,"translate"),r()()),e&2){let t=o.$implicit,i=l(3);d("id",t.id),p(),I(i.stepDetailIcon[t.label]),p(2),w(m(4,4,"options.stepDetailTab."+t.label))}}function ll(e,o){e&1&&A(0)}function pl(e,o){if(e&1&&(s(0,"tr",105),u(1,ll,1,0,"ng-container",113),s(2,"td",114),b(3),c(4,"translate"),r()()),e&2){l(4);let t=T(9);p(),d("ngTemplateOutlet",t),p(2),M(" ",m(4,2,"steps.sources")," ")}}function sl(e,o){e&1&&A(0)}function rl(e,o){if(e&1&&u(0,sl,1,0,"ng-container",115),e&2){let t=l().$implicit,i=l(2),n=l(2),a=T(11);d("ngTemplateOutlet",a)("ngTemplateOutletContext",Ae(2,Fn,[i.items==null?null:i.items.mul(t.value),i.itemId,i.belts==null?null:i.belts.mul(t.value),n.itemsState()[i.itemId].beltId,i.wagons==null?null:i.wagons.mul(t.value),n.itemsState()[i.itemId].wagonId,t.step==null?null:t.step.machines,t.step==null||t.step.recipeSettings==null?null:t.step.recipeSettings.machineId,t.step==null?null:t.step.recipeId,t.step==null?null:t.step.recipeObjectiveId,t.value,i.itemId,t.inputs]))}}function _l(e,o){if(e&1&&u(0,rl,1,16,"ng-container"),e&2){let t=l(2);g(t.itemId?0:-1)}}function cl(e,o){e&1&&A(0)}function dl(e,o){if(e&1&&(s(0,"tr",105),u(1,cl,1,0,"ng-container",113),s(2,"td",114),b(3),c(4,"translate"),r()()),e&2){l(4);let t=T(9);p(),d("ngTemplateOutlet",t),p(2),M(" ",m(4,2,"steps.destinations")," ")}}function ml(e,o){e&1&&A(0)}function ul(e,o){if(e&1&&u(0,ml,1,0,"ng-container",115),e&2){let t,i=l().$implicit,n=l(2),a=l(2),_=T(11);d("ngTemplateOutlet",_)("ngTemplateOutletContext",Ae(2,Dn,[n.items==null?null:n.items.mul(i.value),n.itemId,n.belts==null?null:n.belts.mul(i.value),a.itemsState()[n.itemId].beltId,n.wagons==null?null:n.wagons.mul(i.value),a.itemsState()[n.itemId].wagonId,a.stepDetails()[n.id].outputs.length===1?n.machines==null?null:n.machines.mul(i.value):null,a.stepDetails()[n.id].outputs.length===1?n.recipeSettings==null?null:n.recipeSettings.machineId:null,n.recipeId,n.recipeObjectiveId,i.value,(t=a.stepById()[i.key])==null?null:t.recipeId,(t=a.stepById()[i.key])==null?null:t.recipeObjectiveId,i.key===""]))}}function Cl(e,o){if(e&1&&u(0,ul,1,17,"ng-container"),e&2){let t=l(2);g(t.itemId?0:-1)}}function gl(e,o){if(e&1&&(u(0,pl,5,4,"tr",105),F(1,_l,1,1,null,null,be),u(3,dl,5,4,"tr",105),F(4,Cl,1,1,null,null,we),c(6,"keyvalue")),e&2){let t=l(),i=l(2);g(i.stepDetails()[t.id].outputs.length?0:-1),p(),D(i.stepDetails()[t.id].outputs),p(2),g(t.parents?3:-1),p(),D(E(6,2,t.parents,i.trackSvc.sortByValue))}}function fl(e,o){e&1&&A(0)}function xl(e,o){e&1&&A(0)}function hl(e,o){if(e&1&&u(0,xl,1,0,"ng-container",115),e&2){let t=l(),i=l().$implicit,n=l(4);l(2);let a=T(11);d("ngTemplateOutlet",a)("ngTemplateOutletContext",Q(2,jn,t.step.items.mul(t.percent).div(n.recipe.productivity),i.key))}}function Sl(e,o){if(e&1&&u(0,hl,1,5,"ng-container"),e&2){let t=o;g(t.step&&t.percent&&t.step.items?0:-1)}}function vl(e,o){if(e&1&&u(0,Sl,1,1),e&2){let t,i=o.$implicit,n=l(4),a=l(2);g((t=Q(1,Et,a.stepByItemEntities()[i.key],n.outputs==null?null:n.outputs[i.key]))?0:-1,t)}}function bl(e,o){if(e&1&&(s(0,"tr",105),u(1,fl,1,0,"ng-container",113),s(2,"td",114),b(3),c(4,"translate"),r()(),F(5,vl,1,4,null,null,we),c(7,"keyvalue")),e&2){let t=l(3),i=l(2),n=T(9);p(),d("ngTemplateOutlet",n),p(2),M(" ",m(4,2,"steps.depletion")," "),p(2),D(E(7,4,t.outputs,i.trackSvc.sortByValue))}}function Tl(e,o){e&1&&A(0)}function wl(e,o){e&1&&A(0)}function yl(e,o){if(e&1&&u(0,wl,1,0,"ng-container",115),e&2){let t=o,i=l(2),n=l().$implicit,a=l(4),_=l(2),C=T(11);d("ngTemplateOutlet",C)("ngTemplateOutletContext",Ae(2,$n,[i.step.items==null?null:i.step.items.mul(i.percent),n.key,i.step.belts==null?null:i.step.belts.mul(i.percent),_.itemsState()[i.step.itemId].beltId,i.step.wagons==null?null:i.step.wagons.mul(i.percent),_.itemsState()[i.step.itemId].wagonId,t.step==null?null:t.step.machines,t.step==null||t.step.recipeSettings==null?null:t.step.recipeSettings.machineId,t.step==null?null:t.step.recipeId,t.step==null?null:t.step.recipeObjectiveId,i.percent,a.recipeId,a.recipeObjectiveId]))}}function Il(e,o){e&1&&A(0)}function Bl(e,o){if(e&1&&u(0,Il,1,0,"ng-container",115),e&2){let t=l(2),i=l().$implicit,n=l(4),a=l(2),_=T(11);d("ngTemplateOutlet",_)("ngTemplateOutletContext",Ae(2,An,[t.step.items==null?null:t.step.items.mul(t.percent),i.key,t.step.belts==null?null:t.step.belts.mul(t.percent),a.itemsState()[t.step.itemId].beltId,t.step.wagons==null?null:t.step.wagons.mul(t.percent),a.itemsState()[t.step.itemId].wagonId,t.percent,n.recipeId,n.recipeObjectiveId]))}}function kl(e,o){if(e&1&&u(0,yl,1,16,"ng-container")(1,Bl,1,12,"ng-container"),e&2){let t,i=l(),n=l(7);g((t=n.stepDetails()[i.step.id].outputs.length===1&&n.stepDetails()[i.step.id].outputs[0])?0:1,t)}}function El(e,o){if(e&1&&u(0,kl,2,1),e&2){let t=o;g(t.step.itemId&&t.percent?0:-1)}}function Vl(e,o){if(e&1&&u(0,El,1,1),e&2){let t,i=o.$implicit,n=l(4),a=l(2);g((t=Q(1,Et,a.stepByItemEntities()[i.key],(t=a.stepByItemEntities()[i.key].parents)==null?null:t[n.id]))?0:-1,t)}}function Ml(e,o){if(e&1&&(s(0,"tr",105),u(1,Tl,1,0,"ng-container",113),s(2,"td",114),b(3),c(4,"translate"),r()(),F(5,Vl,1,4,null,null,we),c(7,"keyvalue")),e&2){let t=l(3),i=l(2),n=T(9);p(),d("ngTemplateOutlet",n),p(2),M(" ",m(4,2,"steps.inputs")," "),p(2),D(E(7,4,t.recipe.in,i.trackSvc.sortByValue))}}function Ol(e,o){e&1&&A(0)}function Rl(e,o){e&1&&A(0)}function Pl(e,o){e&1&&A(0)}function Fl(e,o){e&1&&A(0)}function Dl(e,o){if(e&1&&u(0,Fl,1,0,"ng-container",115),e&2){let t=l(),i=l().$implicit,n=l(3),a=l(2),_=T(11);d("ngTemplateOutlet",_)("ngTemplateOutletContext",Ae(2,Nn,[t.step.items==null?null:t.step.items.mul(t.percent),i.key,t.step.belts==null?null:t.step.belts.mul(t.percent),a.itemsState()[t.step.itemId].beltId,t.step.wagons==null?null:t.step.wagons.mul(t.percent),a.itemsState()[t.step.itemId].wagonId,n.machines,n.recipeSettings==null?null:n.recipeSettings.machineId,n.recipeId,n.recipeObjectiveId,t.percent,i.key,n.recipeObjectiveId]))}}function jl(e,o){if(e&1&&u(0,Dl,1,16,"ng-container"),e&2){let t=o;g(t.step.itemId&&t.percent?0:-1)}}function $l(e,o){if(e&1&&u(0,jl,1,1),e&2){let t,i=o.$implicit,n=l(3),a=l(2);g((t=Q(1,Et,a.stepByItemEntities()[i.key],n.outputs==null?null:n.outputs[i.key]))?0:-1,t)}}function Al(e,o){if(e&1&&(u(0,bl,8,7)(1,Ml,8,7),c(2,"keyvalue"),s(3,"tr",105),u(4,Ol,1,0,"ng-container",113),s(5,"td",114),b(6),c(7,"translate"),r()(),s(8,"tr",105),u(9,Rl,1,0,"ng-container",113),s(10,"td",116)(11,"span",66),b(12),c(13,"rate"),r()(),s(14,"td",117)(15,"div",44),x(16,"i",118),r()(),x(17,"td",17),r(),s(18,"tr",105),u(19,Pl,1,0,"ng-container",113),s(20,"td",114),b(21),c(22,"translate"),r()(),F(23,$l,1,4,null,null,we),c(25,"keyvalue")),e&2){let t=l(2),i=l(2),n=T(9);g(i.data().game===i.Game.Factorio&&t.recipe.isMining?0:-1),p(),g(m(2,8,t.recipe.in).length?1:-1),p(3),d("ngTemplateOutlet",n),p(2),M(" ",m(7,10,"steps.time")," "),p(3),d("ngTemplateOutlet",n),p(3),w(E(13,12,t.recipe.time,i.columnsState().items.precision)),p(7),d("ngTemplateOutlet",n),p(2),M(" ",m(22,15,"steps.outputs")," "),p(2),D(E(25,17,t.recipe.out,i.trackSvc.sortByValue))}}function Nl(e,o){if(e&1&&u(0,Al,26,20),e&2){let t=l();g(t.recipe?0:-1)}}function Ul(e,o){e&1&&A(0)}function Wl(e,o){if(e&1&&(u(0,Ul,1,0,"ng-container",115),c(1,"rate")),e&2){let t=l(2),i=l().$implicit;l();let n=T(27),a=l(2),_=l(2);d("ngTemplateOutlet",n)("ngTemplateOutletContext",Q(5,Ge,E(1,2,t.step.items.mul(t.percent).div(a.machines),_.columnsState().items.precision),i.key))}}function zl(e,o){e&1&&A(0)}function Ll(e,o){if(e&1&&(u(0,zl,1,0,"ng-container",115),c(1,"rate")),e&2){let t=l(4);l(2);let i=T(27),n=l(2),a=l(2);d("ngTemplateOutlet",i)("ngTemplateOutletContext",Q(5,Ge,E(1,2,t.step.belts.mul(t.percent).div(n.machines),a.columnsState().belts.precision),o))}}function Hl(e,o){if(e&1&&u(0,Ll,2,8,"ng-container"),e&2){let t,i=l(4).$implicit,n=l(5);g((t=n.itemsState()[i.key].beltId)?0:-1,t)}}function Gl(e,o){if(e&1&&(s(0,"td"),u(1,Hl,1,1),r()),e&2){let t=l(2);p(),g(t.step.belts?1:-1)}}function ql(e,o){e&1&&A(0)}function Ql(e,o){if(e&1&&(u(0,ql,1,0,"ng-container",115),c(1,"rate")),e&2){let t=o;l(6);let i=T(27);d("ngTemplateOutlet",i)("ngTemplateOutletContext",Q(5,Ge,E(1,2,t.value,1),t.id))}}function Kl(e,o){if(e&1&&(u(0,Ql,2,8,"ng-container"),c(1,"inserterSpeed")),e&2){let t,i=l(3),n=l(4),a=l(2);g((t=E(1,1,i.step.items.mul(i.percent).div(n.machines).div(a.dispRateInfo().value),a.settings()))?0:-1,t)}}function Xl(e,o){if(e&1&&(s(0,"td"),u(1,Kl,2,4),r()),e&2){let t=l(2),i=l().$implicit,n=l(5);p(),g(n.itemsState()[i.key].beltId!==n.ItemId.Pipe&&t.step.items?1:-1)}}function Zl(e,o){if(e&1&&(s(0,"tr")(1,"td"),u(2,Wl,2,8,"ng-container"),r(),u(3,Gl,2,1,"td")(4,Xl,2,1,"td"),r()),e&2){let t=l(),i=l(6);p(2),g(t.step.items?2:-1),p(),g(i.columnsState().belts.show?3:-1),p(),g(i.data().game===i.Game.Factorio?4:-1)}}function Jl(e,o){e&1&&u(0,Zl,5,3,"tr"),e&2&&g(o.percent?0:-1)}function Yl(e,o){if(e&1&&u(0,Jl,1,1),e&2){let t,i=o.$implicit,n=l(3),a=l(2);g((t=Q(1,Et,a.stepByItemEntities()[i.key],(t=a.stepByItemEntities()[i.key].parents)==null?null:t[n.id]))?0:-1,t)}}function ep(e,o){if(e&1&&x(0,"lab-tooltip",64),e&2){let t=l(4);d("id",t.recipeId)}}function tp(e,o){if(e&1&&x(0,"lab-tooltip",86),e&2){let t=l();d("id",t)}}function ip(e,o){if(e&1&&(s(0,"div",23)(1,"i",63),c(2,"iconClass"),u(3,ep,1,1,"ng-template",null,4,B),r(),s(5,"i",63),c(6,"iconClass"),u(7,tp,1,1,"ng-template",null,4,B),r()()),e&2){let t=T(4),i=l(3);p(),I(E(2,6,i.recipeId,"recipe")),d("pTooltip",t),p(4),I(m(6,9,o)),d("pTooltip",t)}}function np(e,o){e&1&&A(0)}function op(e,o){if(e&1&&(u(0,np,1,0,"ng-container",115),c(1,"rate")),e&2){let t=o;l(5);let i=T(27);d("ngTemplateOutlet",i)("ngTemplateOutletContext",Q(5,Ge,E(1,2,t.value,1),t.id))}}function ap(e,o){if(e&1&&(u(0,op,2,8,"ng-container"),c(1,"inserterSpeed")),e&2){let t,i=l(2),n=l(6);g((t=E(1,1,i,n.settings()))?0:-1,t)}}function lp(e,o){if(e&1&&(s(0,"td"),u(1,ap,2,4),r()),e&2){let t=l(2).$implicit,i=l(5);p(),g(i.itemsState()[t.key].beltId!==i.ItemId.Pipe?1:-1)}}function pp(e,o){e&1&&A(0)}function sp(e,o){if(e&1&&(u(0,pp,1,0,"ng-container",115),c(1,"rate")),e&2){let t=o,i=l(2);l(2);let n=T(27),a=l(4);d("ngTemplateOutlet",n)("ngTemplateOutletContext",Q(5,Ge,E(1,2,i.div(a.beltSpeed()[t]),a.columnsState().belts.precision),t))}}function rp(e,o){if(e&1&&(s(0,"td"),u(1,sp,2,8,"ng-container"),r()),e&2){let t,i=l(2).$implicit,n=l(5);p(),g((t=n.itemsState()[i.key].beltId)?1:-1,t)}}function _p(e,o){e&1&&A(0)}function cp(e,o){if(e&1&&(s(0,"tr"),u(1,lp,2,1,"td")(2,rp,2,1,"td"),s(3,"td"),u(4,_p,1,0,"ng-container",115),c(5,"rate"),r()()),e&2){let t=l().$implicit;l();let i=T(27),n=l(4);p(),g(n.data().game===n.Game.Factorio?1:-1),p(),g(n.columnsState().belts.show?2:-1),p(2),d("ngTemplateOutlet",i)("ngTemplateOutletContext",Q(7,Ge,E(5,4,o.mul(n.dispRateInfo().value),n.columnsState().items.precision),t.key))}}function dp(e,o){if(e&1&&u(0,cp,6,10,"tr"),e&2){let t,i=o.$implicit,n=l(3);g((t=i.value.div(n.recipe.time))?0:-1,t)}}function mp(e,o){if(e&1&&x(0,"lab-tooltip",62),e&2){let t=l().itemId;d("id",t)}}function up(e,o){if(e&1&&(s(0,"div",39)(1,"span",66),b(2),r(),s(3,"i",63),c(4,"iconClass"),u(5,mp,1,1,"ng-template",null,4,B),r()()),e&2){let t=o.value,i=o.itemId,n=T(6);p(2),w(t),p(),I(m(4,4,i)),d("pTooltip",n)}}function Cp(e,o){if(e&1&&(s(0,"div",23)(1,"table",120),F(2,Yl,1,4,null,null,we),c(4,"keyvalue"),r(),x(5,"i",121),s(6,"table",120)(7,"tr")(8,"td",116)(9,"span",66),b(10),c(11,"rate"),r()(),s(12,"td"),u(13,ip,9,11,"div",23),r()(),s(14,"tr")(15,"td",116)(16,"span",66),b(17),c(18,"rate"),r()(),s(19,"td"),x(20,"i",118),r()()(),x(21,"i",121),s(22,"table",120),F(23,dp,1,1,null,null,we),c(25,"keyvalue"),r(),u(26,up,7,6,"ng-template",null,9,B),r()),e&2){let t,i=l(2),n=l(2);p(2),D(E(4,3,i.recipe.in,n.trackSvc.sortByValue)),p(8),w(E(11,6,n.rational(1),n.columnsState().machines.precision)),p(3),g((t=i.recipeSettings==null?null:i.recipeSettings.machineId)?13:-1,t),p(4),w(E(18,9,n.dispRateInfo().value,n.columnsState().machines.precision)),p(6),D(E(25,12,i.recipe.out,n.trackSvc.sortByValue))}}function gp(e,o){e&1&&(x(0,"small",119),c(1,"translate")),e&2&&d("innerHTML",m(1,1,"steps.inserterCountInfo"),ti)}function fp(e,o){if(e&1&&(s(0,"tr",105),x(1,"td"),s(2,"td",17),u(3,Cp,28,15,"div",23)(4,gp,2,3,"small",119),r()()),e&2){let t=l(),i=l(2);p(3),g(t.recipeId&&t.recipe&&t.machines?3:-1),p(),g(i.data().game===i.Game.Factorio?4:-1)}}function xp(e,o){if(e&1&&x(0,"lab-tooltip",64),e&2){let t=l().$implicit;d("id",t)}}function hp(e,o){if(e&1){let t=y();s(0,"button",127),c(1,"iconSmClass"),h("click",function(){let n=S(t).$implicit,a=l(5);return v(a.toggleRecipe(n,a.recipesState(),a.data()))}),x(2,"i",61),u(3,xp,1,1,"ng-template",null,4,B),r()}if(e&2){let t=o.$implicit,i=T(4),n=l(5);ie("hover-active",n.recipesState()[t].excluded),d("icon",E(1,4,t,"recipe"))("pTooltip",i)}}function Sp(e,o){if(e&1){let t=y();s(0,"tr",105),x(1,"td"),s(2,"td",17)(3,"div")(4,"div",122),b(5),c(6,"translate"),r(),s(7,"div",123)(8,"small"),b(9),c(10,"translate"),r()(),s(11,"p-checkbox",124),c(12,"translate"),h("onChange",function(){let n=S(t),a=l(4);return v(a.toggleRecipes(n.recipeIds,n.allRecipesIncluded,a.data()))}),r()()()(),s(13,"tr",105),x(14,"td"),s(15,"td",17)(16,"div",125),F(17,hp,5,7,"button",126,Ve),r()()()}if(e&2){let t=o;p(5),M(" ",m(6,5,"steps.includedRecipes")," "),p(4),w(m(10,7,"steps.includedRecipesInfo")),p(2),d("ngModel",t.allRecipesIncluded)("binary",!0)("label",m(12,9,"picker.includeAll")),p(6),D(t.recipeIds)}}function vp(e,o){if(e&1&&u(0,Sp,19,11),e&2){let t,i=l(),n=l(2);g((t=i.itemId&&n.stepDetails()[i.id])?0:-1,t)}}function bp(e,o){if(e&1){let t=y();s(0,"tr",105)(1,"td",106)(2,"a",107),x(3,"button",108),r()(),s(4,"td",17)(5,"p-tabMenu",109,8),c(7,"stepId"),h("activeItemChange",function(n){let a=S(t),_=l(2);return v(_.setActiveItem(a,n))}),u(8,al,5,6,"ng-template",72),r()()(),u(9,gl,7,5)(10,Nl,1,1)(11,fp,5,2,"tr",105)(12,vp,1,1)}if(e&2){let t,i=o,n=T(6),a=l(2);p(2),d("relativeTo",a.route)("fragment",i.id),p(3),d("model",a.stepDetails()[i.id].tabs)("activeItem",a.activeItem[m(7,5,i)]),p(4),g((t=n.activeItem==null?null:n.activeItem.label)===a.StepDetailTab.Item?9:t===a.StepDetailTab.Recipe?10:t===a.StepDetailTab.Machine?11:t===a.StepDetailTab.Recipes?12:-1)}}function Tp(e,o){if(e&1&&(u(0,bp,13,7),c(1,"asStep")),e&2){let t,i=o.$implicit;g((t=m(1,1,i))?0:-1,t)}}function wp(e,o){e&1&&(s(0,"tr")(1,"td",17)(2,"div",51)(3,"span"),b(4),c(5,"translate"),r()()()()),e&2&&(p(4),w(m(5,1,"steps.emptyMessage")))}function yp(e,o){if(e&1&&u(0,wp,6,3,"tr"),e&2){let t=l();g(t.focus()?0:-1)}}function Ip(e,o){e&1&&x(0,"td",30)}function Bp(e,o){e&1&&x(0,"td")}function kp(e,o){e&1&&x(0,"td")}function Ep(e,o){if(e&1&&u(0,Bp,1,0,"td")(1,kp,1,0,"td"),e&2){let t=l(2);g(t.columnsState().checkbox.show?0:-1),p(),g(t.columnsState().tree.show?1:-1)}}function Vp(e,o){if(e&1&&(x(0,"td"),u(1,Ep,2,2)),e&2){let t=l();p(),g(t.focus()?-1:1)}}function Mp(e,o){e&1&&A(0)}function Op(e,o){if(e&1&&x(0,"lab-tooltip",62),e&2){let t=l(2).itemId;d("id",t)}}function Rp(e,o){if(e&1&&x(0,"lab-tooltip",75),e&2){let t=l(3).beltId;d("id",t)}}function Pp(e,o){if(e&1&&(s(0,"td",116)(1,"span",66),b(2),c(3,"rate"),r()(),s(4,"td",117)(5,"div",44)(6,"i",63),c(7,"iconClass"),u(8,Rp,1,1,"ng-template",null,4,B),r()()()),e&2){let t=T(9),i=l(2),n=i.belts,a=i.beltId,_=l();p(2),w(E(3,4,n,_.columnsState().belts.precision)),p(4),I(m(7,7,a)),d("pTooltip",t)}}function Fp(e,o){if(e&1&&x(0,"lab-tooltip",77),e&2){let t=l(4).wagonId;d("id",t)}}function Dp(e,o){if(e&1&&(s(0,"i",63),c(1,"iconClass"),u(2,Fp,1,1,"ng-template",null,4,B),r()),e&2){let t=T(3),i=l(3).wagonId;I(m(1,3,i)),d("pTooltip",t)}}function jp(e,o){if(e&1&&x(0,"lab-tooltip",78),e&2){let t=l(4).wagonId;d("id",t)}}function $p(e,o){if(e&1&&(s(0,"i",63),c(1,"iconClass"),u(2,jp,1,1,"ng-template",null,4,B),r()),e&2){let t=T(3),i=l(3).wagonId;I(m(1,3,i)),d("pTooltip",t)}}function Ap(e,o){if(e&1&&(s(0,"td",116)(1,"span",66),b(2),c(3,"rate"),r()(),s(4,"td",117)(5,"div",44),u(6,Dp,4,5,"i",57)(7,$p,4,5,"i",57),r()()),e&2){let t=l(2),i=t.wagons,n=t.wagonId,a=l();p(2),w(E(3,2,i,a.columnsState().wagons.precision)),p(4),g(a.data().cargoWagonIds.indexOf(n)!==-1?6:7)}}function Np(e,o){if(e&1&&(s(0,"span",66),b(1),c(2,"machineRate"),r()),e&2){let t=l(2),i=t.machines,n=t.machineId,a=l();p(),w(ge(2,1,i,a.columnsState().machines.precision,n))}}function Up(e,o){e&1&&(s(0,"div",129),b(1),c(2,"translate"),r()),e&2&&(p(),M(" ",m(2,1,"steps.inputs")," "))}function Wp(e,o){if(e&1&&(s(0,"span"),b(1),r()),e&2){let t=l(3).recipeObjectiveId;p(),M("#",t,"")}}function zp(e,o){if(e&1&&x(0,"lab-tooltip",64),e&2){let t=l(3).recipeId;d("id",t)}}function Lp(e,o){if(e&1&&x(0,"lab-tooltip",86),e&2){let t=l(3).machineId;d("id",t)}}function Hp(e,o){if(e&1&&(s(0,"i",63),c(1,"iconClass"),u(2,Wp,2,1,"span")(3,zp,1,1,"ng-template",null,4,B),r(),s(5,"i",63),c(6,"iconClass"),u(7,Lp,1,1,"ng-template",null,4,B),r()),e&2){let t=T(4),i=l(2),n=i.machineId,a=i.recipeId,_=i.recipeObjectiveId;I(E(1,7,a,"recipe")),d("pTooltip",t),p(2),g(_?2:-1),p(3),I(m(6,10,n)),d("pTooltip",t)}}function Gp(e,o){e&1&&(s(0,"div",130),x(1,"i",131),r(),s(2,"div",130),x(3,"i",131),r())}function qp(e,o){e&1&&x(0,"i",132)}function Qp(e,o){e&1&&x(0,"i",132)}function Kp(e,o){if(e&1&&(s(0,"span"),b(1),r()),e&2){let t=l(4).destRecipeObjectiveId;p(),M("#",t,"")}}function Xp(e,o){if(e&1&&x(0,"lab-tooltip",133),e&2){let t=l(4),i=t.destId,n=t.destIsRecipe;d("id",i)("type",n?"recipe":"item")}}function Zp(e,o){if(e&1&&(s(0,"i",63),c(1,"iconClass"),u(2,Kp,2,1,"span")(3,Xp,1,2,"ng-template",null,4,B),r()),e&2){let t=T(4),i=l(3),n=i.destId,a=i.destRecipeObjectiveId,_=i.destIsRecipe;I(E(1,4,n,_?"recipe":"item")),d("pTooltip",t),p(2),g(a?2:-1)}}function Jp(e,o){e&1&&(s(0,"span"),b(1),c(2,"translate"),r()),e&2&&(p(),M(" ",m(2,1,"steps.outputs")," "))}function Yp(e,o){if(e&1&&(u(0,qp,1,0,"i",132),s(1,"span",66),b(2),c(3,"rate"),c(4,"leftPad"),r(),u(5,Qp,1,0,"i",132)(6,Zp,5,7,"i",57)(7,Jp,3,3,"span")),e&2){let t=l(2),i=t.percent,n=t.percentOnDest,a=t.destId,_=t.outputs;g(n?0:-1),p(2),M("",m(4,8,E(3,5,i,-2)),"%"),p(3),g(n?-1:5),p(),g(a?6:-1),p(),g(_?7:-1)}}function es(e,o){if(e&1&&(u(0,Mp,1,0,"ng-container",113),s(1,"td",116)(2,"span",66),b(3),c(4,"rate"),r()(),s(5,"td",117)(6,"div",44)(7,"i",63),c(8,"iconClass"),u(9,Op,1,1,"ng-template",null,4,B),r()()(),u(11,Pp,10,9)(12,Ap,8,5),s(13,"td",116),u(14,Np,3,5,"span",66),c(15,"machineShowRate"),r(),s(16,"td",128)(17,"div",23),u(18,Up,3,3,"div",129)(19,Hp,9,12),c(20,"machineShow"),u(21,Gp,4,0)(22,Yp,8,10),r()()),e&2){let t=T(10),i=l(),n=i.items,a=i.itemId,_=i.belts,C=i.beltId,f=i.wagons,k=i.wagonId,O=i.machines,P=i.machineId,W=i.percent,qe=i.inputs,Qe=l(),en=T(9);d("ngTemplateOutlet",en),p(3),w(E(4,11,n,Qe.columnsState().items.precision)),p(4),I(m(8,14,a)),d("pTooltip",t),p(4),g(Qe.columnsState().belts.show&&_&&C?11:-1),p(),g(Qe.columnsState().wagons.show&&f&&k?12:-1),p(2),g(O&&O.nonzero()&&E(15,16,P,Qe.data().game)?14:-1),p(4),g(qe?18:-1),p(),g(E(20,19,P,Qe.data().game)?19:21),p(3),g(W?22:-1)}}function ts(e,o){if(e&1&&(s(0,"tr",105),u(1,es,23,22),r()),e&2){let t=o.itemId;p(),g(t?1:-1)}}function is(e,o){e&1&&x(0,"td")}function ns(e,o){e&1&&x(0,"td")}function os(e,o){e&1&&A(0)}function as(e,o){e&1&&A(0)}function ls(e,o){e&1&&A(0)}function ps(e,o){e&1&&A(0)}function ss(e,o){if(e&1&&(s(0,"td",134)(1,"span",66),b(2),c(3,"power"),r()()),e&2){let t=l(3);p(2),w(ge(3,1,t.totals().power,t.columnsState().power.precision,t.effectivePowerUnit()))}}function rs(e,o){if(e&1&&(s(0,"td",134)(1,"span",66),b(2),c(3,"rate"),r()()),e&2){let t=l(3);p(2),w(E(3,1,t.totals().pollution,t.columnsState().pollution.precision))}}function _s(e,o){e&1&&x(0,"td")}function cs(e,o){if(e&1&&(s(0,"tr"),x(1,"td"),u(2,is,1,0,"td")(3,ns,1,0,"td"),s(4,"td",30),b(5),c(6,"translate"),r(),u(7,os,1,0,"ng-container",115)(8,as,1,0,"ng-container",115)(9,ls,1,0,"ng-container",115)(10,ps,1,0,"ng-container",115)(11,ss,4,5,"td",134)(12,rs,4,4,"td",134)(13,_s,1,0,"td"),r()),e&2){l();let t=T(2),i=l();p(2),g(i.columnsState().checkbox.show?2:-1),p(),g(i.columnsState().tree.show?3:-1),p(2),M(" ",m(6,14,"steps.total")," "),p(2),d("ngTemplateOutlet",t)("ngTemplateOutletContext",Q(16,Un,i.columnsState().belts,i.totals().belts)),p(),d("ngTemplateOutlet",t)("ngTemplateOutletContext",Q(19,Wn,i.columnsState().wagons,i.totals().wagons)),p(),d("ngTemplateOutlet",t)("ngTemplateOutletContext",Ot(22,zn,i.columnsState().machines,i.totals().machines,i.totals().modules)),p(),d("ngTemplateOutlet",t)("ngTemplateOutletContext",Ot(26,Ln,i.columnsState().beacons,i.totals().beacons,i.totals().beaconModules)),p(),g(i.columnsState().power.show?11:-1),p(),g(i.columnsState().pollution.show?12:-1),p(),g(i.columnsState().link.show?13:-1)}}function ds(e,o){if(e&1&&(s(0,"div",136)(1,"span",66),b(2),c(3,"rate"),r()()),e&2){let t=o.$implicit,i=l(2).columnSettings;p(2),w(E(3,1,t.value,i.precision))}}function ms(e,o){if(e&1&&x(0,"lab-tooltip",133),e&2){let t=l(2).$implicit,i=l(2).type;d("id",t.key)("type",i)}}function us(e,o){if(e&1&&(s(0,"i",141),c(1,"iconClass"),u(2,ms,1,2,"ng-template",null,4,B),r()),e&2){let t=T(3),i=l().$implicit;I(m(1,3,i.key)),d("pTooltip",t)}}function Cs(e,o){if(e&1&&x(0,"lab-tooltip",64),e&2){let t=l(2).$implicit;d("id",t.key)}}function gs(e,o){if(e&1&&(s(0,"i",141),c(1,"iconClass"),u(2,Cs,1,1,"ng-template",null,4,B),r()),e&2){let t=T(3),i=l().$implicit;I(E(1,3,i.key,"recipe")),d("pTooltip",t)}}function fs(e,o){if(e&1&&u(0,us,4,5,"i",140)(1,gs,4,6,"i",140),e&2){let t=o.$implicit,i=l(4);g(i.data().itemEntities[t.key]?0:1)}}function xs(e,o){if(e&1&&x(0,"lab-tooltip",92),e&2){let t=l().$implicit;d("id",t.key)}}function hs(e,o){if(e&1&&(s(0,"div",142)(1,"span",66),b(2),r()(),s(3,"i",141),c(4,"iconClass"),u(5,xs,1,1,"ng-template",null,4,B),r()),e&2){let t=o.$implicit,i=T(6);p(2),w(t.value),p(),I(E(4,4,t.key,"item")),d("pTooltip",t.key!=="module"?i:void 0)}}function Ss(e,o){if(e&1&&(s(0,"td",135),F(1,ds,4,4,"div",136,we),c(3,"keyvalue"),r(),s(4,"td",137)(5,"div",44)(6,"div",138),F(7,fs,2,1,null,null,we),c(9,"keyvalue"),r(),s(10,"div",139),F(11,hs,7,7,null,null,we),c(13,"keyvalue"),r()()()),e&2){let t=l(),i=t.totals,n=t.modulesTotals,a=l(2);p(),D(E(3,0,i,a.trackSvc.sortByValue)),p(6),D(E(9,3,i,a.trackSvc.sortByValue)),p(4),D(E(13,6,n,a.trackSvc.sortByValue))}}function vs(e,o){if(e&1&&u(0,Ss,14,9),e&2){let t=o.columnSettings;g(t.show?0:-1)}}function bs(e,o){if(e&1&&u(0,cs,14,30,"tr")(1,vs,1,1,"ng-template",null,10,B),e&2){let t=l();g(t.focus()?-1:0)}}var Ts=(()=>{let o=class o{constructor(){this.document=R(oi),this.route=R(bi),this.ref=R(ni),this.contentSvc=R(he),this.trackSvc=R(Ct),this.store=R(Y),this.exportSvc=R(Vi),this.routerSvc=R(We),this.focus=ve(!1),this.selectedId=ve(),this.steps=Z(()=>{let i=[...this.store.selectSignal($.getSteps)()];if(!this.focus())return i;let a=this.selectedId();return i.filter(_=>_.id===a)}),this.activeItemsEffect=Ne(()=>{let i=this.steps(),n=this.store.selectSignal($.getStepDetails)();this.setActiveItems(i,n)}),this.toggleEffect=Ne(()=>{let i=this.focus(),n=this.steps()[0];i&&n&&(this.stepsTable().toggleRow(n),this.expandRow(n,!1))}),this.machinesState=this.store.selectSignal(q.getMachinesState),this.itemsState=this.store.selectSignal(G.getItemsState),this.itemsModified=this.store.selectSignal(G.getItemsModified),this.stepsModified=this.store.selectSignal($.getStepsModified),this.totals=this.store.selectSignal($.getTotals),this.stepDetails=this.store.selectSignal($.getStepDetails),this.stepById=this.store.selectSignal($.getStepById),this.stepByItemEntities=this.store.selectSignal($.getStepByItemEntities),this.stepTree=this.store.selectSignal($.getStepTree),this.effectivePowerUnit=this.store.selectSignal($.getEffectivePowerUnit),this.recipesState=this.store.selectSignal(N.getRecipesState),this.recipesModified=this.store.selectSignal($.getRecipesModified),this.data=this.store.selectSignal(N.getAdjustedDataset),this.columnsState=this.store.selectSignal(V.getColumnsState),this.settings=this.store.selectSignal(V.getSettings),this.dispRateInfo=this.store.selectSignal(V.getDisplayRateInfo),this.options=this.store.selectSignal(V.getOptions),this.beltSpeed=this.store.selectSignal(V.getBeltSpeed),this.preferences=this.store.selectSignal(L.preferencesState),this.sortSteps$=new Kt(null),this.stepsTable=pt.required("stepsTable"),this.activeItem={},this.stepDetailIcon=fi,this.ItemId=z,this.StepDetailTab=gi,this.Game=fe,this.EnergyType=ai,this.ObjectiveUnit=ne,this.rational=j,Mt([this.sortSteps$.pipe(Zt()),this.store.select($.getSteps)]).pipe(yi()).subscribe(([[i,n],a])=>{this.sortSteps(i,n,a)})}ngOnInit(){this.route.fragment.pipe(ue(),Xt(i=>i!=null)).subscribe(i=>{this.fragmentId=i})}ngAfterViewInit(){try{if(this.fragmentId){let[i,n,a]=this.fragmentId.split("_");Mt([this.store.select($.getSteps),this.store.select($.getStepDetails)]).pipe(ue()).subscribe(([_,C])=>{let f=_.find(k=>k.id===n);f&&C[f.id].tabs.length&&this.stepsTable&&(this.stepsTable().toggleRow(f),setTimeout(()=>{if(a){let O=this.document.querySelector("#"+this.fragmentId);O&&O.click()}else this.document.querySelector("#"+this.fragmentId)?.scrollIntoView()},10))})}}catch{}}sortSteps(i,n,a){if(n==null||n.order==null||n.field==null)return;let _=n.order,C=n.field;if(i!=null&&i.field===C&&i.order!==_&&_===-1&&this.stepsTable!=null)return n.data?.sort((f,k)=>a.indexOf(f)-a.indexOf(k)),this.stepsTable().sortOrder=0,this.stepsTable().sortField="",this.stepsTable().reset(),this.sortSteps$.next(null);n.data?.sort((f,k)=>(f[C]??j(0n)).sub(k[C]??j(0n)).toNumber()*_)}setActiveItems(i,n){i.forEach(a=>this._updateActiveItem(a,n,!1))}expandRow(i,n){n||this._updateActiveItem(i,this.stepDetails(),!0)}_updateActiveItem(i,n,a){let _=Pe.transform(i),C=this._getActiveItem(i,_,n,a);if(C){let f=Pe.transform(i);this.activeItem[f]=C}}_getActiveItem(i,n,a,_){let C=this.activeItem[n],f=a[i.id];if(f==null)return null;if(C!=null){let O=f.tabs.find(P=>P.label===C.label);if(O!=null)return O}if(C==null&&!_)return null;let k=Ie.stepDetailTab;if(k){let O=f.tabs.find(P=>P.label===k);if(O!=null)return O}return f.tabs[0]}setActiveItem(i,n){if(n==null)return;let a=Pe.transform(i);this.activeItem[a]=n,Ie.stepDetailTab=n.label}resetStep(i){i.itemId&&this.resetItem(i.itemId),i.recipeObjectiveId?this.resetRecipeObjective(i.recipeObjectiveId):i.recipeId&&this.resetRecipe(i.recipeId)}toggleRecipes(i,n,a){let _=i.map(C=>({id:C,value:n,def:K(a.defaults?.excludedRecipeIds,[]).includes(C)}));this.setRecipeExcludedBatch(_)}toggleRecipe(i,n,a){let _=!n[i].excluded,C=K(a.defaults?.excludedRecipeIds,[]).some(f=>f===i);this.setRecipeExcluded(i,_,C)}changeRecipeField(i,n,a){if(i.recipeId==null)return;let _=i.recipeSettings;if(_?.machineId==null)return;let C=i.recipeObjectiveId??i.recipeId,f=i.recipeObjectiveId!=null,k=this.machinesState(),O=k.entities[_.machineId];switch(a){case"machine":{if(typeof n!="string")return;let P=this.data();this.setMachine(C,n,de.bestMatch(P.recipeEntities[i.recipeId].producers,k.ids),f);break}case"fuel":{if(typeof n!="string")return;this.setFuel(C,n,O.fuelId,f);break}case"modules":{if(!Array.isArray(n))return;n=n;let P=this.data().machineEntities[_.machineId];this.setModules(C,de.dehydrateModules(n,K(_.moduleOptions,[]),k.moduleRankIds,P.modules,O.modules),f);break}case"beacons":{if(!Array.isArray(n))return;n=n;let P=O.beacons;this.setBeacons(C,de.dehydrateBeacons(n,P),f);break}case"overclock":{if(typeof n!="number")return;let P=O.overclock;this.setOverclock(C,j(n),P,f);break}}}changeStepChecked(i,n){i.itemId!=null?this.setItemChecked(i.itemId,n):i.recipeObjectiveId!=null?this.setRecipeChecked(i.recipeObjectiveId,n,!0):i.recipeId!=null&&this.setRecipeChecked(i.recipeId,n)}setRows(i){this.store.dispatch(new L.SetRowsAction(i))}setItemExcluded(i,n){this.store.dispatch(new G.SetExcludedAction({id:i,value:n}))}setItemChecked(i,n){this.store.dispatch(new G.SetCheckedAction({id:i,value:n}))}setBelt(i,n,a){this.store.dispatch(new G.SetBeltAction({id:i,value:n,def:a}))}setWagon(i,n,a){this.store.dispatch(new G.SetWagonAction({id:i,value:n,def:a}))}setRecipeExcluded(i,n,a){this.store.dispatch(new N.SetExcludedAction({id:i,value:n,def:a}))}setRecipeExcludedBatch(i){this.store.dispatch(new N.SetExcludedBatchAction(i))}addObjective(i){this.store.dispatch(new $.AddAction(i))}setMachine(i,n,a,_=!1){let C=_?$.SetMachineAction:N.SetMachineAction;this.store.dispatch(new C({id:i,value:n,def:a}))}setFuel(i,n,a,_=!1){let C=_?$.SetFuelAction:N.SetFuelAction;this.store.dispatch(new C({id:i,value:n,def:a}))}setModules(i,n,a=!1){let _=a?$.SetModulesAction:N.SetModulesAction;this.store.dispatch(new _({id:i,value:n}))}setBeacons(i,n,a=!1){let _=a?$.SetBeaconsAction:N.SetBeaconsAction;this.store.dispatch(new _({id:i,value:n}))}setOverclock(i,n,a,_=!1){let C=_?$.SetOverclockAction:N.SetOverclockAction;this.store.dispatch(new C({id:i,value:n,def:a}))}setRecipeChecked(i,n,a=!1){let _=a?$.SetCheckedAction:N.SetCheckedAction;this.store.dispatch(new _({id:i,value:n}))}resetItem(i){this.store.dispatch(new G.ResetItemAction(i))}resetRecipe(i){this.store.dispatch(new N.ResetRecipeAction(i))}resetRecipeObjective(i){this.store.dispatch(new $.ResetObjectiveAction(i))}resetChecked(){this.store.dispatch(new G.ResetCheckedAction)}resetExcluded(){this.store.dispatch(new G.ResetExcludedAction)}resetBelts(){this.store.dispatch(new G.ResetBeltsAction)}resetWagons(){this.store.dispatch(new G.ResetWagonsAction)}resetMachines(){this.store.dispatch(new N.ResetMachinesAction)}resetBeacons(){this.store.dispatch(new N.ResetBeaconsAction)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=J({type:o,selectors:[["lab-steps"]],viewQuery:function(n,a){n&1&&st(a.stepsTable,Rn,5),n&2&&rt()},inputs:{focus:[1,"focus"],selectedId:[1,"selectedId"]},decls:13,vars:10,consts:[["stepsTable",""],["emptyCol2",""],["leftPad",""],["detailRow",""],["tooltip",""],["overclockInput",""],["modulePicker",""],["beaconsOverlay",""],["expandTabMenu",""],["machineValueCell",""],["totalCell",""],["dataKey","id","styleClass","p-datatable-sm",3,"rowsChange","sortFunction","rowTrackBy","value","customSort","rowExpandMode","defaultSortOrder","paginator","rows","rowsPerPageOptions","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],["pTemplate","footer"],["colspan","100"],[1,"d-flex","gap-2","py-2"],["pButton","","pRipple","","type","button","icon","fa-solid fa-table-columns",1,"p-button-outlined",3,"click","label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-file-arrow-down",1,"p-button-outlined",3,"label"],[1,"column-header-row"],["colspan","2","pSortableColumn","items"],[1,"d-flex","align-items-center"],["field","items"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left",1,"ms-2","p-button-text","p-button-rounded",3,"pTooltip"],["colspan","2","pSortableColumn","belts"],["colspan","2","pSortableColumn","wagons"],["colspan","2","pSortableColumn","machines"],["field","machines"],["colspan","2"],["pSortableColumn","power"],["pSortableColumn","pollution"],["pButton","","pRipple","","type","button","icon","fa-solid fa-file-arrow-down",1,"p-button-outlined",3,"click","label"],[1,"d-flex","align-items-center","justify-content-center"],[1,"fa-solid","fa-square-check"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left",1,"ms-2","p-button-text","p-button-rounded",3,"click","pTooltip"],["field","belts"],["field","wagons"],[1,"d-flex","align-items-center","justify-content-end"],["field","power"],["field","pollution"],[1,"w-0","px-0","px-sm-1","position-relative"],[1,"fragment",3,"id"],[1,"d-flex"],["pButton","","pRipple","","type","button","icon","fa-solid fa-angle-right",1,"p-button-text","p-button-rounded","transition-ease",3,"click","pTooltip","pRowToggler"],[1,"px-0","px-sm-2"],[1,"overflow-hidden","px-0","px-sm-1","py-0"],["colspan","2",1,"px-0","px-sm-2"],[1,"px-0","px-sm-2","text-end"],[1,"w-0","px-0","ps-sm-1"],[1,"d-flex","justify-content-center"],[3,"onChange","binary","ngModel"],[1,"d-flex","align-items-center","links"],[1,"indent"],[1,"icon"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"hover-active","icon","pTooltip"],[3,"class","pTooltip"],[1,"connect",3,"trail","last"],[1,"connect"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"click","icon","pTooltip"],[1,"hover-icon","fa-solid","fa-eye-slash"],[3,"id"],[3,"pTooltip"],["type","recipe",3,"id"],[1,"w-0","px-0","px-sm-2","text-end"],[1,"monospace"],[1,"px-0","pe-sm-2"],[1,"find-text"],["labDropdownBase","icon",3,"pTooltip","ngModel","options"],["labDropdownBase","icon",3,"onChange","pTooltip","ngModel","options"],["pTemplate","selectedItem"],["pTemplate","item"],[1,"d-flex","align-items-center","py-2","w-100","h-100",3,"pTooltip"],[1,"ms-3","text-truncate"],["type","belt",3,"id"],["type","pipe",3,"id"],["type","cargo-wagon",3,"id"],["type","fluid-wagon",3,"id"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"pTooltip"],["labDropdownBase","icon",3,"pTooltip","options","ngModel"],["suffix","%","inputStyleClass","text-end",3,"min","max","step","maxFractionDigits","size","pTooltip","ngModel"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"click","pTooltip"],[1,"p-button-icon"],[1,"hover-icon","fa-solid","fa-circle-plus"],["labDropdownBase","icon",3,"onChange","pTooltip","options","ngModel"],["type","machine",3,"id"],["suffix","%","inputStyleClass","text-end",3,"onBlur","min","max","step","maxFractionDigits","size","pTooltip","ngModel"],[1,"padded",3,"pTooltip"],["type","fuel",3,"id"],["labDropdownBase","icon","labNoDrag","",3,"pTooltip","ngModel","options"],["labDropdownBase","icon","labNoDrag","",3,"onChange","pTooltip","ngModel","options"],["type","module",3,"id"],["pButton","","pRipple","","type","button",1,"hover-action","modules","p-button-text",3,"click","pTooltip"],[1,"p-button-icon",3,"class"],[1,"hover-icon","fa-solid","fa-gear"],[3,"setValue"],["pButton","","pRipple","","type","button",1,"hover-action","icons","p-button-text","flex-column",3,"click","pTooltip"],[1,"p-button-icon","sum",3,"class"],[1,"p-button-icon","sum"],["type","beacon",3,"id"],["target","_blank",1,"text-decoration-none",3,"href"],["pButton","","pRipple","","type","button","icon","fa-solid fa-arrow-up-right-from-square","tooltipPosition","left",1,"p-button-text","p-button-rounded",3,"pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left","tooltipPosition","left",1,"p-button-text","p-button-rounded",3,"pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left","tooltipPosition","left",1,"p-button-text","p-button-rounded",3,"click","pTooltip"],[1,"detail"],[1,"px-1"],["routerLink",".","queryParamsHandling","preserve",1,"text-decoration-none",3,"relativeTo","fragment"],["pButton","","pRipple","","type","button","icon","fa-solid fa-link",1,"p-button-text","p-button-rounded"],[3,"activeItemChange","model","activeItem"],[1,"p-menuitem-link",3,"id"],[1,"p-menuitem-icon"],[1,"p-menuitem-text"],[4,"ngTemplateOutlet"],["colspan","100",1,"fw-bold"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"w-0","text-end"],[1,"ps-0"],[1,"lab-icon","time"],[3,"innerHTML"],[1,"mw-0"],[1,"fa-solid","fa-arrow-right","mx-3"],[1,"fw-bold"],[1,"mb-2"],[3,"onChange","ngModel","binary","label"],[1,"d-flex","flex-wrap"],["pButton","","pRipple","","type","button",1,"p-button-text","hover-action","me-2",3,"hover-active","icon","pTooltip"],["pButton","","pRipple","","type","button",1,"p-button-text","hover-action","me-2",3,"click","icon","pTooltip"],["colspan","100",1,"p-0"],[1,"position-absolute"],[1,"d-flex","invisible"],[1,"lab-icon"],[1,"m-1","p-2","fa-solid","fa-arrow-right"],[3,"id","type"],[1,"text-end","inherit"],[1,"w-0","text-end","inherit"],[1,"py-2","icon-height"],[1,"ps-0","inherit"],[1,"d-flex","flex-column","justify-content-center"],[1,"modules-column"],[1,"d-block",3,"class","pTooltip"],[1,"d-block",3,"pTooltip"],[1,"p-2","icon-height","text-end"]],template:function(n,a){if(n&1){let _=y();s(0,"p-table",11,0),h("rowsChange",function(f){return S(_),v(a.setRows(f))})("sortFunction",function(f){return S(_),v(a.sortSteps$.next(f))}),u(2,mo,30,22,"ng-template",12)(3,ol,2,3,"ng-template",13)(4,Tp,2,3,"ng-template",14)(5,yp,1,1,"ng-template",15)(6,Ip,1,0,"ng-template",null,1,B)(8,Vp,2,1,"ng-template",null,2,B)(10,ts,2,1,"ng-template",null,3,B)(12,bs,3,1,"ng-template",16),r()}n&2&&d("rowTrackBy",a.trackSvc.trackStep)("value",a.steps())("customSort",!0)("rowExpandMode",a.focus()?"single":"multiple")("defaultSortOrder",-1)("paginator",!a.focus()&&!a.preferences().disablePaginator)("rows",a.preferences().rows)("rowsPerPageOptions",X(9,Pn))("showCurrentPageReport",!0)},dependencies:[le,pe,_t,ae,wi,se,te,ze,re,St,ee,vt,Ri,Fi,Pi,Li,ce,ot,at,Te,Fe,ct,oe,Di,_e,Dt,jt,$t,At,Nt,Ut,Wt,zt,Se,Lt,Pe],styles:[".links[_ngcontent-%COMP%]{height:50px}.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%]{position:relative;height:100vh;margin-left:16px}.links[_ngcontent-%COMP%]   .connect.last[_ngcontent-%COMP%], .links[_ngcontent-%COMP%]   .connect.trail[_ngcontent-%COMP%]{border-left:2px dotted var(--text-color-secondary)}.links[_ngcontent-%COMP%]   .connect.last[_ngcontent-%COMP%]:not(.trail){margin-bottom:50vh;height:50vh}.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%] + .connect[_ngcontent-%COMP%]{margin-left:24px}@media (max-width: 1199.98px){.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%]{margin-left:8px}.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%] + .connect[_ngcontent-%COMP%]{margin-left:16px}}.links[_ngcontent-%COMP%]   .indent[_ngcontent-%COMP%]{margin-left:0;border-top:2px dotted var(--text-color-secondary);width:8px}.links[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px}[_nghost-%COMP%]     .p-dropdown:not(:hover):not(:focus):not(.ng-invalid), [_nghost-%COMP%]     .p-inputtext:not(:hover):not(:focus):not(.ng-invalid){border-color:transparent;background-color:transparent}[_nghost-%COMP%]     .module-dropdown:not(.last){margin-right:-.5rem}[_nghost-%COMP%]     .module-dropdown:not(.last) .p-dropdown{border-right-color:transparent;border-top-right-radius:0;border-bottom-right-radius:0}[_nghost-%COMP%]     .module-dropdown:hover~.module-dropdown .lab-icon.sm{opacity:.3}[_nghost-%COMP%]     .module-dropdown:hover~.module-dropdown:not(.last) .p-dropdown{border-top-color:var(--primary-color);border-bottom-color:var(--primary-color)}[_nghost-%COMP%]     .module-dropdown:hover~.module-dropdown.last .p-dropdown{border-color:var(--primary-color);border-left-color:transparent}tr.detail[_ngcontent-%COMP%]{background-color:var(--surface-ground)}[_nghost-%COMP%]     tr.detail .p-tabmenu .p-tabmenu-nav .p-tabmenuitem:not(.p-highlight) .p-menuitem-link{background-color:transparent}.icon-height[_ngcontent-%COMP%]{min-height:32px}.modules-column[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;margin:auto}.fragment[_ngcontent-%COMP%]{position:absolute;top:-10rem;visibility:hidden}.column-header-row[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{height:48px}"],changeDetection:0});let e=o;return e})();function Bs(e,o){if(e&1&&(s(0,"span",27),b(1),r()),e&2){let t=l(2).$implicit,i=l();p(),w(i.data().recipeEntities[t.targetId].name)}}function ks(e,o){if(e&1){let t=y();s(0,"button",25),c(1,"translate"),h("click",function(){S(t);let n=T(8),a=l().$implicit,_=l();return v(n.clickOpen("recipe",_.recipeIds(),a.targetId))}),s(2,"i",26),c(3,"iconSmClass"),s(4,"span"),b(5),r()(),u(6,Bs,2,1,"span",27),r(),s(7,"lab-picker",18,4),c(9,"translate"),h("selectId",function(n){S(t);let a=l().$implicit,_=l();return v(_.setTarget(a.id,n))}),r()}if(e&2){let t=l().$implicit,i=l();d("pTooltip",m(1,6,"objectives.selectARecipe")),p(2),I(E(3,8,t.targetId,"recipe")),p(3),M("#",t.id,""),p(),g(i.contentSvc.isMobile()?-1:6),p(),d("header",m(9,11,"objectives.selectARecipe"))}}function Es(e,o){if(e&1){let t=y();s(0,"button",28),c(1,"iconSmClass"),c(2,"translate"),h("click",function(){S(t);let n=T(4),a=l().$implicit,_=l();return v(n.clickOpen("item",_.itemIds(),a.targetId))}),r(),s(3,"lab-picker",18,5),c(5,"translate"),h("selectId",function(n){S(t);let a=l().$implicit,_=l();return v(_.setTarget(a.id,n))}),r()}if(e&2){let t=l().$implicit,i=l();d("icon",m(1,4,t.targetId))("label",i.contentSvc.isMobile()?"":i.data().itemEntities[t.targetId].name)("pTooltip",m(2,6,"objectives.selectAnItem")),p(3),d("header",m(5,8,"objectives.selectAnItem"))}}function Vs(e,o){if(e&1){let t=y();s(0,"p-dropdown",23),c(1,"translate"),h("onChange",function(n){S(t);let a=l().$implicit,_=l(),C=T(23),f=T(26);return v(_.changeUnit(a,n.value,C,f))}),r()}if(e&2){let t=l().$implicit,i=l();d("pTooltip",m(1,3,"objectives.unitTooltip"))("options",i.rateUnitOptions())("ngModel",t.unit)}}function Ms(e,o){if(e&1){let t=y();s(0,"div",19),x(1,"button",20),u(2,ks,10,13)(3,Es,6,10),s(4,"lab-input-number",21),c(5,"translate"),c(6,"translate"),c(7,"translate"),h("setValue",function(n){let a=S(t).$implicit,_=l();return v(_.setValue(a.id,n))}),r(),u(8,Vs,2,5,"p-dropdown",22),s(9,"p-dropdown",23),c(10,"translate"),h("onChange",function(n){let a=S(t).$implicit,_=l();return v(_.setType(a.id,n.value))}),r(),s(11,"button",24),c(12,"translate"),h("click",function(){let n=S(t).$implicit,a=l();return v(a.removeObjective(n.id))}),r()()}if(e&2){let t=o.$implicit,i=l();p(2),g(t.unit===i.ObjectiveUnit.Machines?2:3),p(2),d("pTooltip",t.type===i.ObjectiveType.Maximize?i.maximizeType()===i.MaximizeType.Weight?m(5,9,"objectives.valueWeightTooltip"):m(6,11,"objectives.valueRatioTooltip"):m(7,13,"objectives.valueTooltip"))("hideButtons",i.contentSvc.isMobile())("value",t.value),p(4),g(t.type!==i.ObjectiveType.Maximize?8:-1),p(),d("pTooltip",m(10,15,"objectives.typeTooltip"))("options",i.objectiveTypeOptions)("ngModel",t.type),p(2),d("pTooltip",m(12,17,"objectives.removeTooltip"))}}function Os(e,o){if(e&1&&x(0,"lab-tooltip",35),e&2){let t=l(2);d("id",t)}}function Rs(e,o){if(e&1){let t=y();s(0,"div")(1,"div",30)(2,"span",31),b(3),c(4,"translate"),r(),x(5,"i",32),c(6,"iconSmClass"),s(7,"span",33),b(8),r(),u(9,Os,1,1,"ng-template",null,6,B),r(),s(11,"button",34),c(12,"translate"),h("click",function(){S(t);let n=l(),a=l();return v(a.addRecipeLimit(n))}),r()()}if(e&2){let t=T(10),i=l(),n=l();p(3),w(m(4,6,"objectives.errorSimplexUnboundedRecipe")),p(2),I(E(6,8,i,"recipe")),d("pTooltip",t),p(3),w(n.data().recipeEntities[i].name),p(3),d("label",m(12,11,"objectives.errorSimplexUnboundedAddRecipeLimit"))}}function Ps(e,o){e&1&&(s(0,"p-messages",16),u(1,Rs,13,13,"ng-template",29),r())}function Fs(e,o){if(e&1&&x(0,"p-messages",17),e&2){let t=l();d("value",t.messages())("closable",!1)("escape",!1)}}var Ds=(()=>{let o=class o{constructor(){this.store=R(Y),this.translateSvc=R(Ue),this.contentSvc=R(he),this.trackSvc=R(Ct),this._objectives=this.store.selectSignal($.getObjectives),this.result=this.store.selectSignal($.getMatrixResult),this.itemsState=this.store.selectSignal(G.getItemsState),this.recipesState=this.store.selectSignal(N.getRecipesState),this.itemIds=this.store.selectSignal(N.getAvailableItems),this.data=this.store.selectSignal(N.getAdjustedDataset),this.maximizeType=this.store.selectSignal(V.getMaximizeType),this.beltSpeed=this.store.selectSignal(V.getBeltSpeed),this.dispRateInfo=this.store.selectSignal(V.getDisplayRateInfo),this.rateUnitOptions=this.store.selectSignal(V.getObjectiveUnitOptions),this.recipeIds=this.store.selectSignal(V.getAvailableRecipes),this.paused=this.store.selectSignal(L.getPaused),this.convertObjectiveValues=this.store.selectSignal(L.getConvertObjectiveValues),this.objectives=Z(()=>[...this._objectives()]),this.messages=Z(()=>this.getMessages(this._objectives(),this.result(),this.itemsState(),this.recipesState())),this.objectiveTypeOptions=mi,this.displayRateOptions=dt,this.MaximizeType=ci,this.ObjectiveUnit=ne,this.ObjectiveType=xe}getMessages(i,n,a,_){if(n.resultType===Pt.Paused)return[{severity:"info",detail:this.translateSvc.instant("objectives.pausedMessage")}];if(n.resultType!==Pt.Failed)return[];if(n.simplexStatus==="unbounded"){let C=i.filter(f=>f.type===xe.Maximize);return C.length&&i.every(f=>f.type!==xe.Limit)?this.buildErrorMessages("objectives.errorUnbounded","objectives.errorNoLimits",n):C.some(f=>f.unit===ne.Machines?_[f.targetId].excluded:a[f.targetId].excluded)?this.buildErrorMessages("objectives.errorUnbounded","objectives.errorMaximizeExcluded",n):this.buildErrorMessages("objectives.errorUnbounded","objectives.errorUnboundedDetail",n)}else return n.simplexStatus==="no_feasible"?this.buildErrorMessages("objectives.errorInfeasible","objectives.errorInfeasibleDetail",n):this.buildErrorMessages("objectives.error","objectives.errorDetail",n)}buildErrorMessages(i,n,a){return[{severity:"error",summary:this.translateSvc.instant(i),detail:`${this.translateSvc.instant(n)} ${this.translateSvc.instant("objectives.errorSimplexInfo",{returnCode:a.returnCode??"unknown",simplexStatus:a.simplexStatus??"unknown"})}`}]}setObjectiveOrder(i){this.setOrder(i.map(n=>n.id))}changeUnit(i,n,a,_){let C=this.data();if(n===ne.Machines){if(i.unit!==ne.Machines){let f=C.itemRecipeIds[i.targetId],k=O=>this.convertItemsToMachines(i,O,C);f.length===1?k(f[0]):(_.selectId.pipe(ue()).subscribe(O=>k(O)),_.clickOpen("recipe",f))}}else if(i.unit===ne.Machines){let f=Array.from(C.adjustedRecipe[i.targetId].produces),k=O=>this.convertMachinesToItems(i,O,n,C);f.length===1?k(f[0]):(a.selectId.pipe(ue()).subscribe(O=>k(O)),a.clickOpen("item",f))}else this.convertItemsToItems(i,i.targetId,n,C)}convertItemsToMachines(i,n,a){if(this.setUnit(i.id,{targetId:n,unit:ne.Machines}),!this.convertObjectiveValues()||i.type===xe.Maximize)return;let _=this.itemsState(),C=this.beltSpeed(),f=this.dispRateInfo(),k=Ke.objectiveNormalizedRate(i,_,C,f,a),O=a.adjustedRecipe[n],P=k.div(O.output[i.targetId]);this.setValue(i.id,P)}convertMachinesToItems(i,n,a,_){if(this.setUnit(i.id,{targetId:n,unit:a}),!this.convertObjectiveValues()||i.type===xe.Maximize||i.recipe==null)return;let C=this.itemsState(),f=this.beltSpeed(),k=this.dispRateInfo(),O=Ke.objectiveNormalizedRate({id:"",targetId:n,value:j(1n),unit:a,type:xe.Output},C,f,k,_),W=i.value.mul(i.recipe.output[n]).div(O);this.setValue(i.id,W)}convertItemsToItems(i,n,a,_){if(this.setUnit(i.id,{targetId:n,unit:a}),!this.convertObjectiveValues()||i.type===xe.Maximize)return;let C=this.itemsState(),f=this.beltSpeed(),k=this.dispRateInfo(),O=Ke.objectiveNormalizedRate(i,C,f,k,_),P=Ke.objectiveNormalizedRate({id:"",targetId:n,value:j(1n),unit:a,type:xe.Output},C,f,k,_),W=O.div(P);this.setValue(i.id,W)}addItemObjective(i){this.addObjective({targetId:i,unit:ne.Items})}addRecipeObjective(i){this.addObjective({targetId:i,unit:ne.Machines})}addRecipeLimit(i){this.addObjective({targetId:i,unit:ne.Machines,type:xe.Limit})}removeObjective(i){this.store.dispatch(new $.RemoveAction(i))}setOrder(i){this.store.dispatch(new $.SetOrderAction(i))}setTarget(i,n){this.store.dispatch(new $.SetTargetAction({id:i,value:n}))}setValue(i,n){this.store.dispatch(new $.SetValueAction({id:i,value:n}))}setUnit(i,n){this.store.dispatch(new $.SetUnitAction({id:i,value:n}))}setType(i,n){this.store.dispatch(new $.SetTypeAction({id:i,value:n}))}addObjective(i){this.store.dispatch(new $.AddAction(i))}setDisplayRate(i,n){this.store.dispatch(new V.SetDisplayRateAction({value:i,prev:n}))}setPaused(i){this.store.dispatch(new L.SetPausedAction(i))}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=J({type:o,selectors:[["lab-objectives"]],decls:28,vars:35,consts:[["addItemPicker",""],["addRecipePicker",""],["chooseItemPicker",""],["chooseRecipePicker",""],["editRecipePicker",""],["editItemPicker",""],["tooltip",""],[3,"header"],[1,"objectives-content"],[3,"onReorder","value","dragdrop","trackBy"],["pTemplate","item"],[1,"objectives-buttons","d-flex","flex-wrap","mt-2"],["pButton","","pRipple","","type","button","icon","fa-solid fa-box","tooltipPosition","top",1,"flex-grow-1","p-button-outlined",3,"click","label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-industry","tooltipPosition","top",1,"flex-grow-1","p-button-outlined",3,"click","label"],["labDropdownTranslate","","styleClass","h-100",3,"onChange","pTooltip","ngModel","options"],["offIcon","fa-solid fa-pause",3,"onChange","ngModel","onIcon","pTooltip"],["severity","warn","styleClass","mt-2"],["styleClass","mt-2",3,"value","closable","escape"],[3,"selectId","header"],[1,"p-inputgroup"],["pButton","","pRipple","","type","button","icon","fa-solid fa-grip-lines",1,"p-button-outlined","border-end-0","cursor-grab"],["labNoDrag","","tooltipPosition","top",3,"setValue","pTooltip","hideButtons","value"],["labDropdownTranslate","","labNoDrag","","tooltipPosition","top",3,"pTooltip","options","ngModel"],["labDropdownTranslate","","labNoDrag","","tooltipPosition","top",3,"onChange","pTooltip","options","ngModel"],["pButton","","pRipple","","labNoDrag","","type","button","icon","fa-solid fa-xmark","tooltipPosition","left",1,"p-button-outlined",3,"click","pTooltip"],["pButton","","pRipple","","labNoDrag","","type","button","tooltipPosition","top",1,"p-button-outlined","lab-button-icon-only","text-truncate",3,"click","pTooltip"],[1,"p-button-icon"],[1,"p-button-label"],["labNoDrag","","pButton","","pRipple","","type","button","tooltipPosition","top",1,"p-button-outlined","text-truncate",3,"click","icon","label","pTooltip"],["pTemplate",""],[1,"d-flex","align-items-center"],[1,"me-3"],[3,"pTooltip"],[1,"ms-3"],["type","button","pButton","","pRipple","","icon","fa-solid fa-plus",1,"mt-2","p-button-rounded",3,"click","label"],["type","recipe",3,"id"]],template:function(n,a){if(n&1){let _=y();s(0,"p-card",7),c(1,"translate"),s(2,"div",8)(3,"p-orderList",9),h("onReorder",function(){return S(_),v(a.setObjectiveOrder(a.objectives()))}),u(4,Ms,13,19,"ng-template",10),r(),s(5,"div",11)(6,"button",12),c(7,"translate"),h("click",function(){S(_);let f=T(17);return v(f.clickOpen("item",a.itemIds()))}),r(),s(8,"button",13),c(9,"translate"),h("click",function(){S(_);let f=T(20);return v(f.clickOpen("recipe",a.recipeIds()))}),r(),s(10,"p-dropdown",14),c(11,"translate"),h("onChange",function(f){return S(_),v(a.setDisplayRate(f.value,a.dispRateInfo().option))}),r(),s(12,"p-toggleButton",15),c(13,"translate"),h("onChange",function(f){let k;return S(_),v(a.setPaused((k=f.checked)!==null&&k!==void 0?k:!1))}),r()(),u(14,Ps,2,0,"p-messages",16)(15,Fs,1,3,"p-messages",17),r(),s(16,"lab-picker",18,0),c(18,"translate"),h("selectId",function(f){return S(_),v(a.addItemObjective(f))}),r(),s(19,"lab-picker",18,1),c(21,"translate"),h("selectId",function(f){return S(_),v(a.addRecipeObjective(f))}),r(),x(22,"lab-picker",7,2),c(24,"translate"),x(25,"lab-picker",7,3),c(27,"translate"),r()}if(n&2){let _;d("header",m(1,17,"objectives.title")),p(3),d("value",a.objectives())("dragdrop",!0)("trackBy",a.trackSvc.trackById),p(3),d("label",m(7,19,"objectives.addItems")),p(2),d("label",m(9,21,"objectives.addMachines")),p(2),d("pTooltip",m(11,23,"objectives.selectDisplayRate"))("ngModel",a.dispRateInfo().option)("options",a.displayRateOptions),p(2),d("ngModel",a.paused())("onIcon","fa-solid fa-play")("pTooltip",m(13,25,"objectives.pauseTooltip")),p(2),g((_=a.result().unboundedRecipeId)?14:a.messages().length?15:-1,_),p(2),d("header",m(18,27,"objectives.selectAnItem")),p(3),d("header",m(21,29,"objectives.selectARecipe")),p(3),d("header",m(24,31,"objectives.selectAnItem")),p(3),d("header",m(27,33,"objectives.selectARecipe"))}},dependencies:[le,pe,ae,se,te,Ai,re,Wi,yt,ee,Hi,Be,Tt,ce,wt,Fe,oe,_e],styles:[".objectives-content[_ngcontent-%COMP%]{max-width:1000px}.objectives-buttons[_ngcontent-%COMP%]{gap:.25rem}.p-inputgroup[_ngcontent-%COMP%]   p-dropdown.icon[_ngcontent-%COMP%]{flex:0 0 36px}@media (min-width: 576px){button.text-truncate[_ngcontent-%COMP%], .p-inputgroup[_ngcontent-%COMP%]   lab-input-number.p-inputwrapper[_ngcontent-%COMP%]{flex:0 0 25%}}@media (max-width: 575.98px){.p-inputgroup[_ngcontent-%COMP%]   lab-input-number.p-inputwrapper[_ngcontent-%COMP%]{flex:0 0 15%}}@media (max-width: 575.98px){[_nghost-%COMP%]     button.lab-button-icon-only{justify-content:center;width:2.571rem;padding:.5rem 0}[_nghost-%COMP%]     button.lab-button-icon-only .p-button-icon{margin:0}[_nghost-%COMP%]     button.lab-button-icon-only .p-button-label{flex:0 0 auto;visibility:hidden;width:0}}"],changeDetection:0});let e=o;return e})();var Ns=["filterInput"],Us=()=>({minHeight:"528px",height:"80vh",width:"50vw"}),Ws=()=>({"768px":"80vw","576px":"100vw"}),zs=()=>({width:"30vw"}),Ls=()=>({"768px":"50vw","576px":"90vw"}),Hs=()=>({height:"calc(80vh - 165px)",minHeight:"363px"}),Gs=e=>({title:"techPicker.available",ids:e,class:"p-button-text"}),qs=e=>({title:"techPicker.locked",ids:e,class:"p-button-danger"}),Qs=e=>({title:"techPicker.researched",ids:e,class:"p-button-success"}),Ks=(e,o)=>({id:e,class:o});function Xs(e,o){if(e&1){let t=y();s(0,"div",15)(1,"span",7),b(2),c(3,"translate"),r(),s(4,"button",19),c(5,"translate"),h("click",function(){S(t);let n=l();return v(n.copyScriptToClipboard())}),r(),x(6,"a",20),c(7,"translate"),r()}e&2&&(p(2),w(m(3,3,"techPicker.exportFromFactorio")),p(2),d("label",m(5,5,"techPicker.exportCopyScript")),p(2),d("label",m(7,7,"techPicker.exportUseMod")))}function Zs(e,o){if(e&1){let t=y();s(0,"button",21),c(1,"translate"),h("click",function(){S(t);let n=l();return v(n.importTechs())}),r(),s(2,"button",22),c(3,"translate"),h("click",function(){S(t);let n=l();return v(n.importVisible=!1)}),r()}e&2&&(d("label",m(1,2,"ok")),p(2),d("label",m(3,4,"cancel")))}function Js(e,o){e&1&&A(0)}function Ys(e,o){e&1&&A(0)}function er(e,o){e&1&&A(0)}function tr(e,o){e&1&&(s(0,"i"),b(1),c(2,"translate"),r()),e&2&&(p(),w(m(2,1,"none")))}function ir(e,o){e&1&&A(0)}function nr(e,o){if(e&1&&u(0,ir,1,0,"ng-container",23),e&2){let t=o.$implicit,i=l().class;l();let n=T(7);d("ngTemplateOutlet",n)("ngTemplateOutletContext",Q(2,Ks,t,i))}}function or(e,o){if(e&1&&(s(0,"h3"),b(1),c(2,"translate"),r(),s(3,"div",24),u(4,tr,3,3,"i"),F(5,nr,1,5,"ng-container",null,Ve),r()),e&2){let t=o.title,i=o.ids;p(),w(m(2,2,t)),p(3),g(i.length===0?4:-1),p(),D(i)}}function ar(e,o){if(e&1&&x(0,"lab-tooltip",26),e&2){let t=l().id;d("id",t)}}function lr(e,o){if(e&1){let t=y();s(0,"button",25),c(1,"iconSmClass"),h("click",function(){let n=S(t).id,a=l(2);return v(a.clickId(n))}),u(2,ar,1,1,"ng-template",null,4,B),r()}if(e&2){let t,i=o.id,n=o.class,a=T(3),_=l(2);I(n),ie("hover-active",_.selection().indexOf(i)===-1),d("label",_.showTechLabels()&&((t=_.data().itemEntities[i])==null?null:t.name)||"")("icon",m(1,7,i))("pTooltip",a)}}function pr(e,o){if(e&1&&(s(0,"p-scrollPanel"),u(1,Js,1,0,"ng-container",23)(2,Ys,1,0,"ng-container",23)(3,er,1,0,"ng-container",23)(4,or,7,4,"ng-template",null,2,B)(6,lr,4,9,"ng-template",null,3,B),r()),e&2){let t=T(5),i=l();Ee(X(8,Hs)),p(),d("ngTemplateOutlet",t)("ngTemplateOutletContext",ye(9,Gs,i.status().available)),p(),d("ngTemplateOutlet",t)("ngTemplateOutletContext",ye(11,qs,i.status().locked)),p(),d("ngTemplateOutlet",t)("ngTemplateOutletContext",ye(13,Qs,i.status().researched))}}function sr(e,o){if(e&1){let t=y();s(0,"button",21),c(1,"translate"),h("click",function(){S(t);let n=l();return v(n.hide())}),r(),s(2,"button",22),c(3,"translate"),h("click",function(){S(t);let n=l();return v(n.hide(!0))}),r()}e&2&&(d("label",m(1,2,"ok")),p(2),d("label",m(3,4,"cancel")))}var qt=(()=>{let o=class o extends Mi{constructor(){super(...arguments),this.filterSvc=R(Ii),this.translateSvc=R(Ue),this.store=R(Y),this.contentSvc=R(he),this.filterInput=pt.required("filterInput"),this.selectIds=new je,this.data=this.store.selectSignal(N.getAdjustedDataset),this.showTechLabels=this.store.selectSignal(L.getShowTechLabels),this.filter=Ce(""),this.selection=Ce([]),this.allSelected=Z(()=>this.selection().length===this.data().technologyIds.length),this.status=Z(()=>{let i=this.data(),n=this.filter(),a=this.selection(),_=new Set(a),C=[],f=[],k=i.technologyIds;if(n){let P=k.map(W=>i.itemEntities[W]);k=this.filterSvc.filter(P,["name"],n,"contains").map(W=>W.id),a=a.filter(W=>k.includes(W))}let O=a;for(let P of k)if(!_.has(P)){let W=i.technologyEntities[P];W.prerequisites==null||W.prerequisites.every(qe=>_.has(qe))?C.push(P):f.push(P)}return{available:C,locked:f,researched:O}}),this.importVisible=!1,this.importValue="",this.Game=fe}clickOpen(i){i=[...i??this.data().technologyIds],this.selection.set(i),this.show(),this.contentSvc.isMobile()||setTimeout(()=>{this.filterInput().nativeElement.focus()})}selectAll(i){this.selection.set(i?[...this.data().technologyIds]:[])}openImport(i){this.importVisible=!0,this.importValue="",setTimeout(()=>i.focus())}copyScriptToClipboard(){window.navigator.clipboard.writeText(`/c local list = {}
for _, tech in pairs(game.player.force.technologies) do
    if tech.researched then
        list[#list + 1] = tech.name
    end
end
game.write_file("techs.txt", table.concat(list, ","))
`),this.contentSvc.showToast$.next({severity:"success",detail:this.translateSvc.instant("techPicker.exportScriptCopied"),contentStyleClass:"detail-only"})}importTechs(){let i=this.importValue.split(",").map(a=>a.trim()).map(a=>{if(!a)return"";let _=`${a}-technology`;return this.data().technologyIds.includes(_)?_:this.data().technologyIds.includes(a)?a:""}).filter(a=>!!a),n=new Set(i);this.addPrerequisites(n),this.selection.set(Array.from(n)),this.importValue="",this.importVisible=!1}clickId(i){let n=new Set(this.selection());if(n.has(i)){n.delete(i);let a;do{a=new Set;for(let _ of n)this.data().technologyEntities[_].prerequisites?.some(f=>!n.has(f))&&a.add(_);a.forEach(_=>n.delete(_))}while(a.size)}else n.add(i),this.addPrerequisites(n);this.selection.set(Array.from(n))}addPrerequisites(i){let n;do{n=new Set;for(let a of i)this.data().technologyEntities[a].prerequisites?.filter(C=>!i.has(C)).forEach(C=>n.add(C));n.forEach(a=>i.add(a))}while(n.size)}save(){let i=this.selection(),n=this.data();i.length===n.technologyIds.length&&this.selectIds.emit(null);let a=i.filter(_=>!i.some(C=>{let f=n.technologyEntities[C];return f.prerequisites&&f.prerequisites.indexOf(_)!==-1}));this.selectIds.emit(a)}setShowTechLabels(i){this.store.dispatch(new L.SetShowTechLabelsAction(i))}};o.\u0275fac=(()=>{let i;return function(a){return(i||(i=De(o)))(a||o)}})(),o.\u0275cmp=J({type:o,selectors:[["lab-tech-picker"]],viewQuery:function(n,a){n&1&&st(a.filterInput,Ns,5),n&2&&rt()},outputs:{selectIds:"selectIds"},features:[$e],decls:28,vars:50,consts:[["filterInput",""],["importInput",""],["techSet",""],["techButton",""],["tooltip",""],["styleClass","picker-dialog","appendTo","body",3,"visibleChange","onHide","visible","modal","dismissableMask","draggable","resizable","focusOnShow","header","breakpoints"],[1,"d-flex","w-100","my-1","p-inputgroup"],[1,"p-inputgroup-addon"],[1,"fa-solid","fa-magnifying-glass"],["pInputText","","type","text",1,"w-100",3,"input","ngModel"],[1,"p-inputgroup-addon","flex-shrink-0"],["labelStyleClass","text-nowrap",3,"onChange","binary","label","ngModel"],["pButton","","pRipple","","type","button","icon","fa-solid fa-file-import",1,"flex-shrink-0",3,"click","label","pTooltip"],["appendTo","body",3,"visibleChange","visible","modal","dismissableMask","draggable","resizable","breakpoints","header"],[1,"d-flex","flex-column"],[1,"p-inputgroup","mb-3"],["rows","10","pInputTextarea","",1,"mt-2","w-100",3,"ngModelChange","keydown.enter","ngModel"],["pTemplate","footer"],[3,"style"],["pButton","","pRipple","","type","button","icon","fa-solid fa-copy",1,"p-button-outlined",3,"click","label"],["href","https://mods.factorio.com/mod/export-researched-technologies","target","_blank","pButton","","pRipple","","icon","fa-solid fa-link",1,"text-decoration-none","p-inputgroup-addon","p-button-outlined",3,"label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-check",1,"p-button-outlined",3,"click","label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined","p-button-secondary",3,"click","label"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"d-flex","flex-wrap","invert"],["pButton","","pRipple","","type","button","tooltipPosition","bottom",1,"me-1","mb-1",3,"click","label","icon","pTooltip"],["type","technology",3,"id"]],template:function(n,a){if(n&1){let _=y();s(0,"p-dialog",5),c(1,"translate"),Re("visibleChange",function(f){return S(_),Oe(a.visible,f)||(a.visible=f),v(f)}),h("onHide",function(){return S(_),v(a.onHide())}),s(2,"div",6)(3,"span",7),x(4,"i",8),r(),s(5,"input",9,0),h("input",function(){S(_);let f=T(6);return v(a.filter.set(f.value))}),r(),s(7,"span",10)(8,"p-checkbox",11),c(9,"translate"),h("onChange",function(f){return S(_),v(a.selectAll(f.checked))}),r()(),s(10,"span",10)(11,"p-checkbox",11),c(12,"translate"),h("onChange",function(f){return S(_),v(a.setShowTechLabels(f.checked))}),r()(),s(13,"button",12),c(14,"translate"),c(15,"translate"),h("click",function(){S(_);let f=T(24);return v(a.openImport(f))}),r(),s(16,"p-dialog",13),c(17,"translate"),Re("visibleChange",function(f){return S(_),Oe(a.importVisible,f)||(a.importVisible=f),v(f)}),s(18,"div",14),u(19,Xs,8,9,"div",15),s(20,"div"),b(21),c(22,"translate"),r(),s(23,"textarea",16,1),Re("ngModelChange",function(f){return S(_),Oe(a.importValue,f)||(a.importValue=f),v(f)}),h("keydown.enter",function(){return S(_),v(a.importTechs())}),r()(),u(25,Zs,4,6,"ng-template",17),r()(),u(26,pr,8,15,"p-scrollPanel",18)(27,sr,4,6,"ng-template",17),r()}n&2&&(Ee(X(46,Us)),Me("visible",a.visible),d("modal",!0)("dismissableMask",!0)("draggable",!1)("resizable",!1)("focusOnShow",!1)("header",m(1,32,"techPicker.header"))("breakpoints",X(47,Ws)),p(5),d("ngModel",a.filter()),p(3),d("binary",!0)("label",m(9,34,"techPicker.unlockAll"))("ngModel",a.allSelected()),p(3),d("binary",!0)("label",m(12,36,"techPicker.showLabels"))("ngModel",a.showTechLabels()),p(2),d("label",m(14,38,"techPicker.import"))("pTooltip",m(15,40,"techPicker.importTooltip")),p(3),Ee(X(48,zs)),Me("visible",a.importVisible),d("modal",!0)("dismissableMask",!0)("draggable",!0)("resizable",!1)("breakpoints",X(49,Ls))("header",m(17,42,"techPicker.importHeader")),p(3),g(a.data().game===a.Game.Factorio?19:-1),p(2),w(m(22,44,"techPicker.importInstructions")),p(2),Me("ngModel",a.importValue),p(3),g(a.visible?26:-1))},dependencies:[ut,le,pe,_t,ae,se,te,ze,xt,Ni,ht,ee,bt,ce,oe,_e],changeDetection:0});let e=o;return e})();var _r=(e,o)=>o.key,Vt=(e,o)=>o.id,cr=()=>({height:"100%"}),Qt=e=>({count:e}),dr=()=>({width:"400px",maxHeight:"500px"}),mr=()=>({"400px":"100vw"}),ur=()=>[];function Cr(e,o){if(e&1&&(s(0,"div"),b(1),r()),e&2){let t=l(2);p(),w(t.state)}}function gr(e,o){if(e&1&&(s(0,"div",62)(1,"div"),b(2),c(3,"translate"),r(),u(4,Cr,2,1,"div"),r()),e&2){let t=l();p(2),w(m(3,2,"settings.savedStates")),p(2),g(t.state?4:-1)}}function fr(e,o){if(e&1){let t=y();s(0,"div",23)(1,"button",63),h("click",function(){S(t);let n=T(3),a=l();return v(a.setSearch(n.value))}),r(),x(2,"input",64,4),s(4,"button",65),h("click",function(){S(t);let n=T(3),a=l();return v(a.copySearchToClipboard(n.value))}),r()()}if(e&2){let t=l();p(2),d("ngModel",t.BrowserUtility.search)}}function xr(e,o){if(e&1){let t=y();s(0,"div",23)(1,"input",66,5),c(3,"translate"),c(4,"translate"),Re("ngModelChange",function(n){S(t);let a=l();return Oe(a.editValue,n)||(a.editValue=n),v(n)}),h("keydown.enter",function(){S(t);let n=l();return v(n.clickSaveState(n.data().game))}),r(),s(5,"button",67),c(6,"translate"),h("click",function(){S(t);let n=l();return v(n.clickSaveState(n.data().game))}),r(),s(7,"button",68),c(8,"translate"),h("click",function(){S(t);let n=l();return v(n.editState=null)}),r()()}if(e&2){let t=T(2),i=l();p(),d("autofocus",!0)("placeholder",m(3,7,"settings.nameSavedState"))("pTooltip",m(4,9,"settings.nameSavedState")),Me("ngModel",i.editValue),p(4),d("pTooltip",m(6,11,"settings.saveState"))("disabled",t.invalid),p(2),d("pTooltip",m(8,13,"cancel"))}}function hr(e,o){if(e&1){let t=y();s(0,"button",72),h("click",function(n){S(t);let a=T(2);return v(a.toggle(n))}),x(1,"p-menu",73,6),r()}if(e&2){let t=l(2);p(),d("popup",!0)("model",t.editStateMenu)}}function Sr(e,o){if(e&1){let t=y();s(0,"button",74),c(1,"translate"),h("click",function(){S(t);let n=l(2);return v(n.openCreateState())}),r()}e&2&&d("pTooltip",m(1,1,"settings.createSavedState"))}function vr(e,o){if(e&1){let t=y();s(0,"div",24)(1,"p-dropdown",69),c(2,"translate"),c(3,"translate"),h("onChange",function(n){S(t);let a=l();return v(a.setState(n.value,a.gameStates()))}),r(),u(4,hr,3,2,"button",70)(5,Sr,2,3,"button",71),r()}if(e&2){let t=l();p(),d("placeholder",m(2,5,"settings.selectSavedState"))("pTooltip",m(3,7,"settings.selectSavedState"))("ngModel",t.state)("options",t.savedStates()),p(3),g(t.state?4:5)}}function br(e,o){if(e&1){let t=y();s(0,"button",75),c(1,"translate"),h("click",function(){S(t);let n=l();return v(n.openCreateState())}),r()}e&2&&d("label",m(1,1,"settings.createSavedState"))}function Tr(e,o){if(e&1&&(s(0,"div",62)(1,"div"),b(2),c(3,"translate"),r(),s(4,"div"),b(5),r()()),e&2){let t,i=l();p(2),w(m(3,2,"settings.game")),p(3),w((t=i.modRecord()[i.settings().modId])==null?null:t.id)}}function wr(e,o){if(e&1&&(s(0,"small",52),b(1),r()),e&2){let t=o.$implicit;p(),M(" ",t.value," ")}}function yr(e,o){if(e&1&&(F(0,wr,2,1,"small",52,_r),c(2,"keyvalue")),e&2){let t=l();D(m(2,0,t.data().version))}}function Ir(e,o){e&1&&(s(0,"tr")(1,"th"),b(2),c(3,"translate"),r(),s(4,"th"),b(5),c(6,"translate"),r()()),e&2&&(p(2),w(m(3,2,"settings.mod")),p(3),w(m(6,4,"settings.version")))}function Br(e,o){if(e&1&&(s(0,"tr")(1,"td"),b(2),r(),s(3,"td"),b(4),r()()),e&2){let t=o.$implicit;p(2),w(t.key),p(2),w(t.value)}}function kr(e,o){if(e&1){let t=y();s(0,"button",85),c(1,"translate"),h("click",function(){S(t);let n=l(2);return v(n.versionsVisible=!1)}),r()}e&2&&d("label",m(1,1,"ok"))}function Er(e,o){if(e&1){let t=y();s(0,"div",31)(1,"label",76),b(2),c(3,"translate"),r(),s(4,"small",77)(5,"a",78),b(6),c(7,"translate"),r()(),s(8,"span",24)(9,"p-dropdown",79),c(10,"translate"),h("onChange",function(n){S(t);let a=l();return v(a.setMod(n.value))}),r(),s(11,"button",80),c(12,"translate"),h("click",function(){S(t);let n=l();return v(n.versionsVisible=!0)}),s(13,"p-dialog",81),c(14,"translate"),Re("visibleChange",function(n){S(t);let a=l();return Oe(a.versionsVisible,n)||(a.versionsVisible=n),v(n)}),s(15,"p-table",82),c(16,"keyvalue"),u(17,Ir,7,6,"ng-template",22)(18,Br,5,2,"ng-template",83),r(),u(19,kr,2,3,"ng-template",84),r()()()()}if(e&2){let t=l();p(2),w(m(3,18,"settings.modSet")),p(4),w(m(7,20,"settings.requestMod")),p(3),d("filter",!0)("autofocusFilter",!t.contentSvc.isMobile())("pTooltip",m(10,22,"settings.modSetTooltip"))("ngModel",t.settings().modId)("options",t.modOptions()),p(2),d("pTooltip",m(12,24,"settings.modVersions")),p(2),Ee(X(30,dr)),Me("visible",t.versionsVisible),d("modal",!0)("dismissableMask",!0)("draggable",!1)("resizable",!1)("breakpoints",X(31,mr))("header",m(14,26,"settings.modVersions")),p(2),d("value",m(16,28,t.data().version))}}function Vr(e,o){e&1&&(s(0,"div"),b(1),c(2,"translate"),r()),e&2&&(p(),w(m(2,1,o)))}function Mr(e,o){if(e&1&&(s(0,"div",62)(1,"div"),b(2),c(3,"translate"),r(),u(4,Vr,3,3,"div"),r()),e&2){let t;l();let i=T(58);p(2),w(m(3,2,"settings.factory")),p(2),g((t=i.label())?4:-1,t)}}function Or(e,o){if(e&1&&(x(0,"i",91),c(1,"iconSmClass")),e&2){let t=o.$implicit;I(m(1,2,t))}}function Rr(e,o){if(e&1&&(s(0,"div",89),F(1,Or,2,4,"i",90,Ve),r()),e&2){let t=o.$implicit;p(),D(t)}}function Pr(e,o){if(e&1&&x(0,"lab-tooltip",94),e&2){let t=l().$implicit;d("id",t.value)}}function Fr(e,o){if(e&1&&(s(0,"div",92),x(1,"i"),c(2,"iconSmClass"),s(3,"div",93),b(4),r(),u(5,Pr,1,1,"ng-template",null,7,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function Dr(e,o){if(e&1){let t=y();s(0,"div",32)(1,"div",28)(2,"p-multiSelect",86),c(3,"translate"),h("onChange",function(n){let a;S(t);let _=l();return v(_.setModuleRank(n.value,(a=_.data().defaults)==null?null:a.moduleRankIds))}),u(4,Rr,3,0,"ng-template",87)(5,Fr,7,6,"ng-template",44),r(),s(6,"label",88),b(7),c(8,"translate"),r()()()}if(e&2){let t=l();p(2),d("pTooltip",m(3,4,"settings.modifierRankTooltip"))("ngModel",t.machinesState().moduleRankIds)("options",t.options().modules),p(5),w(m(8,6,"settings.modifierRank"))}}function jr(e,o){if(e&1&&(x(0,"i",91),c(1,"iconSmClass")),e&2){let t=o.$implicit;I(m(1,2,t))}}function $r(e,o){if(e&1&&(s(0,"div",89),F(1,jr,2,4,"i",90,Ve),r()),e&2){let t=o.$implicit;p(),D(t)}}function Ar(e,o){if(e&1&&x(0,"lab-tooltip",94),e&2){let t=l().$implicit;d("id",t.value)}}function Nr(e,o){if(e&1&&(s(0,"div",92),x(1,"i"),c(2,"iconSmClass"),s(3,"div",93),b(4),r(),u(5,Ar,1,1,"ng-template",null,7,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function Ur(e,o){if(e&1){let t=y();s(0,"div",32)(1,"div",28)(2,"p-multiSelect",95),c(3,"translate"),h("onChange",function(n){let a;S(t);let _=l();return v(_.setFuelRank(n.value,(a=_.data().defaults)==null?null:a.fuelRankIds))}),u(4,$r,3,0,"ng-template",87)(5,Nr,7,6,"ng-template",44),r(),s(6,"label",96),b(7),c(8,"translate"),r()()()}if(e&2){let t=l();p(2),d("pTooltip",m(3,4,"settings.fuelRankTooltip"))("ngModel",t.machinesState().fuelRankIds)("options",t.options().fuels),p(5),w(m(8,6,"settings.fuelRank"))}}function Wr(e,o){e&1&&(s(0,"div",104),x(1,"i",105),r())}function zr(e,o){if(e&1&&x(0,"lab-tooltip",107),e&2){let t=l().$implicit;d("id",t.value)}}function Lr(e,o){if(e&1&&(s(0,"div",106),x(1,"i"),c(2,"iconSmClass"),s(3,"div",93),b(4),r(),u(5,zr,1,1,"ng-template",null,7,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function Hr(e,o){if(e&1){let t=y();s(0,"p-inputNumber",108,8),c(2,"translate"),h("onBlur",function(){let n;S(t);let a=T(1),_=l(2);return v(_.setDefaultOverclock(_.rational((n=a.value)!==null&&n!==void 0?n:100)))}),r()}if(e&2){let t,i=l(2);d("min",1)("max",250)("step",10)("maxFractionDigits",2)("showButtons",!0)("pTooltip",m(2,7,"settings.overclockTooltip"))("ngModel",(t=i.machinesState().overclock)==null?null:t.toNumber())}}function Gr(e,o){if(e&1&&(s(0,"i",112),c(1,"iconSmClass"),s(2,"span"),b(3),r()()),e&2){let t=o.$implicit;I(m(1,3,t.id)),p(3),w(t.count)}}function qr(e,o){if(e&1&&(s(0,"div",89)(1,"i",112),c(2,"iconSmClass"),s(3,"span"),b(4),r()(),F(5,Gr,4,5,"i",113,Vt),r()),e&2){let t=o.$implicit;p(),I(m(2,3,t.id)),p(3),w(t.count),p(),D(t.modules)}}function Qr(e,o){e&1&&x(0,"lab-tooltip",114),e&2&&d("id",o)}function Kr(e,o){if(e&1&&u(0,Qr,1,1,"lab-tooltip",114),e&2){let t,i=l();g((t=i==null||i[0]==null?null:i[0].id)?0:-1,t)}}function Xr(e,o){if(e&1){let t=y();s(0,"button",109),h("click",function(n){let a=S(t),_=T(5);return v(_.show(n,a))}),F(1,qr,7,5,"div",89,be),x(3,"i",110),r(),s(4,"lab-beacons-overlay",111,9),h("setValue",function(n){S(t);let a=l(2);return v(a.changeDefaultBeacons(n))}),r(),u(6,Kr,1,1,"ng-template",null,7,B)}if(e&2){let t=T(7);d("pTooltip",t),p(),D(o)}}function Zr(e,o){if(e&1&&(s(0,"div",89),x(1,"i"),c(2,"iconSmClass"),r()),e&2){let t=l().$implicit;p(),I(m(2,2,t.value))}}function Jr(e,o){if(e&1&&(s(0,"div"),b(1),r()),e&2){let t=l(4).$implicit;p(),w(t)}}function Yr(e,o){if(e&1&&u(0,Zr,3,4,"div",89)(1,Jr,2,1,"div"),e&2){let t=o.$implicit;g(t?0:1)}}function e_(e,o){if(e&1&&x(0,"lab-tooltip",107),e&2){let t=l().$implicit;d("id",t.value)}}function t_(e,o){if(e&1&&(s(0,"div",106),x(1,"i"),c(2,"iconSmClass"),s(3,"div",93),b(4),r(),u(5,e_,1,1,"ng-template",null,7,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function i_(e,o){if(e&1&&(s(0,"div",89),x(1,"i"),c(2,"iconSmClass"),r()),e&2){let t=o.$implicit;p(),I(m(2,2,t.value))}}function n_(e,o){if(e&1&&x(0,"lab-tooltip",94),e&2){let t=l().$implicit;d("id",t.value)}}function o_(e,o){if(e&1&&(s(0,"div",106),x(1,"i"),c(2,"iconSmClass"),s(3,"div",93),b(4),r(),u(5,n_,1,1,"ng-template",null,7,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function a_(e,o){if(e&1){let t=y();s(0,"p-dropdown",117),c(1,"translate"),h("onChange",function(n){S(t);let a=l(2),_=l().$implicit,C=l(2);return v(C.changeFuel(_,n.value,a,C.machinesState().fuelRankIds))}),u(2,i_,3,4,"ng-template",43)(3,o_,7,6,"ng-template",44),r()}if(e&2){let t=l(2);d("pTooltip",m(1,3,"settings.fuelTooltip"))("ngModel",t.fuelId)("options",t.fuelOptions)}}function l_(e,o){if(e&1&&(s(0,"div",89),x(1,"i"),c(2,"iconSmClass"),r()),e&2){let t=o.$implicit;p(),I(m(2,2,t.value))}}function p_(e,o){if(e&1&&x(0,"lab-tooltip",120),e&2){let t=l().$implicit;d("id",t.value)}}function s_(e,o){if(e&1&&(s(0,"div",106),x(1,"i"),c(2,"iconSmClass"),s(3,"div",93),b(4),r(),u(5,p_,1,1,"ng-template",null,7,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",t.value!=="module"?i:void 0),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function r_(e,o){if(e&1){let t=y();s(0,"p-dropdown",117),c(1,"translate"),h("onChange",function(n){S(t);let a=l(4).$implicit,_=l(2);return v(_.changeModules(a,[{id:n.value,count:_.rational(1)}]))}),u(2,l_,3,4,"ng-template",43)(3,s_,7,6,"ng-template",44),r()}if(e&2){let t,i=l(3);d("pTooltip",m(1,3,"settings.modifierTooltip"))("ngModel",i.modules[0].id)("options",(t=i.moduleOptions)!==null&&t!==void 0?t:X(5,ur))}}function __(e,o){if(e&1&&(s(0,"i",112),c(1,"iconSmClass"),s(2,"span"),b(3),r()()),e&2){let t=o.$implicit;I(m(1,3,t.id)),p(3),w(t.count)}}function c_(e,o){if(e&1&&x(0,"lab-tooltip",120),e&2){let t=l().$implicit;d("id",t.id)}}function d_(e,o){if(e&1&&u(0,c_,1,1,"lab-tooltip",120),e&2){let t=o.$implicit;g(t.id?0:-1)}}function m_(e,o){if(e&1&&F(0,d_,1,1,null,null,Vt),e&2){let t=l(4);D(t.modules)}}function u_(e,o){if(e&1){let t=y();s(0,"button",121),h("click",function(n){S(t);let a=T(5),_=l(2),C=l();return v(a.show(n,C.modules,_))}),F(1,__,4,5,"i",113,Vt),x(3,"i",110),r(),s(4,"lab-modules-overlay",111,10),h("setValue",function(n){S(t);let a=l(4).$implicit,_=l(2);return v(_.changeModules(a,n))}),r(),u(6,m_,2,0,"ng-template",null,7,B)}if(e&2){let t=T(7),i=l(3);d("pTooltip",t),p(),D(i.modules)}}function C_(e,o){if(e&1&&u(0,r_,4,6,"p-dropdown",118)(1,u_,8,1),e&2){let t=l();g(t.modules!==!0&&(t.modules!=null&&t.modules.isOne())?0:1)}}function g_(e,o){if(e&1){let t=y();s(0,"p-inputNumber",108,8),c(2,"translate"),h("onBlur",function(){let n;S(t);let a=T(1),_=l(3).$implicit,C=l(2);return v(C.setOverclock(_,C.rational((n=a.value)!==null&&n!==void 0?n:100),_?C.machinesState().entities[""].overclock:C.rational(100)))}),r()}if(e&2){let t=l(2);d("min",1)("max",250)("step",10)("maxFractionDigits",2)("showButtons",!0)("pTooltip",m(2,7,"settings.overclockTooltip"))("ngModel",t.overclock==null?null:t.overclock.toNumber())}}function f_(e,o){if(e&1&&(s(0,"i",112),c(1,"iconSmClass"),s(2,"span"),b(3),r()()),e&2){let t=o.$implicit;I(m(1,3,t.id)),p(3),w(t.count)}}function x_(e,o){if(e&1&&(s(0,"div",89)(1,"i",112),c(2,"iconSmClass"),s(3,"span"),b(4),r()(),F(5,f_,4,5,"i",113,Vt),r()),e&2){let t=o.$implicit;p(),I(m(2,3,t.id)),p(3),w(t.count),p(),D(t.modules)}}function h_(e,o){e&1&&x(0,"lab-tooltip",114),e&2&&d("id",o)}function S_(e,o){if(e&1&&u(0,h_,1,1,"lab-tooltip",114),e&2){let t,i=l(3);g((t=i.beacons==null||i.beacons[0]==null?null:i.beacons[0].id)?0:-1,t)}}function v_(e,o){if(e&1){let t=y();s(0,"button",109),h("click",function(n){S(t);let a=T(5),_=l(2);return v(a.show(n,_.beacons))}),F(1,x_,7,5,"div",89,be),x(3,"i",110),r(),s(4,"lab-beacons-overlay",111,9),h("setValue",function(n){S(t);let a=l(3).$implicit,_=l(2);return v(_.changeBeacons(a,n))}),r(),u(6,S_,1,1,"ng-template",null,7,B)}if(e&2){let t=T(7),i=l(2);d("pTooltip",t),p(),D(i.beacons)}}function b_(e,o){if(e&1){let t=y();s(0,"div",115),x(1,"button",116),s(2,"p-dropdown",117),c(3,"translate"),c(4,"filterOptions"),h("onChange",function(n){let a;S(t);let _=l(2).$implicit,C=l(2);return v(C.setMachine(_,n.value,(a=C.data().defaults)==null?null:a.machineRankIds))}),u(5,Yr,2,1,"ng-template",43)(6,t_,7,6,"ng-template",44),r(),u(7,a_,4,5,"p-dropdown",118)(8,C_,2,1)(9,g_,3,9,"p-inputNumber",101)(10,v_,8,1),s(11,"button",119),c(12,"translate"),h("click",function(){let n;S(t);let a=l(2).$implicit,_=l(2);return v(_.removeMachine(a,(n=_.data().defaults)==null?null:n.machineRankIds))}),r()()}if(e&2){let t=l(),i=l().$implicit,n=l(2);p(2),d("pTooltip",m(3,10,"settings.machineTooltip"))("ngModel",i)("options",ge(4,12,n.options().machines,n.machineIds(),i)),p(5),g(t.fuelId?7:-1),p(),g(t.modules&&o.modules?8:-1),p(),g(n.data().game===n.Game.Satisfactory?9:-1),p(),g(t.beacons&&t.beacons.length?10:-1),p(),ie("invisible",i===""),d("pTooltip",m(12,16,"settings.removeMachinePreference"))}}function T_(e,o){if(e&1&&u(0,b_,13,18,"div",115),e&2){let t,i=l().$implicit,n=l(2);g((t=n.data().machineEntities[i])?0:-1,t)}}function w_(e,o){if(e&1&&u(0,T_,1,1),e&2){let t,i=o.$implicit,n=l(2);g((t=n.machinesState().entities[i])?0:-1,t)}}function y_(e,o){if(e&1){let t=y();s(0,"div",97)(1,"span",98),c(2,"translate"),x(3,"i",99),r(),s(4,"p-dropdown",100),c(5,"translate"),c(6,"filterOptions"),h("onChange",function(n){let a;S(t);let _=l();return v(_.addMachine(n.value,(a=_.data().defaults)==null?null:a.machineRankIds))}),u(7,Wr,2,0,"ng-template",43)(8,Lr,7,6,"ng-template",44),r(),u(9,Hr,3,9,"p-inputNumber",101)(10,Xr,8,1),r(),s(11,"p-orderList",102),h("onReorder",function(){let n;S(t);let a=l();return v(a.setMachineRank(a.machineIds(),(n=a.data().defaults)==null?null:n.machineRankIds))}),u(12,w_,1,1,"ng-template",44),r(),x(13,"div",103)}if(e&2){let t,i,n=l();p(),d("pTooltip",m(2,10,"settings.machineDefaults")),p(3),ie("invisible",!n.options().machines.length),d("ngModel",(t=n.options().machines[0])==null?null:t.value)("pTooltip",m(5,12,"settings.addMachineTooltip"))("options",E(6,14,n.options().machines,n.machineIds())),p(5),g(n.data().game===n.Game.Satisfactory?9:-1),p(),g((i=n.data().game===n.Game.Factorio&&n.machinesState().beacons)?10:-1,i),p(),d("value",n.machineIds())("dragdrop",!0)}}function I_(e,o){if(e&1){let t=y();s(0,"div",35)(1,"p-checkbox",122),c(2,"translate"),c(3,"translate"),h("onChange",function(n){S(t);let a=l();return v(a.toggleBeaconReceivers(n.checked))}),r()()}if(e&2){let t=l();p(),d("ngModel",t.settings().beaconReceivers!=null)("binary",!0)("label",m(2,4,"settings.estimateBeaconPowerUsage"))("pTooltip",m(3,6,"settings.estimateBeaconPowerUsageTooltip"))}}function B_(e,o){if(e&1){let t=y();s(0,"div",35)(1,"label",123),b(2),c(3,"translate"),r(),s(4,"lab-input-number",124),c(5,"translate"),h("setValue",function(n){S(t);let a=l();return v(a.setBeaconReceivers(n))}),r()()}e&2&&(p(2),w(m(3,3,"settings.averageBeaconReceivers")),p(2),d("pTooltip",m(5,5,"settings.averageBeaconReceiversTooltip"))("value",o))}function k_(e,o){if(e&1&&(s(0,"div",127),x(1,"i"),c(2,"iconSmClass"),s(3,"div",93),b(4),r()()),e&2){let t=o.$implicit;p(),I(m(2,3,t.value)),p(3),M(" ",t.label," ")}}function E_(e,o){if(e&1&&x(0,"lab-tooltip",120),e&2){let t=l().$implicit;d("id",t.value)}}function V_(e,o){if(e&1&&(s(0,"div",106),x(1,"i"),c(2,"iconSmClass"),s(3,"div",93),b(4),r(),u(5,E_,1,1,"ng-template",null,7,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",t.value!=="module"?i:void 0),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function M_(e,o){if(e&1){let t=y();s(0,"div",32)(1,"div",28)(2,"p-dropdown",125),c(3,"translate"),h("onChange",function(n){S(t);let a=l();return v(a.setProliferatorSpray(n.value))}),u(4,k_,5,5,"ng-template",43)(5,V_,7,6,"ng-template",44),r(),s(6,"label",126),b(7),c(8,"translate"),r()()()}if(e&2){let t=l();p(2),d("autoDisplayFirst",!1)("pTooltip",m(3,5,"settings.proliferatorSelfSprayTooltip"))("ngModel",t.settings().proliferatorSprayId)("options",t.options().proliferatorModules),p(5),w(m(8,7,"settings.proliferatorSelfSpray"))}}function O_(e,o){if(e&1&&(s(0,"div",127),x(1,"i"),c(2,"iconSmClass"),s(3,"div",93),b(4),r()()),e&2){let t=l().$implicit;p(),I(m(2,3,t.value)),p(3),M(" ",t.label," ")}}function R_(e,o){if(e&1&&u(0,O_,5,5,"div",127),e&2){let t=o.$implicit;g(t?0:-1)}}function P_(e,o){if(e&1&&x(0,"lab-tooltip",128),e&2){let t=l().$implicit;d("id",t.value)}}function F_(e,o){if(e&1&&(s(0,"div",106),x(1,"i"),c(2,"iconSmClass"),s(3,"div",93),b(4),r(),u(5,P_,1,1,"ng-template",null,7,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function D_(e,o){if(e&1&&(s(0,"div",127),x(1,"i"),c(2,"iconSmClass"),s(3,"div",93),b(4),r()()),e&2){let t=o.$implicit;p(),I(m(2,3,t.value)),p(3),M(" ",t.label," ")}}function j_(e,o){if(e&1&&x(0,"lab-tooltip",131),e&2){let t=l().$implicit;d("id",t.value)}}function $_(e,o){if(e&1&&(s(0,"div",106),x(1,"i"),c(2,"iconSmClass"),s(3,"div",93),b(4),r(),u(5,j_,1,1,"ng-template",null,7,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function A_(e,o){if(e&1){let t=y();s(0,"div",32)(1,"div",28)(2,"p-dropdown",129),c(3,"translate"),h("onChange",function(n){let a;S(t);let _=l();return v(_.setPipe(n.value,(a=_.data().defaults)==null?null:a.pipeId))}),u(4,D_,5,5,"ng-template",43)(5,$_,7,6,"ng-template",44),r(),s(6,"label",130),b(7),c(8,"translate"),r()()()}if(e&2){let t=l();p(2),d("pTooltip",m(3,4,"settings.defaultPipeTooltip"))("ngModel",t.settings().pipeId)("options",t.options().pipes),p(5),w(m(8,6,"settings.defaultPipe"))}}function N_(e,o){if(e&1&&(s(0,"div",127),x(1,"i"),c(2,"iconSmClass"),s(3,"div",93),b(4),r()()),e&2){let t=o.$implicit;p(),I(m(2,3,t.value)),p(3),M(" ",t.label," ")}}function U_(e,o){if(e&1&&x(0,"lab-tooltip",134),e&2){let t=l().$implicit;d("id",t.value)}}function W_(e,o){if(e&1&&(s(0,"div",106),x(1,"i"),c(2,"iconSmClass"),s(3,"div",93),b(4),r(),u(5,U_,1,1,"ng-template",null,7,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function z_(e,o){if(e&1){let t=y();s(0,"div",32)(1,"div",28)(2,"p-dropdown",132),c(3,"translate"),h("onChange",function(n){let a;S(t);let _=l();return v(_.setCargoWagon(n.value,(a=_.data().defaults)==null?null:a.cargoWagonId))}),u(4,N_,5,5,"ng-template",43)(5,W_,7,6,"ng-template",44),r(),s(6,"label",133),b(7),c(8,"translate"),r()()()}if(e&2){let t=l();p(2),d("pTooltip",m(3,4,"settings.defaultCargoWagonTooltip"))("ngModel",t.settings().cargoWagonId)("options",t.options().cargoWagons),p(5),w(m(8,6,"settings.defaultCargoWagon"))}}function L_(e,o){if(e&1&&(s(0,"div",127),x(1,"i"),c(2,"iconSmClass"),s(3,"div",93),b(4),r()()),e&2){let t=o.$implicit;p(),I(m(2,3,t.value)),p(3),M(" ",t.label," ")}}function H_(e,o){if(e&1&&x(0,"lab-tooltip",137),e&2){let t=l().$implicit;d("id",t.value)}}function G_(e,o){if(e&1&&(s(0,"div",106),x(1,"i"),c(2,"iconSmClass"),s(3,"div",93),b(4),r(),u(5,H_,1,1,"ng-template",null,7,B),r()),e&2){let t=o.$implicit,i=T(6);d("pTooltip",i),p(),I(m(2,4,t.value)),p(3),M(" ",t.label," ")}}function q_(e,o){if(e&1){let t=y();s(0,"div",32)(1,"div",28)(2,"p-dropdown",135),c(3,"translate"),h("onChange",function(n){let a;S(t);let _=l();return v(_.setFluidWagon(n.value,(a=_.data().defaults)==null?null:a.fluidWagonId))}),u(4,L_,5,5,"ng-template",43)(5,G_,7,6,"ng-template",44),r(),s(6,"label",136),b(7),c(8,"translate"),r()()()}if(e&2){let t=l();p(2),d("pTooltip",m(3,4,"settings.defaultFluidWagonTooltip"))("ngModel",t.settings().fluidWagonId)("options",t.options().fluidWagons),p(5),w(m(8,6,"settings.defaultFluidWagon"))}}function Q_(e,o){if(e&1){let t=y();s(0,"div",32)(1,"div",28)(2,"p-inputNumber",138,11),c(4,"translate"),c(5,"translate"),h("onBlur",function(){let n;S(t);let a=T(3),_=l();return v(_.setFlowRate(_.rational((n=a.value)!==null&&n!==void 0?n:1500)))}),r(),s(6,"label",139),b(7),c(8,"translate"),r(),s(9,"small",52)(10,"a",140),b(11),c(12,"translate"),r()()()(),s(13,"div",27)(14,"div",28)(15,"p-dropdown",141),c(16,"translate"),h("onChange",function(n){S(t);let a=l();return v(a.setInserterTarget(n.value))}),r(),s(17,"label",142),b(18),c(19,"translate"),r()()()}if(e&2){let t=l();p(2),d("suffix"," "+m(4,12,"settings.flowRateUnit"))("min",1)("step",100)("showButtons",!0)("pTooltip",m(5,14,"settings.pipeFlowRateTooltip"))("ngModel",t.settings().flowRate.toNumber()),p(5),w(m(8,16,"settings.pipeFlowRate")),p(4),w(m(12,18,"settings.wiki")),p(4),d("pTooltip",m(16,20,"settings.inserterTargetTooltip"))("ngModel",t.settings().inserterTarget)("options",t.inserterTargetOptions),p(3),w(m(19,22,"settings.inserterTarget"))}}function K_(e,o){if(e&1){let t=y();s(0,"div",27)(1,"div",28)(2,"p-inputNumber",143,12),c(4,"translate"),h("onBlur",function(){let n;S(t);let a=T(3),_=l();return v(_.setMiningBonus(_.rational(((n=a.value)!==null&&n!==void 0?n:100)-100)))}),r(),s(5,"label",144),b(6),c(7,"translate"),r()()()}if(e&2){let t=l();p(2),d("min",100)("step",10)("showButtons",!0)("pTooltip",m(4,6,"settings.miningSpeedTooltip"))("ngModel",t.settings().miningBonus.add(t.rational(100)).toNumber()),p(4),w(m(7,8,"settings.miningSpeed"))}}function X_(e,o){if(e&1){let t=y();s(0,"p-accordionTab",46),c(1,"translate"),s(2,"div",26)(3,"div",32)(4,"div",28)(5,"p-inputNumber",145,13),c(7,"translate"),h("onBlur",function(){let n;S(t);let a=T(6),_=l();return v(_.setMiningBonus(_.rational((n=a.value)!==null&&n!==void 0?n:0)))}),r(),s(8,"label",146),b(9),c(10,"translate"),r()()(),s(11,"div",32)(12,"div",28)(13,"p-dropdown",147),c(14,"translate"),h("onChange",function(n){S(t);let a=l();return v(a.setResearchSpeed(n.value))}),r(),s(15,"label",148),b(16),c(17,"translate"),r()()(),s(18,"div",27)(19,"div",28)(20,"p-dropdown",149),c(21,"translate"),h("onChange",function(n){S(t);let a=l();return v(a.setInserterCapacity(n.value))}),r(),s(22,"label",150),b(23),c(24,"translate"),r()()()()()}if(e&2){let t=l();d("header",m(1,15,"settings.bonuses")),p(5),d("min",0)("step",10)("showButtons",!0)("pTooltip",m(7,17,"settings.miningProductivityTooltip"))("ngModel",t.settings().miningBonus.toNumber()),p(4),w(m(10,19,"settings.miningProductivity")),p(4),d("pTooltip",m(14,21,"settings.researchSpeedTooltip"))("ngModel",t.settings().researchBonus)("options",t.researchSpeedOptions),p(3),w(m(17,23,"settings.researchSpeed")),p(4),d("pTooltip",m(21,25,"settings.inserterCapacityTooltip"))("ngModel",t.settings().inserterCapacity)("options",t.inserterCapacityOptions),p(3),w(m(24,27,"settings.inserterCapacity"))}}function Z_(e,o){if(e&1){let t=y();s(0,"div",32)(1,"span",28)(2,"p-dropdown",151),c(3,"translate"),h("onChange",function(n){S(t);let a=l();return v(a.setPowerUnit(n.value))}),r(),s(4,"label",152),b(5),c(6,"translate"),r()()()}if(e&2){let t=l();p(2),d("pTooltip",m(3,4,"settings.powerUnitTooltip"))("ngModel",t.preferences().powerUnit)("options",t.powerUnitOptions),p(3),w(m(6,6,"settings.powerUnit"))}}var J_=(()=>{let o=class o{constructor(){this.contentSvc=R(he),this.router=R(Ti),this.store=R(Y),this.translateSvc=R(Ue),this.routerSvc=R(We),this.active=!1,this.hidden=!1,this.itemsState=this.store.selectSignal(G.getItemsState),this.excludedItemIds=this.store.selectSignal(G.getExcludedItemIds),this.recipesState=this.store.selectSignal(N.getRecipesState),this.excludedRecipeIds=this.store.selectSignal(N.getExcludedRecipeIds),this.itemIds=this.store.selectSignal(N.getAvailableItems),this.data=this.store.selectSignal(N.getAdjustedDataset),this.machinesState=this.store.selectSignal(q.getMachinesState),this.settings=this.store.selectSignal(V.getSettings),this.columnsState=this.store.selectSignal(V.getColumnsState),this.options=this.store.selectSignal(V.getOptions),this.modOptions=this.store.selectSignal(V.getModOptions),this.presetOptions=this.store.selectSignal(V.getPresetOptions),this.researchedTechnologyIds=this.store.selectSignal(V.getAllResearchedTechnologyIds),this.recipeIds=this.store.selectSignal(V.getAvailableRecipes),this.gameStates=this.store.selectSignal(V.getGameStates),this.savedStates=this.store.selectSignal(V.getSavedStates),this.preferences=this.store.selectSignal(L.preferencesState),this.modRecord=this.store.selectSignal(Ei.getModRecord),this.machineIds=Z(()=>[...K(this.store.selectSignal(q.getMachinesState)().ids,[])]),this.defaults=this.store.selectSignal(V.getDefaults),this.state="",this.editValue="",this.editState=null,this.editStateMenu=[{label:this.translateSvc.instant("settings.createSavedState"),icon:"fa-solid fa-plus",command:()=>this.openCreateState()},{label:this.translateSvc.instant("settings.saveSavedState"),icon:"fa-solid fa-floppy-disk",command:()=>this.overwriteState()},{label:this.translateSvc.instant("settings.editSavedState"),icon:"fa-solid fa-pencil",command:()=>this.openEditState()},{label:this.translateSvc.instant("settings.deleteSavedState"),icon:"fa-solid fa-trash",command:()=>this.clickDeleteState()}],this.versionsVisible=!1,this.displayRateOptions=dt,this.gameOptions=pi,this.inserterCapacityOptions=si,this.inserterTargetOptions=ri,this.languageOptions=_i,this.powerUnitOptions=ui,this.researchSpeedOptions=Ci,this.themeOptions=xi,this.maximizeTypeOptions=di,this.FuelType=li,this.Game=fe,this.ItemId=z,this.BrowserUtility=Ie,this.rational=j}ngOnInit(){this.store.select(V.getGameStates).pipe(ue()).subscribe(i=>{this.state=K(Object.keys(i).find(n=>i[n]===Ie.search),"")})}clickResetSettings(){this.contentSvc.confirm({icon:"fa-solid fa-exclamation-triangle",header:this.translateSvc.instant("settings.reset"),message:this.translateSvc.instant("settings.resetWarning"),acceptLabel:this.translateSvc.instant("yes"),rejectLabel:this.translateSvc.instant("cancel"),accept:()=>{localStorage.clear(),this.resetSettings()}})}setSearch(i){let n=this.router.parseUrl(this.router.url);new URLSearchParams(i).forEach((_,C)=>n.queryParams[C]=_),this.router.navigateByUrl(n)}copySearchToClipboard(i){navigator.clipboard.writeText(i)}setState(i,n){let a=n[i];if(a){let _=this.routerSvc.getParams(a);this.state=i,this.router.navigate([],{queryParams:_})}}clickSaveState(i){!this.editValue||!this.editState||(this.saveState(i,this.editValue,Ie.search),this.editState==="edit"&&this.state&&this.removeState(i,this.state),this.editState=null,this.state=this.editValue)}openCreateState(){this.editValue="",this.editState="create"}overwriteState(){this.store.select(V.getGame).pipe(ue()).subscribe(i=>{this.saveState(i,this.state,Ie.search)})}openEditState(){this.editValue=this.state,this.editState="edit"}clickDeleteState(){this.store.select(V.getGame).pipe(ue()).subscribe(i=>{this.removeState(i,this.state),this.state=""})}setGame(i){this.setMod(Si[i].modId)}setExcludedRecipes(i,n,a){let _=[];for(let C of a.recipeIds){let f=i.some(k=>k===C);if(f!==n[C].excluded){let k=K(a.defaults?.excludedRecipeIds,[]).some(O=>O===C);_.push({id:C,value:f,def:k})}}this.setRecipeExcludedBatch(_)}setExcludedItems(i,n,a){let _=[];for(let C of a.itemIds){let f=i.some(k=>k===C);f!==n[C].excluded&&_.push({id:C,value:f})}this.setItemExcludedBatch(_)}changeFuel(i,n,a,_){let C=de.bestMatch(K(a.fuelOptions?.map(f=>f.value),[]),_);this.setFuel(i,n,C)}changeModules(i,n){let a=this.machinesState(),_=this.data().machineEntities[i];this.setModules(i,de.dehydrateModules(n,K(a.entities[i].moduleOptions,[]),a.moduleRankIds,_.modules))}changeBeacons(i,n){let a=this.machinesState().beacons;this.setBeacons(i,de.dehydrateBeacons(n,a))}changeDefaultBeacons(i){let n=this.defaults()?.beacons;this.setDefaultBeacons(de.dehydrateBeacons(i,n))}toggleBeaconReceivers(i){this.setBeaconReceivers(i?j(1n):null)}resetSettings(){this.store.dispatch(new ki.ResetAction)}saveState(i,n,a){this.store.dispatch(new L.SaveStateAction({key:i,id:n,value:a}))}removeState(i,n){this.store.dispatch(new L.RemoveStateAction({key:i,id:n}))}setMod(i){this.store.dispatch(new V.SetModAction(i))}setResearchedTechnologies(i){this.store.dispatch(new V.SetResearchedTechnologiesAction(i))}setRecipeExcludedBatch(i){this.store.dispatch(new N.SetExcludedBatchAction(i))}setItemExcludedBatch(i){this.store.dispatch(new G.SetExcludedBatchAction(i))}setPreset(i){this.store.dispatch(new V.SetPresetAction(i))}setFuelRank(i,n){this.store.dispatch(new q.SetFuelRankAction({value:i,def:n}))}setModuleRank(i,n){this.store.dispatch(new q.SetModuleRankAction({value:i,def:n}))}addMachine(i,n){this.store.dispatch(new q.AddAction({value:i,def:n}))}setDefaultBeacons(i){this.store.dispatch(new q.SetDefaultBeaconsAction(i))}setDefaultOverclock(i){this.store.dispatch(new q.SetDefaultOverclockAction(i))}setMachineRank(i,n){this.store.dispatch(new q.SetRankAction({value:i,def:n}))}setMachine(i,n,a){this.store.dispatch(new q.SetMachineAction({id:i,value:n,def:a}))}setFuel(i,n,a){this.store.dispatch(new q.SetFuelAction({id:i,value:n,def:a}))}setModules(i,n){this.store.dispatch(new q.SetModulesAction({id:i,value:n}))}setBeacons(i,n){this.store.dispatch(new q.SetBeaconsAction({id:i,value:n}))}setOverclock(i,n,a){this.store.dispatch(new q.SetOverclockAction({id:i,value:n,def:a}))}removeMachine(i,n){this.store.dispatch(new q.RemoveAction({value:i,def:n}))}setBeaconReceivers(i){this.store.dispatch(new V.SetBeaconReceiversAction(i))}setProliferatorSpray(i){this.store.dispatch(new V.SetProliferatorSprayAction(i))}setBelt(i,n){this.store.dispatch(new V.SetBeltAction({value:i,def:n}))}setPipe(i,n){this.store.dispatch(new V.SetPipeAction({value:i,def:n}))}setCargoWagon(i,n){this.store.dispatch(new V.SetCargoWagonAction({value:i,def:n}))}setFluidWagon(i,n){this.store.dispatch(new V.SetFluidWagonAction({value:i,def:n}))}setFlowRate(i){this.store.dispatch(new V.SetFlowRateAction(i))}setInserterTarget(i){this.store.dispatch(new V.SetInserterTargetAction(i))}setMiningBonus(i){this.store.dispatch(new V.SetMiningBonusAction(i))}setResearchSpeed(i){this.store.dispatch(new V.SetResearchBonusAction(i))}setInserterCapacity(i){this.store.dispatch(new V.SetInserterCapacityAction(i))}setDisplayRate(i,n){this.store.dispatch(new V.SetDisplayRateAction({value:i,prev:n}))}setPowerUnit(i){this.store.dispatch(new L.SetPowerUnitAction(i))}setLanguage(i){this.translateSvc.use(i),this.store.dispatch(new L.SetLanguageAction(i))}setTheme(i){this.store.dispatch(new L.SetThemeAction(i))}setBypassLanding(i){this.store.dispatch(new L.SetBypassLandingAction(i))}setHideDuplicateIcons(i){this.store.dispatch(new L.SetHideDuplicateIconsAction(i))}setDisablePaginator(i){this.store.dispatch(new L.SetDisablePaginatorAction(i))}setMaximizeType(i){this.store.dispatch(new V.SetMaximizeTypeAction(i))}setNetProductionOnly(i){this.store.dispatch(new V.SetNetProductionOnlyAction(i))}setSurplusMachinesOutput(i){this.store.dispatch(new V.SetSurplusMachinesOutputAction(i))}setConvertObjectiveValues(i){this.store.dispatch(new L.SetConvertObjectiveValuesAction(i))}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=J({type:o,selectors:[["lab-settings"]],hostVars:4,hostBindings:function(n,a){n&2&&ie("active",a.active)("hidden",a.hidden)},inputs:{active:"active",hidden:"hidden"},decls:147,vars:172,consts:[["techPicker",""],["recipesPicker",""],["itemsPicker",""],["presetDropdown",""],["search",""],["nameCtrl","ngModel"],["stateMenu",""],["tooltip",""],["overclockInput",""],["beaconsOverlay",""],["modulesOverlay",""],["flowRateInput",""],["miningBonusInput",""],["miningProdInput",""],[1,"p-3"],[1,"d-flex","align-items-center","justify-content-between"],["pButton","","pRipple","","type","button","icon","fa-solid fa-trash","tooltipPosition","bottom",1,"p-button-rounded","p-button-text",3,"click","pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-rounded","p-button-text","d-inline-flex","d-none","d-xl-inline-flex",3,"click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-rounded","p-button-text","d-inline-flex","d-sm-none",3,"click"],[1,"flex-grow-1","overflow-hidden"],["styleClass","mb-5"],[3,"multiple"],["pTemplate","header"],[1,"p-inputgroup","mb-2"],[1,"p-inputgroup"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-outlined","p-button-rounded","w-100",3,"label"],[1,"p-fluid"],[1,"mt-3"],[1,"p-float-label"],["labDropdownTranslate","","inputId","game",3,"onChange","pTooltip","ngModel","options"],["for","game"],[1,"position-relative"],[1,"mt-3","pb-3"],["pButton","","pRipple","","type","button","icon","fa-solid fa-microchip",1,"p-button-rounded","p-button-outlined",3,"click","pTooltip","label"],[3,"selectIds"],[1,"pb-3"],["pButton","","pRipple","","type","button","icon","fa-solid fa-flask-vial",1,"p-button-rounded","p-button-outlined",3,"click","pTooltip","label"],[3,"selectIds","header"],["pButton","","pRipple","","type","button","icon","fa-solid fa-boxes-stacked",1,"p-button-rounded","p-button-outlined",3,"click","pTooltip","label"],[3,"selected"],["labDropdownTranslate","","inputId","preset",3,"onChange","pTooltip","ngModel","options"],["for","preset"],["labDropdownBase","","inputId","default-transport-belt",3,"onChange","pTooltip","ngModel","options"],["pTemplate","selectedItem"],["pTemplate","item"],["for","default-transport-belt"],[3,"header"],["labDropdownTranslate","","inputId","display-rate",3,"onChange","pTooltip","ngModel","options"],["for","display-rate"],[1,"text-end"],["labDropdownTranslate","","inputId","language",3,"onChange","pTooltip","ngModel","options"],["for","language"],[1,"position-absolute","end-0","bottom-100","me-1","mb-1"],["href","https://github.com/factoriolab/factoriolab/wiki/Translating-FactorioLab","target","_blank"],["labDropdownTranslate","","inputId","theme",3,"onChange","pTooltip","ngModel","options"],["for","theme"],[3,"onChange","binary","label","ngModel"],[3,"onChange","ngModel","binary","label"],["labDropdownTranslate","","inputId","maximize-type",3,"onChange","pTooltip","ngModel","options"],["for","maximize-type"],["tooltipPosition","top",3,"onChange","ngModel","binary","label","pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-dollar-sign",1,"p-button-rounded","p-button-outlined","mb-4",3,"click","label"],[1,"d-flex","align-items-center","justify-content-between","flex-grow-1"],["pButton","","pRipple","","type","button","icon","fa-solid fa-arrow-up-right-from-square",1,"p-button-outlined",3,"click"],["pInputText","","type","text",3,"ngModel"],["pButton","","pRipple","","type","button","icon","fa-solid fa-copy",1,"p-button-outlined",3,"click"],["pInputText","","pAutoFocus","","type","text","tooltipPosition","top","required","",3,"ngModelChange","keydown.enter","autofocus","placeholder","pTooltip","ngModel"],["pButton","","pRipple","","type","button","icon","fa-solid fa-floppy-disk","tooltipPosition","top",1,"p-button-outlined",3,"click","pTooltip","disabled"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined",3,"click","pTooltip"],["tooltipPosition","top",3,"onChange","placeholder","pTooltip","ngModel","options"],["pButton","","pRipple","","type","button","icon","fa-solid fa-ellipsis-vertical",1,"p-button-outlined"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-outlined",3,"pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-ellipsis-vertical",1,"p-button-outlined",3,"click"],["appendTo","body",3,"popup","model"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-outlined",3,"click","pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-outlined","p-button-rounded","w-100",3,"click","label"],[1,"p-static-label"],[1,"position-absolute","end-0","top-0","me-1","mb-1"],["href","https://github.com/factoriolab/factoriolab/issues/new?assignees=&labels=mod+support&template=mod-request.md&title=","target","_blank"],["inputId","mod","styleClass","w-100",3,"onChange","filter","autofocusFilter","pTooltip","ngModel","options"],["pButton","","pRipple","","icon","fa-solid fa-info",1,"p-button-outlined",3,"click","pTooltip"],["appendTo","body",3,"visibleChange","visible","modal","dismissableMask","draggable","resizable","breakpoints","header"],["responsiveLayout","scroll","styleClass","p-datatable-sm",3,"value"],["pTemplate","body"],["pTemplate","footer"],["pButton","","pRipple","","type","button","icon","fa-solid fa-check",1,"p-button-outlined",3,"click","label"],["inputId","modifier-rank","styleClass","icons","appendTo","body","scrollHeight","40vh","panelStyleClass","tooltip",3,"onChange","pTooltip","ngModel","options"],["pTemplate","selectedItems"],["for","modifier-rank"],[1,"d-flex"],[1,"mx-2",3,"class"],[1,"mx-2"],[1,"d-flex","align-items-center","p-2","w-100","h-100",3,"pTooltip"],[1,"ms-3","text-truncate"],["type","fuel",3,"id"],["inputId","fuel-rank","styleClass","icons","appendTo","body","scrollHeight","40vh","panelStyleClass","tooltip",3,"onChange","pTooltip","ngModel","options"],["for","fuel-rank"],[1,"p-inputgroup","flex-wrap","machine-preference","mb-1"],[1,"p-inputgroup-addon",3,"pTooltip"],[1,"fa-solid","fa-industry"],["labDropdownBase","icon",3,"onChange","ngModel","pTooltip","options"],["labNoDrag","","suffix","%","inputStyleClass","text-end",3,"min","max","step","maxFractionDigits","showButtons","pTooltip","ngModel"],[3,"onReorder","value","dragdrop"],[1,"pt-2"],[1,"d-flex","align-items-center","justify-content-center","h-100"],[1,"fa-solid","fa-plus"],[1,"d-flex","align-items-center","py-2","w-100","h-100",3,"pTooltip"],["type","machine",3,"id"],["labNoDrag","","suffix","%","inputStyleClass","text-end",3,"onBlur","min","max","step","maxFractionDigits","showButtons","pTooltip","ngModel"],["pButton","","pRipple","","type","button",1,"hover-action","icons","p-button-text","flex-column",3,"click","pTooltip"],[1,"hover-icon","fa-solid","fa-gear"],[3,"setValue"],[1,"p-button-icon"],[1,"p-button-icon",3,"class"],["type","beacon",3,"id"],[1,"p-inputgroup","flex-wrap","machine-preference"],["pButton","","pRipple","","type","button","icon","fa-solid fa-grip-lines",1,"p-button-outlined","cursor-grab"],["labDropdownBase","icon","labNoDrag","",3,"onChange","pTooltip","ngModel","options"],["labDropdownBase","icon","labNoDrag","",3,"pTooltip","ngModel","options"],["pButton","","pRipple","","labNoDrag","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined","ms-auto",3,"click","pTooltip"],["type","module",3,"id"],["pButton","","pRipple","","type","button",1,"hover-action","icons","p-button-text",3,"click","pTooltip"],["tooltipPosition","bottom",3,"onChange","ngModel","binary","label","pTooltip"],["for","beacon-receivers",1,"p-static-label"],["inputId","beacon-receivers",1,"w-100",3,"setValue","pTooltip","value"],["labDropdownBase","","inputId","proliferator-self-spray",3,"onChange","autoDisplayFirst","pTooltip","ngModel","options"],["for","proliferator-self-spray"],[1,"d-flex","align-items-center","h-100"],["type","belt",3,"id"],["labDropdownBase","","inputId","default-pipe",3,"onChange","pTooltip","ngModel","options"],["for","default-pipe"],["type","pipe",3,"id"],["labDropdownBase","","inputId","default-cargo-wagon",3,"onChange","pTooltip","ngModel","options"],["for","default-cargo-wagon"],["type","cargo-wagon",3,"id"],["labDropdownBase","","inputId","default-fluid-wagon",3,"onChange","pTooltip","ngModel","options"],["for","default-fluid-wagon"],["type","fluid-wagon",3,"id"],["inputId","pipe-flow-rate","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined",3,"onBlur","suffix","min","step","showButtons","pTooltip","ngModel"],["for","pipe-flow-rate"],["href","https://wiki.factorio.com/Fluid_system#Pipelines","target","_blank"],["labDropdownTranslate","","inputId","inserter-target",3,"onChange","pTooltip","ngModel","options"],["for","inserter-target"],["inputId","mining-speed","suffix","%","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined",3,"onBlur","min","step","showButtons","pTooltip","ngModel"],["for","mining-speed"],["inputId","mining-productivity","prefix","+","suffix","%","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined",3,"onBlur","min","step","showButtons","pTooltip","ngModel"],["for","mining-productivity"],["labDropdownTranslate","","inputId","research-bonus",3,"onChange","pTooltip","ngModel","options"],["for","research-speed"],["labDropdownTranslate","","inputId","inserter-capacity",3,"onChange","pTooltip","ngModel","options"],["for","inserter-capacity"],["labDropdownTranslate","","inputId","power-unit",3,"onChange","pTooltip","ngModel","options"],["for","power-unit"]],template:function(n,a){if(n&1){let _=y();s(0,"div",14)(1,"div",15)(2,"h2"),b(3),c(4,"translate"),r(),s(5,"div")(6,"button",16),c(7,"translate"),h("click",function(){return S(_),v(a.clickResetSettings())}),r(),s(8,"button",17),h("click",function(){return S(_),v(a.contentSvc.toggleSettingsXl())}),r(),s(9,"button",18),h("click",function(){return S(_),v(a.contentSvc.toggleSettings())}),r()()()(),s(10,"div",19)(11,"p-scrollPanel",20)(12,"p-accordion",21)(13,"p-accordionTab"),u(14,gr,5,4,"ng-template",22)(15,fr,5,1,"div",23)(16,xr,9,15,"div",23)(17,vr,6,9,"div",24)(18,br,2,3,"button",25),r(),s(19,"p-accordionTab"),u(20,Tr,6,4,"ng-template",22),s(21,"div",26)(22,"div",27)(23,"span",28)(24,"p-dropdown",29),c(25,"translate"),h("onChange",function(f){return S(_),v(a.setGame(f.value))}),r(),s(26,"label",30),b(27),c(28,"translate"),r(),u(29,yr,3,2),r()(),u(30,Er,20,32,"div",31),s(31,"div",32)(32,"button",33),c(33,"translate"),c(34,"translate"),c(35,"translate"),h("click",function(){S(_);let f=T(37);return v(f.clickOpen(a.researchedTechnologyIds()))}),r(),s(36,"lab-tech-picker",34,0),h("selectIds",function(f){return S(_),v(a.setResearchedTechnologies(f))}),r()(),s(38,"div",35)(39,"button",36),c(40,"translate"),c(41,"translate"),h("click",function(){S(_);let f=T(43);return v(f.clickOpen("recipe",a.recipeIds(),a.excludedRecipeIds()))}),r(),s(42,"lab-picker",37,1),c(44,"translate"),h("selectIds",function(f){return S(_),v(a.setExcludedRecipes(f,a.recipesState(),a.data()))}),r()(),s(45,"div")(46,"button",38),c(47,"translate"),c(48,"translate"),h("click",function(){S(_);let f=T(50);return v(f.clickOpen("item",a.itemIds(),a.excludedItemIds()))}),r(),s(49,"lab-picker",37,2),c(51,"translate"),h("selectIds",function(f){return S(_),v(a.setExcludedItems(f,a.itemsState(),a.data()))}),r()()()(),s(52,"p-accordionTab",39),u(53,Mr,5,4,"ng-template",22),s(54,"div",26)(55,"div",32)(56,"span",28)(57,"p-dropdown",40,3),c(59,"translate"),h("onChange",function(f){return S(_),v(a.setPreset(f.value))}),r(),s(60,"label",41),b(61),c(62,"translate"),r()()(),u(63,Dr,9,8,"div",32)(64,Ur,9,8,"div",32)(65,y_,14,17)(66,I_,4,8,"div",35)(67,B_,6,7,"div",35)(68,M_,9,9,"div",32),s(69,"div",32)(70,"div",28)(71,"p-dropdown",42),c(72,"translate"),h("onChange",function(f){let k;return S(_),v(a.setBelt(f.value,(k=a.data().defaults)==null?null:k.beltId))}),u(73,R_,1,1,"ng-template",43)(74,F_,7,6,"ng-template",44),r(),s(75,"label",45),b(76),c(77,"translate"),r()()(),u(78,A_,9,8,"div",32)(79,z_,9,8,"div",32)(80,q_,9,8,"div",32)(81,Q_,20,24)(82,K_,8,10,"div",27),r()(),u(83,X_,25,29,"p-accordionTab",46),s(84,"p-accordionTab",46),c(85,"translate"),s(86,"div",26)(87,"div",32)(88,"span",28)(89,"p-dropdown",47),c(90,"translate"),h("onChange",function(f){return S(_),v(a.setDisplayRate(f.value,a.settings().displayRate))}),r(),s(91,"label",48),b(92),c(93,"translate"),r()()(),u(94,Z_,7,8,"div",32),s(95,"div",32),x(96,"div",49),s(97,"div",28)(98,"p-dropdown",50),c(99,"translate"),h("onChange",function(f){return S(_),v(a.setLanguage(f.value))}),r(),s(100,"label",51),b(101),c(102,"translate"),r(),s(103,"small",52)(104,"a",53),b(105),c(106,"translate"),r()()()(),s(107,"div",32)(108,"div",28)(109,"p-dropdown",54),c(110,"translate"),h("onChange",function(f){return S(_),v(a.setTheme(f.value))}),r(),s(111,"label",55),b(112),c(113,"translate"),r()()(),s(114,"div",35)(115,"p-checkbox",56),c(116,"translate"),h("onChange",function(f){return S(_),v(a.setBypassLanding(f.checked))}),r()(),s(117,"div",35)(118,"p-checkbox",57),c(119,"translate"),h("onChange",function(f){return S(_),v(a.setHideDuplicateIcons(f.checked))}),r()(),s(120,"div")(121,"p-checkbox",57),c(122,"translate"),h("onChange",function(f){return S(_),v(a.setDisablePaginator(f.checked))}),r()()()(),s(123,"p-accordionTab",46),c(124,"translate"),s(125,"div",26)(126,"div",32)(127,"span",28)(128,"p-dropdown",58),c(129,"translate"),h("onChange",function(f){return S(_),v(a.setMaximizeType(f.value))}),r(),s(130,"label",59),b(131),c(132,"translate"),r()()(),s(133,"div",35)(134,"p-checkbox",60),c(135,"translate"),c(136,"translate"),h("onChange",function(f){return S(_),v(a.setNetProductionOnly(f.checked))}),r()(),s(137,"div",35)(138,"p-checkbox",60),c(139,"translate"),c(140,"translate"),h("onChange",function(f){return S(_),v(a.setSurplusMachinesOutput(f.checked))}),r()(),s(141,"div",35)(142,"p-checkbox",60),c(143,"translate"),c(144,"translate"),h("onChange",function(f){return S(_),v(a.setConvertObjectiveValues(f.checked))}),r()(),s(145,"button",61),c(146,"translate"),h("click",function(){return S(_),v(a.contentSvc.showCosts$.next())}),r()()()()()()}if(n&2){let _;p(3),w(m(4,86,"settings.header")),p(3),d("pTooltip",m(7,88,"settings.reset")),p(5),Ee(X(165,cr)),p(),d("multiple",!0),p(3),g(a.BrowserUtility.isStandalone?15:-1),p(),g(a.editState?16:a.savedStates().length?17:18),p(6),ie("pb-3",a.data().game===a.Game.Factorio),p(2),d("pTooltip",m(25,90,"settings.gameTooltip"))("ngModel",a.data().game)("options",a.gameOptions),p(3),w(m(28,92,"settings.game")),p(2),g(a.data().game!==a.Game.Factorio?29:-1),p(),g(a.data().game===a.Game.Factorio?30:-1),p(2),d("pTooltip",m(33,94,"settings.techsTooltip"))("label",a.researchedTechnologyIds()?E(34,96,"settings.techsResearched",ye(166,Qt,a.researchedTechnologyIds().length)):m(35,99,"settings.allTechsResearched")),p(7),d("pTooltip",m(40,101,"settings.recipesTooltip"))("label",E(41,103,"settings.recipesExcluded",ye(168,Qt,a.excludedRecipeIds().length))),p(3),d("header",m(44,106,"settings.recipesHeader")),p(4),d("pTooltip",m(47,108,"settings.itemsTooltip"))("label",E(48,110,"settings.itemsExcluded",ye(170,Qt,a.excludedItemIds().length))),p(3),d("header",m(51,113,"settings.itemsHeader")),p(3),d("selected",!0),p(5),d("pTooltip",m(59,115,"settings.presetTooltip"))("ngModel",a.settings().preset)("options",a.presetOptions()),p(4),w(m(62,117,"settings.preset")),p(2),g(a.data().moduleIds.length>1?63:-1),p(),g(a.data().fuelIds.length&&a.data().game!==a.Game.Satisfactory?64:-1),p(),g(a.data().game!==a.Game.CaptainOfIndustry?65:-1),p(),g(a.data().game===a.Game.Factorio?66:-1),p(),g((_=a.settings().beaconReceivers)?67:-1,_),p(),g(a.data().game===a.Game.DysonSphereProgram?68:-1),p(3),d("pTooltip",m(72,119,"settings.defaultTransportBeltTooltip"))("ngModel",a.settings().beltId)("options",a.options().belts),p(5),w(m(77,121,"settings.defaultTransportBelt")),p(2),g(a.data().pipeIds.length>1?78:-1),p(),g(a.data().cargoWagonIds.length>1?79:-1),p(),g(a.data().fluidWagonIds.length>1?80:-1),p(),g(a.data().game===a.Game.Factorio?81:-1),p(),g(a.data().game===a.Game.DysonSphereProgram?82:-1),p(),g(a.data().game===a.Game.Factorio?83:-1),p(),d("header",m(85,123,"settings.display")),p(5),d("pTooltip",m(90,125,"settings.displayRateTooltip"))("ngModel",a.settings().displayRate)("options",a.displayRateOptions),p(3),w(m(93,127,"settings.displayRate")),p(2),g(a.columnsState().power.show?94:-1),p(4),d("pTooltip",m(99,129,"settings.languageTooltip"))("ngModel",a.preferences().language)("options",a.languageOptions),p(3),w(m(102,131,"settings.language")),p(4),w(m(106,133,"settings.helpTranslate")),p(4),d("pTooltip",m(110,135,"settings.themeTooltip"))("ngModel",a.preferences().theme)("options",a.themeOptions),p(3),w(m(113,137,"settings.theme")),p(3),d("binary",!0)("label",m(116,139,"settings.bypassLanding"))("ngModel",a.preferences().bypassLanding),p(3),d("ngModel",a.preferences().hideDuplicateIcons)("binary",!0)("label",m(119,141,"settings.hideDuplicateIcons")),p(3),d("ngModel",a.preferences().disablePaginator)("binary",!0)("label",m(122,143,"settings.disablePaginator")),p(2),d("header",m(124,145,"settings.advanced")),p(5),d("pTooltip",m(129,147,"settings.maximizeTypeTooltip"))("ngModel",a.settings().maximizeType)("options",a.maximizeTypeOptions),p(3),w(m(132,149,"settings.maximizeType")),p(3),d("ngModel",a.settings().netProductionOnly)("binary",!0)("label",m(135,151,"settings.netProductionOnly"))("pTooltip",m(136,153,"settings.netProductionOnlyTooltip")),p(4),d("ngModel",a.settings().surplusMachinesOutput)("binary",!0)("label",m(139,155,"settings.surplusMachinesOutput"))("pTooltip",m(140,157,"settings.surplusMachinesOutputTooltip")),p(4),d("ngModel",a.preferences().convertObjectiveValues)("binary",!0)("label",m(143,159,"settings.convertObjectiveValues"))("pTooltip",m(144,161,"settings.convertObjectiveValuesTooltip")),p(3),d("label",m(146,163,"settings.openCosts"))}},dependencies:[ut,le,Bi,pe,$i,ji,ae,Oi,se,te,ze,xt,re,St,ht,Ui,zi,yt,ee,bt,vt,Be,Tt,ce,wt,ot,at,qt,Te,Fe,ct,oe,_e,Xe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:fixed;z-index:4;top:0;left:0;transition:transform .4s cubic-bezier(.05,.74,.2,.99);width:322px;height:100%;background-color:var(--surface-overlay)}@media (max-width: 1199.98px){[_nghost-%COMP%]{transform:translate(-100%)}.active[_nghost-%COMP%]{transform:translate(0)}}@media (min-width: 1200px){.hidden[_nghost-%COMP%]{transform:translate(-100%)}}[_nghost-%COMP%]     .p-scrollpanel .p-scrollpanel-content{overflow-y:scroll}[_nghost-%COMP%]     .p-scrollpanel .p-scrollpanel-bar-x{visibility:hidden}[_nghost-%COMP%]     .p-accordion{width:323px}"],changeDetection:0});let e=o;return e})();var kd=(()=>{let o=class o{};o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=Yt({type:o}),o.\u0275inj=Jt({imports:[Ft,Gi,Ft]});let e=o;return e})();export{Ds as a,J_ as b,Ts as c,kd as d};

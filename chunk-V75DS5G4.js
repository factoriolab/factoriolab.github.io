import{$ as b,Aa as v,Ad as $,Ca as m,Dc as F,Fa as L,Ga as f,Hb as E,Ib as P,Jc as D,Jd as J,Ka as l,La as s,Ma as C,Md as K,Nd as Q,Oa as x,Od as W,Pa as u,Qa as p,Qb as I,Rc as U,Ua as B,Va as S,Vd as X,Wa as w,Wc as G,Xc as H,_a as O,_c as q,ac as k,ba as M,cd as z,ce as Y,eb as d,fa as _,fb as c,g as y,ga as g,je as Z,ma as V,mc as j,nc as A,oe as ee,pd as T,pe as te,rd as h,ta as r,tb as R,ve as ie,ye as ne,zd as N}from"./chunk-5VZUA74A.js";function oe(i,o){i&1&&(l(0,"div",20)(1,"i",21),d(2,"iconSmClass"),s(),l(3,"span",22),S(4),d(5,"translate"),s()()),i&2&&(r(),L(c(2,3,o.icon)),r(3),w(c(5,5,o.label)))}function ae(i,o){if(i&1&&v(0,oe,6,7,"div",19),i&2){let t=p(2),e;f(0,(e=t.gameInfo[t.data().game])?0:-1,e)}}function re(i,o){i&1&&(l(0,"div",20)(1,"i"),d(2,"iconSmClass"),s(),l(3,"span",22),S(4),d(5,"translate"),s()()),i&2&&(r(),L(c(2,3,o.icon)),r(3),w(c(5,5,o.label)))}function le(i,o){if(i&1&&v(0,re,6,7,"div",19),i&2){let t=o.$implicit,e=p(2),n;f(0,(n=e.gameInfo[t.value])?0:-1,n)}}function se(i,o){if(i&1){let t=x();l(0,"p-dropdown",23),u("onChange",function(n){_(t);let a=p(2);return g(a.setMod(n.value))}),s()}if(i&2){let t=p(2);m("filter",!0)("autofocusFilter",!t.contentSvc.isMobile)("ngModel",t.settings().modId)("options",t.modOptions())}}function pe(i,o){i&1&&C(0,"p-divider")}function de(i,o){if(i&1){let t=x();l(0,"span",24)(1,"span",25),C(2,"i",26),s(),l(3,"p-dropdown",27),u("onChange",function(n){_(t);let a=p(2);return g(a.setState(a.preferences().states[a.data().game][n.value]))}),d(4,"translate"),s()()}if(i&2){let t=p(2);r(3),m("placeholder",c(4,2,"landing.loadSavedState"))("options",t.savedStates())}}function ce(i,o){if(i&1){let t=x();l(0,"button",28),u("click",function(){_(t);let n=p(2);return g(n.router.navigateByUrl(n.BrowserUtility.routerState))}),d(1,"translate"),s()}i&2&&m("label",c(1,1,"landing.loadLastState"))}function me(i,o){if(i&1){let t=x();l(0,"p-card")(1,"div",1)(2,"div",2),C(3,"img",3),s(),C(4,"div",4),d(5,"translate"),l(6,"p-dropdown",5),u("onChange",function(n){_(t);let a=p();return g(a.setGame(n.value))}),v(7,ae,1,1,"ng-template",6)(8,le,1,1,"ng-template",7),s(),v(9,se,1,4,"p-dropdown",8),l(10,"button",9),u("click",function(){_(t);let n=B(15),a=p();return g(n.clickOpen("item",a.itemIds()))}),d(11,"translate"),s(),l(12,"button",10),u("click",function(){_(t);let n=B(18),a=p();return g(n.clickOpen("recipe",a.recipeIds()))}),d(13,"translate"),s(),l(14,"lab-picker",11,12),u("selectId",function(n){_(t);let a=p();return g(a.selectItem(n))}),d(16,"translate"),s(),l(17,"lab-picker",11,13),u("selectId",function(n){_(t);let a=p();return g(a.selectRecipe(n))}),d(19,"translate"),s(),v(20,pe,1,0,"p-divider")(21,de,5,4,"span",14)(22,ce,2,3,"button",15),C(23,"p-divider")(24,"button",16),d(25,"translate"),C(26,"button",17),d(27,"translate"),l(28,"p-checkbox",18),u("onChange",function(n){_(t);let a=p();return g(a.setBypassLanding(n.checked))}),d(29,"translate"),s()()()}if(i&2){let t=p();r(4),m("innerHTML",c(5,16,"landing.welcome"),V),r(2),m("ngModel",t.data().game)("options",t.gameOptions),r(3),f(9,t.data().game===t.Game.Factorio?9:-1),r(),m("label",c(11,18,"landing.addItems")),r(2),m("label",c(13,20,"landing.addMachines")),r(2),m("header",c(16,22,"landing.selectAnItem")),r(3),m("header",c(19,24,"landing.selectARecipe")),r(3),f(20,t.savedStates().length||t.BrowserUtility.routerState?20:-1),r(),f(21,t.savedStates().length?21:-1),r(),f(22,t.BrowserUtility.routerState?22:-1),r(2),m("label",c(25,26,"landing.help")),r(2),m("label",c(27,28,"landing.skip")),r(2),m("binary",!0)("label",c(29,30,"landing.bypass"))("ngModel",t.preferences().bypassLanding)}}function _e(i,o){i&1&&C(0,"p-progressSpinner")}var De=(()=>{let o=class o{constructor(){this.router=b(j),this.contentSvc=b(q),this.store=b(F),this.routerSvc=b(J),this.itemIds=this.store.selectSignal(N.getAvailableItems),this.settings=this.store.selectSignal(h.getSettings),this.modOptions=this.store.selectSignal(h.getModOptions),this.data=this.store.selectSignal(h.getDataset),this.mod=this.store.selectSignal(h.getMod),this.recipeIds=this.store.selectSignal(h.getAvailableRecipes),this.savedStates=this.store.selectSignal(h.getSavedStates),this.preferences=this.store.selectSignal(T.preferencesState),this.gameInfo=k,this.gameOptions=P,this.Game=E,this.BrowserUtility=z}selectItem(e){return y(this,null,function*(){yield this.router.navigate(["list"]),this.addItemObjective(e)})}selectRecipe(e){return y(this,null,function*(){yield this.router.navigate(["list"]),this.addRecipeObjective(e)})}setState(e){if(e){let n=this.routerSvc.getParams(e);this.router.navigate(["list"],{queryParams:n})}}setGame(e){this.setMod(k[e].modId)}addItemObjective(e){this.addObjective({targetId:e,unit:I.Items})}addRecipeObjective(e){this.addObjective({targetId:e,unit:I.Machines})}setMod(e){this.store.dispatch(new h.SetModAction(e))}addObjective(e){this.store.dispatch(new $.AddAction(e))}setBypassLanding(e){this.store.dispatch(new T.SetBypassLandingAction(e))}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=M({type:o,selectors:[["ng-component"]],standalone:!0,features:[O],decls:4,vars:2,consts:[[1,"position-absolute","bottom-0","mb-3"],[1,"d-flex","flex-column"],[1,"d-flex","justify-content-center"],["src","factoriolab.webp","alt","FactorioLab","height","128","width","128"],[1,"mt-2",3,"innerHTML"],["styleClass","my-2 w-100",3,"ngModel","options","onChange"],["pTemplate","selectedItem"],["pTemplate","item"],["styleClass","mb-2 w-100",3,"filter","autofocusFilter","ngModel","options"],["pButton","","pRipple","","type","button","icon","fa-solid fa-box",3,"label","click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-industry",1,"mt-2",3,"label","click"],[3,"header","selectId"],["addItemPicker",""],["addRecipePicker",""],["class","p-inputgroup"],["pButton","","pRipple","","type","button","class","mt-2","icon","fa-solid fa-clock-rotate-left",3,"label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-question","routerLink","wizard","queryParamsHandling","preserve",1,"mt-2","p-button-help",3,"label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-forward","routerLink","list","queryParamsHandling","preserve",1,"mt-2","mb-3","p-button-outlined",3,"label"],[3,"binary","label","ngModel","onChange"],["class","d-flex align-items-center"],[1,"d-flex","align-items-center"],[1,"mx-1"],[1,"ms-3"],["styleClass","mb-2 w-100",3,"filter","autofocusFilter","ngModel","options","onChange"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],[1,"fa-solid","fa-file-import"],["styleClass","w-100",3,"placeholder","options","onChange"],["pButton","","pRipple","","type","button","icon","fa-solid fa-clock-rotate-left",1,"mt-2",3,"label","click"]],template:function(n,a){n&1&&(v(0,me,30,32,"p-card")(1,_e,1,0),l(2,"span",0),S(3),s()),n&2&&(f(0,a.mod()!=null?0:1),r(3),w(a.contentSvc.version))},dependencies:[R,ne,G,H,U,A,Q,ee,W,te,X,ie,K,Z,D,Y],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}"],changeDetection:0});let i=o;return i})();export{De as LandingComponent};

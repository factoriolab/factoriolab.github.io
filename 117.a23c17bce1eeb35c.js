"use strict";(self.webpackChunkfactoriolab=self.webpackChunkfactoriolab||[]).push([[117],{5117:(lt,x,i)=>{i.r(x),i.d(x,{MainModule:()=>p});var m=i(6895),_=i(3021),d=i(4258),h=i(9841),v=i(4004),Z=i(590),T=i(2020),r=i(8328),s=i(9105),t=i(4650),f=i(7155),M=i(2997),b=i(5593),C=i(4247),y=i(805),A=i(1493),S=i(7932),I=i(1795),J=i(6163),O=i(3883),N=i(2454),Q=i(9005),L=i(6188);function U(n,o){if(1&n&&(t._UZ(0,"span",20),t.TgZ(1,"span",21),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){const e=o.$implicit;t.Tol(e.icon),t.xp6(2),t.Oqu(t.lcZ(3,3,e.label))}}const E=function(n,o,e,a,l,c){return{resultType:n,time:o,pivots:e,rows:a,cols:l,cost:c}};function H(n,o){if(1&n&&(t.TgZ(0,"div")(1,"div"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw(5).ngIf;t.xp6(2),t.hij(" ",t.xi3(3,1,"app.simplexSolved",t.HTZ(4,E,e.result.resultType.toLowerCase(),e.result.time,e.result.pivots,e.result.A.length,e.result.A[0].length,e.result.O[e.result.O.length-1].toPrecision(2)))," ")}}function Y(n,o){if(1&n&&(t.ynx(0),t.YNc(1,H,4,11,"div",0),t.BQk()),2&n){const e=t.oxw(4).ngIf;t.xp6(1),t.Q6J("ngIf",e.result.A&&e.result.O)}}const F=function(n){return{resultType:n}};function w(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){const e=t.oxw(4).ngIf;t.xp6(1),t.Oqu(t.xi3(2,1,"app.simplexUnsolved",t.VKq(4,F,e.result.resultType.toLowerCase())))}}function R(n,o){if(1&n&&(t.TgZ(0,"div",22),t.YNc(1,Y,2,1,"ng-container",2),t.YNc(2,w,3,6,"ng-template",null,23,t.W1O),t.TgZ(4,"span"),t._uU(5),t.qZA()()),2&n){const e=t.MAs(3),a=t.oxw(3).ngIf,l=t.oxw();t.xp6(1),t.Q6J("ngIf",a.result.resultType===l.MatrixResultType.Solved||a.result.resultType===l.MatrixResultType.Cached)("ngIfElse",e),t.xp6(4),t.Oqu(l.version)}}function P(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"lab-objectives"),t.TgZ(2,"p-card",16),t.ALo(3,"translate"),t.TgZ(4,"p-tabMenu",17),t.YNc(5,U,4,5,"ng-template",18),t.qZA(),t._UZ(6,"router-outlet"),t.YNc(7,R,6,3,"ng-template",19),t.qZA(),t.BQk()),2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("header",t.lcZ(3,2,"app.factory")),t.xp6(2),t.Q6J("model",e.tabItems)}}function B(n,o){1&n&&(t.TgZ(0,"div",24),t._UZ(1,"p-progressSpinner"),t.qZA())}function $(n,o){1&n&&(t.TgZ(0,"div",25),t._UZ(1,"i",26),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"app.simplexError")))}const j=function(){return{width:"576px"}},G=function(){return{"576px":"100%"}};function X(n,o){if(1&n){const e=t.EpF();t.ynx(0),t._UZ(1,"lab-settings",4),t.TgZ(2,"div",5),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return t.KtG(l.contentSvc.toggleSettings())}),t.qZA(),t.TgZ(3,"div",6)(4,"main",7),t.YNc(5,P,8,4,"ng-container",2),t.YNc(6,B,2,0,"ng-template",null,8,t.W1O),t.TgZ(8,"p-dialog",9),t.NdJ("visibleChange",function(l){t.CHM(e);const c=t.oxw(2);return t.KtG(c.showSimplexErr=l)}),t.YNc(9,$,5,3,"ng-template",10),t.TgZ(10,"div"),t._UZ(11,"div",11),t.ALo(12,"translate"),t.TgZ(13,"div",12)(14,"button",13),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return l.showSimplexErr=!1,t.KtG(l.simplexErrSub.unsubscribe())}),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"button",14),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return t.KtG(l.tryFixSimplex())}),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"button",15),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return t.KtG(l.showSimplexErr=!1)}),t.ALo(19,"translate"),t.qZA()()()()()(),t.BQk()}if(2&n){const e=t.MAs(7),a=t.oxw().ngIf,l=t.oxw();t.xp6(1),t.Q6J("active",a.settingsActive)("hidden",a.settingsXlHidden),t.xp6(1),t.ekj("active",a.settingsActive),t.xp6(1),t.ekj("settings-xl-hidden",a.settingsXlHidden),t.xp6(2),t.Q6J("ngIf",null!=a.mod)("ngIfElse",e),t.xp6(3),t.Akn(t.DdM(28,j)),t.Q6J("visible",l.showSimplexErr)("modal",!0)("draggable",!1)("resizable",!1)("breakpoints",t.DdM(29,G)),t.xp6(3),t.Q6J("innerText",t.lcZ(12,20,"app.simplexErrorDetail")),t.xp6(3),t.Q6J("label",t.lcZ(15,22,"app.dontShowAgain")),t.xp6(2),t.Q6J("label",t.lcZ(17,24,"app.trySuggestedFix"))("loading",l.isFixingSimplex),t.xp6(2),t.Q6J("label",t.lcZ(19,26,"ok"))}}function z(n,o){1&n&&(t.TgZ(0,"div",32),t._UZ(1,"i",33),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"app.error")))}function K(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"p-dialog",27),t.YNc(1,z,5,3,"ng-template",10),t.TgZ(2,"div",28)(3,"div"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",29),t._uU(7),t.qZA(),t.TgZ(8,"div",30)(9,"button",31),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().ngIf,c=t.oxw();return t.KtG(c.reset(l.game))}),t.ALo(10,"translate"),t.qZA()()()()}if(2&n){const e=t.oxw().ngIf,a=t.oxw();t.Q6J("visible",!0)("modal",!0)("draggable",!1)("resizable",!1)("closable",!1)("closeOnEscape",!1),t.xp6(4),t.Oqu(t.lcZ(5,10,"app.errorDetail")),t.xp6(3),t.Oqu(e.errorMsg),t.xp6(2),t.Q6J("label",t.lcZ(10,12,"app.reset"))("loading",a.isResetting)}}function D(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"lab-header",1),t.YNc(2,X,20,30,"ng-container",2),t.YNc(3,K,11,14,"ng-template",null,3,t.W1O),t.BQk()),2&n){const e=o.ngIf,a=t.MAs(4);t.xp6(1),t.Q6J("sticky",e.scrollTop>16)("settingsXlHidden",e.settingsXlHidden),t.xp6(1),t.Q6J("ngIf",null==e.errorMsg)("ngIfElse",a)}}class g{constructor(o,e,a,l,c,V){this.contentSvc=o,this.ngZone=e,this.ref=a,this.router=l,this.store=c,this.errorSvc=V,this.vm$=(0,h.a)([this.store.select(s.Zr.cF),this.store.select(s.Zr.IK),this.store.select(s.QI.p5),this.contentSvc.settingsActive$,this.contentSvc.settingsXlHidden$,this.contentSvc.scrollTop$,this.errorSvc.message$]).pipe((0,v.U)(([u,q,tt,nt,et,it,ot])=>({game:u,mod:q,result:tt,settingsActive:nt,settingsXlHidden:et,scrollTop:it,errorMsg:ot}))),this.version=`${r.lw} ${T.N.version}`,this.isResetting=!1,this.showSimplexErr=!1,this.isFixingSimplex=!1,this.simplexErrSub=this.store.select(s.QI.p5).subscribe(u=>this.showSimplexErr=u.resultType===r.xN.Failed),this.tabItems=[{label:"app.list",icon:"fa-solid fa-list",routerLink:"list",queryParamsHandling:"preserve"},{label:"app.flow",icon:"fa-solid fa-diagram-project",routerLink:"flow",queryParamsHandling:"preserve"},{label:"app.matrix",icon:"fa-solid fa-table-cells",routerLink:"matrix",queryParamsHandling:"preserve"}],this.Game=r.lA,this.ItemId=r.bN,this.MatrixResultType=r.xN}ngAfterViewInit(){this.errorSvc.message$.subscribe(()=>this.ref.detectChanges())}tryFixSimplex(){this.isFixingSimplex=!0,setTimeout(()=>{this.store.select(s.Zr.JP).pipe((0,Z.P)()).subscribe(o=>{this.store.dispatch(new s.uP.eX(r.tW.WasmFloat64)),this.store.dispatch(new s.Zr.t0({value:[],def:o?.disabledRecipeIds})),this.showSimplexErr=!1,this.isFixingSimplex=!1})},10)}reset(o){this.isResetting=!0,setTimeout(()=>{this.ngZone.run(()=>{this.errorSvc.message$.next(null),this.router.navigateByUrl(r.dL[o].route),this.store.dispatch(new s.gV.rc),this.isResetting=!1})},10)}}g.\u0275fac=function(o){return new(o||g)(t.Y36(f._s),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(d.F0),t.Y36(M.yh),t.Y36(f.T_))},g.\u0275cmp=t.Xpm({type:g,selectors:[["lab-main"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"sticky","settingsXlHidden"],[4,"ngIf","ngIfElse"],["errorDialog",""],[3,"active","hidden"],[1,"layout-mask",3,"click"],[1,"layout-content"],[1,"px-1","px-sm-4","py-4"],["loading",""],[3,"visible","modal","draggable","resizable","breakpoints","visibleChange"],["pTemplate","header"],[3,"innerText"],[1,"text-end","mt-2"],["pButton","","pRipple","","type","button",1,"mt-2","p-button-outlined",3,"label","click"],["pButton","","pRipple","","type","button",1,"mt-2","ms-2","p-button-outlined",3,"label","loading","click"],["pButton","","pRipple","","type","button",1,"mt-2","ms-2",3,"label","click"],["styleClass","mt-4",3,"header"],[3,"model"],["pTemplate","item"],["pTemplate","footer"],[1,"p-menuitem-icon"],[1,"p-menuitem-text"],[1,"d-flex","align-items-center","justify-content-between"],["notSolved",""],[1,"d-flex","flex-column","align-items-center","mt-5"],[1,"p-dialog-title"],[1,"fa-solid","fa-triangle-exclamation","me-2"],[3,"visible","modal","draggable","resizable","closable","closeOnEscape"],[1,"p-error"],[1,"mt-4"],[1,"text-end","mt-4"],["pButton","","pRipple","","type","button",3,"label","loading","click"],[1,"p-dialog-title","p-error"],[1,"fa-solid","fa-circle-exclamation","me-2"]],template:function(o,e){1&o&&(t.YNc(0,D,5,4,"ng-container",0),t.ALo(1,"async")),2&o&&t.Q6J("ngIf",t.lcZ(1,1,e.vm$))},dependencies:[m.O5,b.Hq,C.Z,y.jx,A.V,d.lC,S.G,I.H,J.d,O.G,N.P,Q.f,m.Ov,L.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.layout-content[_ngcontent-%COMP%]{transition:margin .4s cubic-bezier(.05,.74,.2,.99);margin-left:320px;padding-top:4rem}@media (max-width: 1199.98px){.layout-content[_ngcontent-%COMP%]{margin-left:0;padding-top:6rem}}@media (min-width: 1200px){.layout-content.settings-xl-hidden[_ngcontent-%COMP%]{margin-left:0}}@media (max-width: 1199.98px){.layout-mask.active[_ngcontent-%COMP%]{position:fixed;z-index:3;top:0;left:0;width:100%;height:100%;background-color:var(--maskbg)}}"],changeDetection:0});const W=d.Bz.forChild([{path:"",component:g,children:[{path:"list",loadChildren:()=>i.e(492).then(i.bind(i,7492)).then(n=>n.ListModule)},{path:"flow",loadChildren:()=>i.e(625).then(i.bind(i,1625)).then(n=>n.FlowModule)},{path:"matrix",loadChildren:()=>i.e(370).then(i.bind(i,1370)).then(n=>n.MatrixModule)}]}]);class p{}p.\u0275fac=function(o){return new(o||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[m.ez,_.o,W]})}}]);
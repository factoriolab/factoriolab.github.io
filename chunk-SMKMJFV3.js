import{$ as st,$a as yt,$b as ri,$d as ne,Aa as K,Ad as V,Ae as Di,Ba as Tt,Bb as Jt,Bd as q,Be as ji,Ca as y,Cb as Ye,Cd as X,Ce as $i,Da as f,Dc as vi,De as se,Ea as qt,Fa as Z,Fe as Ai,Ga as z,Ge as Ni,Ha as U,Hd as D,He as zi,I as et,Ia as s,Id as O,Ja as r,Ka as x,Kb as Ce,L as He,La as P,Lb as L,Ma as I,Mb as Yt,Na as b,Oa as l,Ob as Ze,Oc as ct,Pb as ti,Pd as yi,Qb as ei,Rb as ii,Rd as Rt,Sa as Qt,Sb as nt,Ta as Kt,Tb as ni,Tc as Vt,Td as te,Ua as T,Ub as oi,Uc as dt,Ud as Bi,Va as v,Vb as ai,Wa as w,Wb as Y,Wd as ft,X as Ge,Xa as M,Xb as li,Xd as xt,Yb as pi,Yd as Ot,Za as wt,Zb as si,Zd as ee,_ as F,_a as It,_b as ot,_c as bi,_d as ie,a as ze,aa as qe,ac as tt,ad as mt,ae as ht,b as Ue,ba as Ht,bc as ge,ca as A,cb as H,cc as _i,ce as St,db as rt,dc as at,dd as Zt,de as oe,ea as h,eb as G,ec as ci,ee as ki,fa as S,fb as Nt,fd as ut,fe as Ei,gc as di,gd as Ct,ge as Mi,hb as kt,hc as fe,hd as Ti,ib as c,ic as mi,id as xe,ie as Pt,j as Le,ja as At,jb as m,jc as ui,jd as lt,ka as Qe,kb as E,kc as Ci,ke as Vi,lb as _t,ld as wi,le as vt,mb as B,mc as gi,md as Ii,na as Ke,nc as fi,nd as zt,ne as ae,oa as Xe,od as Bt,pa as p,pb as Xt,re as bt,s as me,sb as it,se as le,ta as ue,tb as Et,te as pe,ua as Gt,ub as Je,ue as Ri,vc as xi,ve as Oi,wd as Ut,xa as u,xc as hi,xd as gt,xe as Pi,yc as Si,z as We,za as d,zb as Mt,zd as N,ze as Fi}from"./chunk-DGUNM4KP.js";var Ft=(()=>{let o=class o{static transform(i){return i.itemId??i.recipeObjectiveId??i.recipeId??i.id}transform(i){return o.transform(i)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=A({name:"stepId",type:o,pure:!0});let t=o;return t})();var Lt=(()=>{let o=class o{constructor(){this.contentSvc=F(lt),this.pDropdown=F(St,{self:!0}),this.labDropdownBase=At(),this.setAutoFocusFilter=Et(()=>{let i=this.contentSvc.isMobile();this.pDropdown.autofocusFilter=!i}),this.setStyleClass=Et(()=>{this.pDropdown.styleClass=this.labDropdownBase()})}ngOnInit(){this.pDropdown.appendTo="body",this.pDropdown.filter=!0,this.pDropdown.scrollHeight="40vh",this.pDropdown.panelStyleClass="tooltip"}};o.\u0275fac=function(n){return new(n||o)},o.\u0275dir=Ht({type:o,selectors:[["","labDropdownBase",""]],inputs:{labDropdownBase:[1,"labDropdownBase"]}});let t=o;return t})();var he=(()=>{let o=class o{transform(i){return i}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=A({name:"asStep",type:o,pure:!0});let t=o;return t})();var Se=(()=>{let o=class o{transform(i,n){if(i!=null){let a=fi[n.inserterTarget][n.inserterCapacity]?.find(_=>_.value.gt(i)||_.id===Y.StackInserter);return a==null?null:{id:a.id,value:i.div(a.value)}}return null}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=A({name:"inserterSpeed",type:o,pure:!0});let t=o;return t})();var ve=(()=>{let o=class o{transform(i){return i==null?"":" ".repeat(4-i.length)+i}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=A({name:"leftPad",type:o,pure:!0});let t=o;return t})();var pt=(()=>{let o=class o{static transform(i,n){if(n==null)return i.toFraction();if(n===-2)return Math.round(i.mul(L(100n)).toNumber()).toString();let _=i.toPrecision(n).toString();if(n>0){let C=L(1,Math.pow(10,n));i.gt(L(0n))&&i.lt(C)&&(_=`<${_}`);let g=_.split(".");if(g.length>1){if(g[1].length<n){let k=n-g[1].length;return _+"0".repeat(k)}}else return i.isInteger()?_+" ".repeat(n+1):_+"."+"0".repeat(n)}return _}transform(i,n){return o.transform(i,n)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=A({name:"rate",type:o,pure:!0});let t=o;return t})();var be=(()=>{let o=class o{transform(i,n,a){return a===Y.Pumpjack?`${pt.transform(i.mul(L(100n)),n!=null?Math.max(n-2,0):n)}%`:pt.transform(i,n)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=A({name:"machineRate",type:o,pure:!0});let t=o;return t})();var Te=(()=>{let o=class o{transform(i,n){return n!==nt.CaptainOfIndustry||i!==Y.MineControlTower}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=A({name:"machineShowRate",type:o,pure:!0});let t=o;return t})();var we=(()=>{let o=class o{transform(i,n){return i==null?!1:n!==nt.DysonSphereProgram||i!==Y.MiningMachine}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=A({name:"machineShow",type:o,pure:!0});let t=o;return t})();var Ie=(()=>{let o=class o{transform(i,n,a=!1){if(i==null)return[];let _=i.map(C=>({label:n[C].name,value:C}));return a&&_.unshift({label:"None",value:Y.Module}),_}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=A({name:"options",type:o,pure:!0});let t=o;return t})();var ye=(()=>{let o=class o{transform(i,n,a){switch(a){case ge.GW:return`${pt.transform(i.div(L(1000000n)),n)} GW`;case ge.MW:return`${pt.transform(i.div(L(1000n)),n)} MW`;default:return`${pt.transform(i,n)} kW`}}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=A({name:"power",type:o,pure:!0});let t=o;return t})();var Be=(()=>{let o=class o{constructor(){this.routerSvc=F(Rt)}transform(i,n,a){let _=i;if(_.recipeId){let C=a.adjustedRecipe[_.recipeId];C.isTechnology&&C.productivity&&i.items&&(_=Ue(ze({},i),{items:i.items.div(C.productivity)}))}return this.routerSvc.stepHref(_,n,a.hash)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=A({name:"stepHref",type:o,pure:!0});let t=o;return t})();var rn=["stepsTable"],_n=(t,o)=>o.id,Dt=(t,o)=>o.key,cn=()=>[25,50,100,1e3],De=()=>[],dn=(t,o,e,i,n,a,_,C,g,k,R,$,j)=>({items:t,itemId:o,belts:e,beltId:i,wagons:n,wagonId:a,machines:_,machineId:C,recipeId:g,recipeObjectiveId:k,percent:R,percentOnDest:!0,destId:$,inputs:j}),mn=(t,o,e,i,n,a,_,C,g,k,R,$,j,J)=>({items:t,itemId:o,belts:e,beltId:i,wagons:n,wagonId:a,machines:_,machineId:C,recipeId:g,recipeObjectiveId:k,percent:R,destId:$,destRecipeObjectiveId:j,destIsRecipe:!0,outputs:J}),re=(t,o)=>({step:t,percent:o}),un=(t,o)=>({items:t,itemId:o}),Cn=(t,o,e,i,n,a,_,C,g,k,R,$,j)=>({items:t,itemId:o,belts:e,beltId:i,wagons:n,wagonId:a,machines:_,machineId:C,recipeId:g,recipeObjectiveId:k,percent:R,destId:$,destRecipeObjectiveId:j,destIsRecipe:!0}),gn=(t,o,e,i,n,a,_,C,g)=>({items:t,itemId:o,belts:e,beltId:i,wagons:n,wagonId:a,percent:_,destId:C,destRecipeObjectiveId:g,destIsRecipe:!0}),fn=(t,o,e,i,n,a,_,C,g,k,R,$,j)=>({items:t,itemId:o,belts:e,beltId:i,wagons:n,wagonId:a,machines:_,machineId:C,recipeId:g,recipeObjectiveId:k,percent:R,percentOnDest:!0,destId:$,destRecipeObjectiveId:j}),jt=(t,o)=>({value:t,itemId:o}),xn=(t,o)=>({columnSettings:t,totals:o,type:"belt"}),hn=(t,o)=>({columnSettings:t,totals:o}),Sn=(t,o,e)=>({columnSettings:t,totals:o,modulesTotals:e,type:"machine"}),vn=(t,o,e)=>({columnSettings:t,totals:o,modulesTotals:e,type:"beacon"});function bn(t,o){if(t&1){let e=I();s(0,"button",31),c(1,"translate"),b("click",function(){h(e);let n=l(3);return S(n.resetChecked())}),r()}t&2&&d("pTooltip",m(1,1,"steps.checkedUndoTooltip"))}function Tn(t,o){if(t&1&&(s(0,"th")(1,"div",29),x(2,"i",30),u(3,bn,2,3,"button",21),r()()),t&2){let e=l(2);p(3),f(e.itemsModified().checked||e.recipesModified().checked?3:-1)}}function wn(t,o){t&1&&(s(0,"th"),v(1),c(2,"translate"),r()),t&2&&(p(),w(m(2,1,"options.column.tree")))}function In(t,o){t&1&&x(0,"p-sortIcon",20)}function yn(t,o){if(t&1){let e=I();s(0,"button",31),c(1,"translate"),b("click",function(n){return h(e),l(2).resetExcluded(),S(n.stopImmediatePropagation())}),r()}t&2&&d("pTooltip",m(1,1,"steps.itemsUndoTooltip"))}function Bn(t,o){t&1&&x(0,"p-sortIcon",32)}function kn(t,o){if(t&1){let e=I();s(0,"button",31),c(1,"translate"),b("click",function(n){return h(e),l(3).resetBelts(),S(n.stopImmediatePropagation())}),r()}t&2&&d("pTooltip",m(1,1,"steps.beltsUndoTooltip"))}function En(t,o){if(t&1&&(s(0,"th",22)(1,"div",19)(2,"span"),v(3),c(4,"translate"),r(),u(5,Bn,1,0,"p-sortIcon",32)(6,kn,2,3,"button",21),r()()),t&2){let e=l(2);p(3),w(m(4,3,"options.column.belts")),p(2),f(e.focus()?-1:5),p(),f(e.itemsModified().belts?6:-1)}}function Mn(t,o){t&1&&x(0,"p-sortIcon",33)}function Vn(t,o){if(t&1){let e=I();s(0,"button",31),c(1,"translate"),b("click",function(n){return h(e),l(3).resetWagons(),S(n.stopImmediatePropagation())}),r()}t&2&&d("pTooltip",m(1,1,"steps.wagonsUndoTooltip"))}function Rn(t,o){if(t&1&&(s(0,"th",23)(1,"div",19)(2,"span"),v(3),c(4,"translate"),r(),u(5,Mn,1,0,"p-sortIcon",33)(6,Vn,2,3,"button",21),r()()),t&2){let e=l(2);p(3),w(m(4,3,e.dispRateInfo().wagonsLabel)),p(2),f(e.focus()?-1:5),p(),f(e.itemsModified().wagons?6:-1)}}function On(t,o){t&1&&x(0,"p-sortIcon",25)}function Pn(t,o){if(t&1){let e=I();s(0,"button",31),c(1,"translate"),b("click",function(n){return h(e),l(2).resetMachines(),S(n.stopImmediatePropagation())}),r()}t&2&&d("pTooltip",m(1,1,"steps.machinesUndoTooltip"))}function Fn(t,o){if(t&1){let e=I();s(0,"button",31),c(1,"translate"),b("click",function(){h(e);let n=l(3);return S(n.resetBeacons())}),r()}t&2&&d("pTooltip",m(1,1,"steps.beaconsUndoTooltip"))}function Dn(t,o){if(t&1&&(s(0,"th",26)(1,"div",19)(2,"span"),v(3),c(4,"translate"),r(),u(5,Fn,2,3,"button",21),r()()),t&2){let e=l(2);p(3),w(m(4,2,"options.column.beacons")),p(2),f(e.recipesModified().beacons?5:-1)}}function jn(t,o){t&1&&x(0,"p-sortIcon",34)}function $n(t,o){if(t&1&&(s(0,"th",27)(1,"div",19)(2,"span"),v(3),c(4,"translate"),r(),u(5,jn,1,0,"p-sortIcon",34),r()()),t&2){let e=l(2);p(3),w(m(4,2,"options.column.power")),p(2),f(e.focus()?-1:5)}}function An(t,o){t&1&&x(0,"p-sortIcon",35)}function Nn(t,o){if(t&1&&(s(0,"th",28)(1,"div",19)(2,"span"),v(3),c(4,"translate"),r(),u(5,An,1,0,"p-sortIcon",35),r()()),t&2){let e=l(2);p(3),w(m(4,2,e.dispRateInfo().pollutionLabel)),p(2),f(e.focus()?-1:5)}}function zn(t,o){if(t&1){let e=I();s(0,"th",16)(1,"button",36),c(2,"translate"),b("click",function(){h(e);let n=l(2);return S(n.exportSvc.stepsToCsv(n.steps()))}),r()()}t&2&&(p(),d("pTooltip",m(2,1,"steps.downloadTooltip")))}function Un(t,o){if(t&1){let e=I();s(0,"tr")(1,"th",16)(2,"button",17),c(3,"translate"),b("click",function(){h(e);let n=l();return S(n.contentSvc.showColumns$.next())}),r()(),u(4,Tn,4,1,"th")(5,wn,3,3,"th"),s(6,"th",18)(7,"div",19)(8,"span"),v(9),c(10,"translate"),r(),u(11,In,1,0,"p-sortIcon",20)(12,yn,2,3,"button",21),r()(),u(13,En,7,5,"th",22)(14,Rn,7,5,"th",23),s(15,"th",24)(16,"div",19)(17,"span"),v(18),c(19,"translate"),r(),u(20,On,1,0,"p-sortIcon",25)(21,Pn,2,3,"button",21),r()(),u(22,Dn,6,4,"th",26)(23,$n,6,4,"th",27)(24,Nn,6,4,"th",28)(25,zn,3,3,"th",16),r()}if(t&2){let e=l();p(2),d("pTooltip",m(3,15,"steps.openColumnSettings")),p(2),f(!e.focus()&&e.columnsState().checkbox.show?4:-1),p(),f(!e.focus()&&e.columnsState().tree.show?5:-1),p(4),w(m(10,17,e.dispRateInfo().itemsLabel)),p(2),f(e.focus()?-1:11),p(),f(e.itemsModified().excluded?12:-1),p(),f(e.columnsState().belts.show?13:-1),p(),f(e.columnsState().wagons.show?14:-1),p(4),w(m(19,19,"options.column.machines")),p(2),f(e.focus()?-1:20),p(),f(e.recipesModified().machines?21:-1),p(),f(e.columnsState().beacons.show?22:-1),p(),f(e.columnsState().power.show?23:-1),p(),f(e.columnsState().pollution.show?24:-1),p(),f(e.columnsState().link.show?25:-1)}}function Ln(t,o){if(t&1&&x(0,"div",38),t&2){let e=o.$implicit,i=l();d("id","step_"+i.id+"_"+e.label)}}function Wn(t,o){if(t&1){let e=I();s(0,"td")(1,"div",43)(2,"p-checkbox",44),b("onChange",function(n){h(e);let a=l(),_=l(2);return S(_.changeStepChecked(a,n.checked))}),r()()()}if(t&2){let e=l();p(2),d("binary",!0)("ngModel",e.checked)}}function Hn(t,o){if(t&1&&x(0,"div",51),t&2){let e=o.$implicit,i=o.$index,n=o.$count;K("trail",e)("last",i===n-1)}}function Gn(t,o){if(t&1&&(z(0,Hn,1,4,"div",50,qt),x(2,"div",46)),t&2){let e=l(2),i=l(2);U(i.stepTree()[e.id])}}function qn(t,o){if(t&1&&x(0,"lab-tooltip",54),t&2){let e=l(3);d("id",e.itemId)}}function Qn(t,o){if(t&1){let e=I();s(0,"button",52),c(1,"iconSmClass"),b("click",function(){h(e);let n=l(2),a=l(2);return S(a.setItemExcluded(n.itemId,!a.itemsState()[n.itemId].excluded))}),x(2,"i",53),u(3,qn,1,1,"ng-template",null,4,B),r()}if(t&2){let e=T(4),i=l(2),n=l(2);K("hover-active",n.itemsState()[i.itemId].excluded),d("icon",m(1,4,i.itemId))("pTooltip",e)}}function Kn(t,o){if(t&1&&(s(0,"span"),v(1),r()),t&2){let e=l(3);p(),M("#",e.recipeObjectiveId,"")}}function Xn(t,o){if(t&1&&x(0,"lab-tooltip",56),t&2){let e=l(4);d("id",e.recipeId)}}function Jn(t,o){if(t&1&&u(0,Xn,1,1,"lab-tooltip",56),t&2){let e=l(3);f(e.recipeId?0:-1)}}function Yn(t,o){if(t&1&&(s(0,"i",55),c(1,"iconSmClass"),u(2,Kn,2,1,"span")(3,Jn,1,1,"ng-template",null,4,B),r()),t&2){let e=T(4),i=l(2);y(E(1,4,i.recipeId,"recipe")),d("pTooltip",e),p(2),f(i.recipeObjectiveId!=null?2:-1)}}function Zn(t,o){if(t&1&&(s(0,"td",41)(1,"div",45),u(2,Gn,3,0,"div",46),s(3,"div",47),u(4,Qn,5,6,"button",48)(5,Yn,5,7,"i",49),r()()()),t&2){let e,i=l(),n=l(2),a=T(1);p(2),f(!a.sortField&&((e=n.stepTree()[i.id])!=null&&e.length)?2:-1),p(2),f(i.itemId&&i.recipeObjectiveId==null?4:5)}}function to(t,o){if(t&1&&(s(0,"span",58),v(1),c(2,"rate"),r()),t&2){let e=l(2),i=l(2);p(),M("(+",E(2,1,e.surplus,i.columnsState().items.precision),") ")}}function eo(t,o){if(t&1&&x(0,"lab-tooltip",54),t&2){let e=l(3);d("id",e.itemId)}}function io(t,o){if(t&1){let e=I();s(0,"button",52),c(1,"iconSmClass"),b("click",function(){h(e);let n=l(2),a=l(2);return S(a.setItemExcluded(n.itemId,!a.itemsState()[n.itemId].excluded))}),x(2,"i",53),u(3,eo,1,1,"ng-template",null,4,B),r()}if(t&2){let e=T(4),i=l(2),n=l(2);K("hover-active",n.itemsState()[i.itemId].excluded),d("icon",m(1,4,i.itemId))("pTooltip",e)}}function no(t,o){if(t&1&&(s(0,"td",57),u(1,to,3,4,"span",58),s(2,"span",58),v(3),c(4,"rate"),r()(),s(5,"td",59)(6,"div",19)(7,"span",60),v(8),r(),u(9,io,5,6,"button",48),r()()),t&2){let e,i=l(),n=l(2);p(),f(i.surplus&&i.surplus.nonzero()?1:-1),p(2),w(E(4,4,i.items.sub((e=i.surplus)!==null&&e!==void 0?e:n.rational(0)),n.columnsState().items.precision)),p(5),w(n.data().itemEntities[i.itemId].name),p(),f(!n.preferences().hideDuplicateIcons||!n.columnsState().tree.show?9:-1)}}function oo(t,o){t&1&&x(0,"td",26)}function ao(t,o){if(t&1&&(s(0,"div",39),x(1,"i"),c(2,"iconSmClass"),r()),t&2){let e=l().$implicit;p(),y(m(2,2,e.value))}}function lo(t,o){if(t&1&&u(0,ao,3,4,"div",39),t&2){let e=o.$implicit;f(e?0:-1)}}function po(t,o){if(t&1&&x(0,"lab-tooltip",67),t&2){let e=l().$implicit;d("id",e.value)}}function so(t,o){if(t&1&&(s(0,"div",65),x(1,"i"),c(2,"iconSmClass"),s(3,"div",66),v(4),r(),u(5,po,1,1,"ng-template",null,4,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function ro(t,o){if(t&1&&x(0,"lab-tooltip",67),t&2){let e=l();d("id",e)}}function _o(t,o){if(t&1){let e=I();s(0,"p-dropdown",62),b("onChange",function(n){let a=h(e),_=l(4),C=l(2);return S(C.setBelt(_.itemId,n.value,a))}),u(1,lo,1,1,"ng-template",63)(2,so,7,6,"ng-template",64)(3,ro,1,1,"ng-template",null,4,B),r()}if(t&2){let e=T(4),i=l(6);d("pTooltip",e)("ngModel",o)("options",i.options().belts)}}function co(t,o){if(t&1&&(s(0,"div",39),x(1,"i"),c(2,"iconSmClass"),r()),t&2){let e=o.$implicit;p(),y(m(2,2,e.value))}}function mo(t,o){if(t&1&&x(0,"lab-tooltip",68),t&2){let e=l().$implicit;d("id",e.value)}}function uo(t,o){if(t&1&&(s(0,"div",65),x(1,"i"),c(2,"iconSmClass"),s(3,"div",66),v(4),r(),u(5,mo,1,1,"ng-template",null,4,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function Co(t,o){if(t&1&&x(0,"lab-tooltip",68),t&2){let e=l(3);d("id",e)}}function go(t,o){if(t&1){let e=I();s(0,"p-dropdown",62),b("onChange",function(n){let a=h(e),_=l(5),C=l(2);return S(C.setBelt(_.itemId,n.value,a))}),u(1,co,3,4,"ng-template",63)(2,uo,7,6,"ng-template",64)(3,Co,1,1,"ng-template",null,4,B),r()}if(t&2){let e=T(4),i=l(2),n=l(5);d("pTooltip",e)("ngModel",i)("options",n.options().pipes)}}function fo(t,o){if(t&1&&x(0,"lab-tooltip",68),t&2){let e=l(3);d("id",e)}}function xo(t,o){if(t&1&&(s(0,"i",55),c(1,"iconClass"),u(2,fo,1,1,"ng-template",null,4,B),r()),t&2){let e=T(3),i=l(2);y(m(1,3,i)),d("pTooltip",e)}}function ho(t,o){if(t&1&&u(0,go,5,3,"p-dropdown",61)(1,xo,4,5,"i",49),t&2){let e,i=l(),n=l(5);f((e=n.data().pipeIds.indexOf(i)!==-1&&n.settings().pipeId)?0:1,e)}}function So(t,o){if(t&1&&(s(0,"td",57)(1,"span",58),v(2),c(3,"rate"),r()(),s(4,"td",59)(5,"div",19),u(6,_o,5,3,"p-dropdown",61)(7,ho,2,1),r()()),t&2){let e,i=l(3),n=l(2);p(2),w(E(3,2,i.belts,n.columnsState().belts.precision)),p(4),f((e=n.data().beltIds.indexOf(o)!==-1&&n.settings().beltId)?6:7,e)}}function vo(t,o){if(t&1&&u(0,So,8,5),t&2){let e,i=l(2),n=l(2);f((e=n.itemsState()[i.itemId].beltId)?0:-1,e)}}function bo(t,o){t&1&&x(0,"td",26)}function To(t,o){if(t&1&&u(0,vo,1,1)(1,bo,1,0,"td",26),t&2){let e=l();f(e.itemId&&e.belts?0:1)}}function wo(t,o){if(t&1&&(s(0,"div",39),x(1,"i"),c(2,"iconSmClass"),r()),t&2){let e=l().$implicit;p(),y(m(2,2,e.value))}}function Io(t,o){if(t&1&&u(0,wo,3,4,"div",39),t&2){let e=o.$implicit;f(e?0:-1)}}function yo(t,o){if(t&1&&x(0,"lab-tooltip",69),t&2){let e=l().$implicit;d("id",e.value)}}function Bo(t,o){if(t&1&&(s(0,"div",65),x(1,"i"),c(2,"iconSmClass"),s(3,"div",66),v(4),r(),u(5,yo,1,1,"ng-template",null,4,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function ko(t,o){if(t&1&&x(0,"lab-tooltip",69),t&2){let e=l(2);d("id",e)}}function Eo(t,o){if(t&1){let e=I();s(0,"p-dropdown",62),b("onChange",function(n){let a=h(e),_=l(4),C=l(2);return S(C.setWagon(_.itemId,n.value,a))}),u(1,Io,1,1,"ng-template",63)(2,Bo,7,6,"ng-template",64)(3,ko,1,1,"ng-template",null,4,B),r()}if(t&2){let e=T(4),i=l(),n=l(5);d("pTooltip",e)("ngModel",i)("options",n.options().cargoWagons)}}function Mo(t,o){if(t&1&&(s(0,"div",39),x(1,"i"),c(2,"iconSmClass"),r()),t&2){let e=l().$implicit;p(),y(m(2,2,e.value))}}function Vo(t,o){if(t&1&&u(0,Mo,3,4,"div",39),t&2){let e=o.$implicit;f(e?0:-1)}}function Ro(t,o){if(t&1&&x(0,"lab-tooltip",70),t&2){let e=l().$implicit;d("id",e.value)}}function Oo(t,o){if(t&1&&(s(0,"div",65),x(1,"i"),c(2,"iconSmClass"),s(3,"div",66),v(4),r()(),u(5,Ro,1,1,"ng-template",null,4,B)),t&2){let e=o.$implicit,i=T(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function Po(t,o){if(t&1&&x(0,"lab-tooltip",70),t&2){let e=l(3);d("id",e)}}function Fo(t,o){if(t&1){let e=I();s(0,"p-dropdown",62),b("onChange",function(n){let a=h(e),_=l(5),C=l(2);return S(C.setWagon(_.itemId,n.value,a))}),u(1,Vo,1,1,"ng-template",63)(2,Oo,7,6,"ng-template",64)(3,Po,1,1,"ng-template",null,4,B),r()}if(t&2){let e=T(4),i=l(2),n=l(5);d("pTooltip",e)("ngModel",i)("options",n.options().fluidWagons)}}function Do(t,o){if(t&1&&u(0,Fo,5,3,"p-dropdown",61),t&2){let e,i=l(),n=l(5);f((e=n.data().fluidWagonIds.indexOf(i)!==-1&&n.settings().fluidWagonId)?0:-1,e)}}function jo(t,o){if(t&1&&(s(0,"td",57)(1,"span",58),v(2),c(3,"rate"),r()(),s(4,"td",59)(5,"div",19),u(6,Eo,5,3,"p-dropdown",61)(7,Do,1,1),r()()),t&2){let e,i=l(3),n=l(2);p(2),w(E(3,2,i.wagons,n.columnsState().wagons.precision)),p(4),f((e=n.data().cargoWagonIds.indexOf(o)!==-1&&n.settings().cargoWagonId)?6:7,e)}}function $o(t,o){if(t&1&&u(0,jo,8,5),t&2){let e,i=l(2),n=l(2);f((e=n.itemsState()[i.itemId].wagonId)?0:-1,e)}}function Ao(t,o){t&1&&x(0,"td",26)}function No(t,o){if(t&1&&u(0,$o,1,1)(1,Ao,1,0,"td",26),t&2){let e=l();f(e.itemId&&e.wagons?0:1)}}function zo(t,o){if(t&1&&(s(0,"span",58),v(1),c(2,"machineRate"),r()),t&2){let e=l(),i=l(),n=l(2);p(),w(_t(2,1,i.machines,n.columnsState().machines.precision,e))}}function Uo(t,o){if(t&1&&(s(0,"span"),v(1),r()),t&2){let e=l(4);p(),M("#",e.recipeObjectiveId,"")}}function Lo(t,o){if(t&1&&x(0,"lab-tooltip",56),t&2){let e=l(4);d("id",e.recipeId)}}function Wo(t,o){if(t&1){let e=I();s(0,"button",75),b("click",function(){h(e);let n=l(3),a=l(2);return S(a.addObjective({targetId:n.recipeId,unit:a.ObjectiveUnit.Machines}))}),s(1,"span",76),c(2,"iconSmClass"),u(3,Uo,2,1,"span"),r(),x(4,"i",77),u(5,Lo,1,1,"ng-template",null,4,B),r()}if(t&2){let e=T(6),i=l(3);d("pTooltip",e),p(),y(E(2,4,i.recipeId,"recipe")),p(2),f(i.recipeObjectiveId?3:-1)}}function Ho(t,o){if(t&1&&(s(0,"div",39),x(1,"i"),c(2,"iconSmClass"),r()),t&2){let e=l().$implicit;p(),y(m(2,2,e.value))}}function Go(t,o){if(t&1&&u(0,Ho,3,4,"div",39),t&2){let e=o.$implicit;f(e?0:-1)}}function qo(t,o){if(t&1&&x(0,"lab-tooltip",79),t&2){let e=l().$implicit;d("id",e.value)}}function Qo(t,o){if(t&1&&(s(0,"div",65),x(1,"i"),c(2,"iconSmClass"),s(3,"div",66),v(4),r(),u(5,qo,1,1,"ng-template",null,4,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function Ko(t,o){if(t&1&&x(0,"lab-tooltip",79),t&2){let e=l(3);d("id",e)}}function Xo(t,o){if(t&1){let e=I();s(0,"p-dropdown",78),c(1,"options"),b("onChange",function(n){h(e);let a=l(3),_=l(2);return S(_.changeRecipeField(a,n.value,_.machinesState(),_.data(),_.RecipeField.Machine))}),u(2,Go,1,1,"ng-template",63)(3,Qo,7,6,"ng-template",64)(4,Ko,1,1,"ng-template",null,4,B),r()}if(t&2){let e=T(5),i=l(2),n=l(),a=l(2);d("pTooltip",e)("options",E(1,3,n.recipe.producers,a.data().itemEntities))("ngModel",i)}}function Jo(t,o){if(t&1){let e=I();s(0,"p-inputNumber",80,5),c(2,"translate"),b("onBlur",function(){let n;h(e);let a=T(1),_=l(3),C=l(2);return S(C.changeRecipeField(_,(n=a.value)!==null&&n!==void 0?n:100,C.machinesState(),C.data(),C.RecipeField.Overclock))}),r()}if(t&2){let e=l(3);d("min",1)("max",250)("step",10)("maxFractionDigits",2)("size",3)("pTooltip",m(2,7,"steps.overclockTooltip"))("ngModel",e.recipeSettings.overclock)}}function Yo(t,o){if(t&1){let e=I();s(0,"p-inputNumber",81,6),c(2,"translate"),b("onBlur",function(){let n;h(e);let a=T(1),_=l(3),C=l(2);return S(C.changeRecipeField(_,(n=a.value)!==null&&n!==void 0?n:0,C.machinesState(),C.data(),C.RecipeField.Overclock))}),r()}if(t&2){let e=l(3);d("min",0)("step",1)("maxFractionDigits",0)("showButtons",!0)("size",3)("pTooltip",m(2,7,"steps.modifierCountTooltip"))("ngModel",e.recipeSettings.overclock)}}function Zo(t,o){if(t&1&&x(0,"lab-tooltip",83),t&2){let e=l(2);d("id",e)}}function ta(t,o){if(t&1&&(s(0,"div",19)(1,"i",82),c(2,"iconSmClass"),u(3,Zo,1,1,"ng-template",null,4,B),r()()),t&2){let e=T(4),i=l();p(),y(m(2,3,i)),d("pTooltip",e)}}function ea(t,o){if(t&1&&(s(0,"div",39),x(1,"i"),c(2,"iconSmClass"),r()),t&2){let e=o.$implicit;p(),y(m(2,2,e.value))}}function ia(t,o){if(t&1&&x(0,"lab-tooltip",83),t&2){let e=l().$implicit;d("id",e.value)}}function na(t,o){if(t&1&&(s(0,"div",65),x(1,"i"),c(2,"iconSmClass"),s(3,"div",66),v(4),r(),u(5,ia,1,1,"ng-template",null,4,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function oa(t,o){if(t&1&&x(0,"lab-tooltip",83),t&2){let e=l(2);d("id",e)}}function aa(t,o){if(t&1){let e=I();s(0,"p-dropdown",62),b("onChange",function(n){h(e);let a=l(4),_=l(2);return S(_.changeRecipeField(a,n.value,_.machinesState(),_.data(),_.RecipeField.Fuel))}),u(1,ea,3,4,"ng-template",63)(2,na,7,6,"ng-template",64)(3,oa,1,1,"ng-template",null,4,B),r()}if(t&2){let e,i=T(4),n=l(),a=l(3);d("pTooltip",i)("ngModel",n)("options",(e=a.recipeSettings.fuelOptions)!==null&&e!==void 0?e:H(3,De))}}function la(t,o){if(t&1&&u(0,ta,5,5,"div",19)(1,aa,5,4,"p-dropdown",61),t&2){let e=l(3);f(e.recipe.isBurn?0:1)}}function pa(t,o){if(t&1&&(s(0,"div",39),x(1,"i"),c(2,"iconSmClass"),r()),t&2){let e=l().$implicit;p(),y(m(2,2,e.value))}}function sa(t,o){if(t&1&&u(0,pa,3,4,"div",39),t&2){let e=o.$implicit;f(e?0:-1)}}function ra(t,o){if(t&1&&x(0,"lab-tooltip",86),t&2){let e=l().$implicit;d("id",e.value)}}function _a(t,o){if(t&1&&(s(0,"div",65),x(1,"i"),c(2,"iconSmClass"),s(3,"div",66),v(4),r(),u(5,ra,1,1,"ng-template",null,4,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",e.value!=="module"?i:void 0),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function ca(t,o){if(t&1&&x(0,"lab-tooltip",86),t&2){let e=l().$implicit;d("id",e)}}function da(t,o){if(t&1){let e=I();s(0,"p-dropdown",85),b("onChange",function(n){let a=h(e).$index,_=l(4),C=l(2);return S(C.changeRecipeField(_,n.value,C.machinesState(),C.data(),C.RecipeField.Modules,a))}),u(1,sa,1,1,"ng-template",63)(2,_a,7,6,"ng-template",64)(3,ca,1,1,"ng-template",null,4,B),r()}if(t&2){let e,i=o.$implicit,n=o.$index,a=o.$count,_=T(4),C=l(4);K("last",n===a-1),d("pTooltip",i!=="module"?_:void 0)("options",(e=C.recipeSettings.moduleOptions)!==null&&e!==void 0?e:H(5,De))("ngModel",i)}}function ma(t,o){t&1&&z(0,da,5,6,"p-dropdown",84,qt),t&2&&U(o)}function ua(t,o){if(t&1&&(s(0,"div",19)(1,"span",60),v(2),r(),u(3,Wo,7,7,"button",71)(4,Xo,6,6,"p-dropdown",72),c(5,"machineShow"),u(6,Jo,3,9,"p-inputNumber",73)(7,Yo,3,9,"p-inputNumber",74)(8,la,2,1)(9,ma,2,0),r()),t&2){let e,i,n=l(),a=l(),_=l(2);p(2),w(a.recipe.name),p(),f(!_.preferences().hideDuplicateIcons||a.itemId!=null&&a.itemId!==a.recipeId?3:-1),p(),f(E(5,7,n,_.data().game)?4:-1),p(2),f(_.data().game===_.Game.Satisfactory?6:-1),p(),f(_.data().game===_.Game.FinalFactory?7:-1),p(),f((e=a.recipeSettings==null?null:a.recipeSettings.fuelId)?8:-1,e),p(),f((i=a.recipeSettings==null?null:a.recipeSettings.moduleIds)?9:-1,i)}}function Ca(t,o){if(t&1&&(s(0,"td",57),u(1,zo,3,5,"span",58),c(2,"machineShowRate"),r(),s(3,"td",59),u(4,ua,10,10,"div",19),r()),t&2){let e=l(),i=l(2);p(),f(e.machines&&e.machines.nonzero()&&E(2,2,o,i.data().game)?1:-1),p(3),f(e.recipeId&&e.recipe&&e.recipeSettings?4:-1)}}function ga(t,o){t&1&&x(0,"td",26)}function fa(t,o){if(t&1){let e=I();s(0,"button",91),b("click",function(){let n;h(e);let a=l(4),_=l(2);return S(_.addBeacon((n=a.recipeObjectiveId)!==null&&n!==void 0?n:a.recipeId,a.recipeObjectiveId!=null))}),r()}}function xa(t,o){if(t&1){let e=I();s(0,"button",92),b("click",function(){let n;h(e);let a=l().$index,_=l(3),C=l(2);return S(C.removeBeacon((n=_.recipeObjectiveId)!==null&&n!==void 0?n:_.recipeId,a,_.recipeObjectiveId!=null))}),r()}}function ha(t,o){if(t&1){let e=I();s(0,"lab-input-number",93),c(1,"translate"),b("setValue",function(n){h(e);let a=l().$index,_=l(3),C=l(2);return S(C.changeRecipeField(_,n,C.machinesState(),C.data(),C.RecipeField.BeaconCount,a))}),r()}if(t&2){let e=l().$implicit;d("pTooltip",m(1,3,"steps.beaconEachTooltip"))("value",e.count)("textButtons",!0)}}function Sa(t,o){if(t&1&&(s(0,"div",39),u(1,fa,1,0,"button",88)(2,xa,1,0,"button",89)(3,ha,2,5,"lab-input-number",90),r()),t&2){let e=o.$implicit,i=o.$index;p(),f(i===0?1:2),p(2),f(e.count?3:-1)}}function va(t,o){if(t&1&&(s(0,"div",39),x(1,"i"),c(2,"iconSmClass"),r()),t&2){let e=l().$implicit;p(),y(m(2,2,e.value))}}function ba(t,o){if(t&1&&u(0,va,3,4,"div",39),t&2){let e=o.$implicit;f(e?0:-1)}}function Ta(t,o){if(t&1&&x(0,"lab-tooltip",95),t&2){let e=l().$implicit;d("id",e.value)}}function wa(t,o){if(t&1&&(s(0,"div",65),x(1,"i"),c(2,"iconSmClass"),s(3,"div",66),v(4),r(),u(5,Ta,1,1,"ng-template",null,4,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function Ia(t,o){if(t&1&&x(0,"lab-tooltip",95),t&2){let e=l(2).$implicit;d("id",e.id)}}function ya(t,o){if(t&1){let e=I();s(0,"p-dropdown",78),b("onChange",function(n){h(e);let a=l().$index,_=l(3),C=l(2);return S(C.changeRecipeField(_,n.value,C.machinesState(),C.data(),C.RecipeField.Beacon,a))}),u(1,ba,1,1,"ng-template",63)(2,wa,7,6,"ng-template",64)(3,Ia,1,1,"ng-template",null,4,B),r()}if(t&2){let e=T(4),i=l().$implicit,n=l(5);d("pTooltip",e)("options",n.options().beacons)("ngModel",i.id)}}function Ba(t,o){if(t&1&&(s(0,"div",39),x(1,"i"),c(2,"iconSmClass"),r()),t&2){let e=l().$implicit;p(),y(m(2,2,e.value))}}function ka(t,o){if(t&1&&u(0,Ba,3,4,"div",39),t&2){let e=o.$implicit;f(e?0:-1)}}function Ea(t,o){if(t&1&&x(0,"lab-tooltip",86),t&2){let e=l().$implicit;d("id",e.value)}}function Ma(t,o){if(t&1&&(s(0,"div",65),x(1,"i"),c(2,"iconSmClass"),s(3,"div",66),v(4),r(),u(5,Ea,1,1,"ng-template",null,4,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",e.value!=="module"?i:void 0),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function Va(t,o){if(t&1&&x(0,"lab-tooltip",86),t&2){let e=l().$implicit;d("id",e)}}function Ra(t,o){if(t&1){let e=I();s(0,"p-dropdown",85),b("onChange",function(n){let a=h(e).$index,_=l().$index,C=l(3),g=l(2);return S(g.changeRecipeField(C,n.value,g.machinesState(),g.data(),g.RecipeField.BeaconModules,_,a))}),u(1,ka,1,1,"ng-template",63)(2,Ma,7,6,"ng-template",64)(3,Va,1,1,"ng-template",null,4,B),r()}if(t&2){let e,i=o.$implicit,n=o.$index,a=o.$count,_=T(4),C=l().$implicit;K("last",n===a-1),d("pTooltip",i!=="module"?_:void 0)("options",(e=C.moduleOptions)!==null&&e!==void 0?e:H(5,De))("ngModel",i)}}function Oa(t,o){if(t&1){let e=I();s(0,"lab-input-number",96),c(1,"translate"),b("setValue",function(n){h(e);let a=l().$index,_=l(3),C=l(2);return S(C.changeRecipeField(_,n,C.machinesState(),C.data(),C.RecipeField.BeaconTotal,a))}),r()}if(t&2){let e=l().$implicit;d("pTooltip",m(1,3,"steps.beaconTotalTooltip"))("value",e.total)("textButtons",!0)}}function Pa(t,o){if(t&1&&(s(0,"div",39),u(1,ya,5,3,"p-dropdown",72),z(2,Ra,5,6,"p-dropdown",84,qt),u(4,Oa,2,5,"lab-input-number",94),r()),t&2){let e=o.$implicit;p(),f(e.id?1:-1),p(),U(e.moduleIds),p(2),f(e.total?4:-1)}}function Fa(t,o){if(t&1&&(s(0,"td",87),z(1,Sa,4,2,"div",39,Z),r(),s(3,"td",59),z(4,Pa,5,2,"div",39,Z),r()),t&2){let e=l(2);p(),U(e.recipeSettings.beacons),p(3),U(e.recipeSettings.beacons)}}function Da(t,o){t&1&&x(0,"td",26)}function ja(t,o){if(t&1&&u(0,Fa,6,0)(1,Da,1,0,"td",26),t&2){let e=l();f(e.recipeId&&e.recipeSettings?0:1)}}function $a(t,o){if(t&1&&(s(0,"span",58),v(1),c(2,"power"),r()),t&2){let e=l(2),i=l(2);p(),w(_t(2,1,e.power,i.columnsState().power.precision,i.effectivePowerUnit()))}}function Aa(t,o){if(t&1&&(s(0,"td",42),u(1,$a,3,5,"span",58),r()),t&2){let e=l();p(),f(e.power&&e.power.nonzero()?1:-1)}}function Na(t,o){if(t&1&&(s(0,"span",58),v(1),c(2,"rate"),r()),t&2){let e=l(2),i=l(2);p(),w(E(2,1,e.pollution,i.columnsState().pollution.precision))}}function za(t,o){if(t&1&&(s(0,"td",42),u(1,Na,3,4,"span",58),r()),t&2){let e=l();p(),f(e.pollution&&e.pollution.nonzero()?1:-1)}}function Ua(t,o){if(t&1){let e=I();s(0,"button",100),c(1,"translate"),b("click",function(){h(e);let n=l(2),a=l(2);return S(a.resetStep(n))}),r()}t&2&&d("pTooltip",m(1,1,"steps.stepUndoTooltip"))}function La(t,o){if(t&1&&(s(0,"td",16)(1,"div",39)(2,"a",97),c(3,"stepHref"),x(4,"button",98),c(5,"translate"),r(),u(6,Ua,2,3,"button",99),r()()),t&2){let e=l(),i=l(2);p(2),d("href",_t(3,3,e,i.routerSvc.zipConfig(),i.data()),Xe),p(2),d("pTooltip",m(5,7,"steps.openNewTabTooltip")),p(2),f(e.recipeId&&i.stepsModified().recipes[e.recipeId]||e.itemId&&i.stepsModified().items[e.itemId]||e.recipeObjectiveId&&i.stepsModified().objectives[e.recipeObjectiveId]?6:-1)}}function Wa(t,o){if(t&1&&(s(0,"tr")(1,"td",37),x(2,"div",38),z(3,Ln,1,1,"div",38,_n),s(5,"div",39),x(6,"button",40),c(7,"translate"),r()(),u(8,Wn,3,2,"td")(9,Zn,6,2,"td",41)(10,no,10,7)(11,oo,1,0,"td",26)(12,To,2,1)(13,No,2,1)(14,Ca,5,5)(15,ga,1,0,"td",26)(16,ja,2,1)(17,Aa,2,1,"td",42)(18,za,2,1,"td",42)(19,La,7,9,"td",16),r()),t&2){let e,i=o,n=l().expanded,a=l();p(2),d("id","step_"+i.id),p(),U(a.stepDetails()[i.id].tabs),p(3),K("fa-rotate-90",n),d("pTooltip",m(7,15,n?"steps.hideDetails":"steps.showDetails"))("pRowToggler",i),p(2),f(!a.focus()&&a.columnsState().checkbox.show?8:-1),p(),f(!a.focus()&&a.columnsState().tree.show?9:-1),p(),f(i.itemId&&i.items?10:11),p(2),f(a.columnsState().belts.show?12:-1),p(),f(a.columnsState().wagons.show?13:-1),p(),f((e=i.recipeSettings==null?null:i.recipeSettings.machineId)?14:15,e),p(2),f(a.columnsState().beacons.show?16:-1),p(),f(a.columnsState().power.show?17:-1),p(),f(a.columnsState().pollution.show?18:-1),p(),f(a.columnsState().link.show?19:-1)}}function Ha(t,o){if(t&1&&(u(0,Wa,20,17,"tr"),c(1,"asStep")),t&2){let e,i=o.$implicit;f((e=m(1,1,i))?0:-1,e)}}function Ga(t,o){if(t&1&&(s(0,"a",107),x(1,"span",108),s(2,"span",109),v(3),c(4,"translate"),r()()),t&2){let e=o.$implicit,i=l(3);p(),y(i.stepDetailIcon[e.label]),p(2),w(m(4,3,"options.stepDetailTab."+e.label))}}function qa(t,o){t&1&&P(0)}function Qa(t,o){if(t&1&&(s(0,"tr",101),u(1,qa,1,0,"ng-container",110),s(2,"td",111),v(3),c(4,"translate"),r()()),t&2){l(4);let e=T(9);p(),d("ngTemplateOutlet",e),p(2),M(" ",m(4,2,"steps.sources")," ")}}function Ka(t,o){t&1&&P(0)}function Xa(t,o){if(t&1&&u(0,Ka,1,0,"ng-container",112),t&2){let e=l().$implicit,i=l(2),n=l(2),a=T(11);d("ngTemplateOutlet",a)("ngTemplateOutletContext",kt(2,dn,[i.items==null?null:i.items.mul(e.value),i.itemId,i.belts==null?null:i.belts.mul(e.value),n.itemsState()[i.itemId].beltId,i.wagons==null?null:i.wagons.mul(e.value),n.itemsState()[i.itemId].wagonId,e.step==null?null:e.step.machines,e.step==null||e.step.recipeSettings==null?null:e.step.recipeSettings.machineId,e.step==null?null:e.step.recipeId,e.step==null?null:e.step.recipeObjectiveId,e.value,i.itemId,e.inputs]))}}function Ja(t,o){if(t&1&&u(0,Xa,1,16,"ng-container"),t&2){let e=l(2);f(e.itemId?0:-1)}}function Ya(t,o){t&1&&P(0)}function Za(t,o){if(t&1&&(s(0,"tr",101),u(1,Ya,1,0,"ng-container",110),s(2,"td",111),v(3),c(4,"translate"),r()()),t&2){l(4);let e=T(9);p(),d("ngTemplateOutlet",e),p(2),M(" ",m(4,2,"steps.destinations")," ")}}function tl(t,o){t&1&&P(0)}function el(t,o){if(t&1&&u(0,tl,1,0,"ng-container",112),t&2){let e,i=l().$implicit,n=l(2),a=l(2),_=T(11);d("ngTemplateOutlet",_)("ngTemplateOutletContext",kt(2,mn,[n.items==null?null:n.items.mul(i.value),n.itemId,n.belts==null?null:n.belts.mul(i.value),a.itemsState()[n.itemId].beltId,n.wagons==null?null:n.wagons.mul(i.value),a.itemsState()[n.itemId].wagonId,a.stepDetails()[n.id].outputs.length===1?n.machines==null?null:n.machines.mul(i.value):null,a.stepDetails()[n.id].outputs.length===1?n.recipeSettings==null?null:n.recipeSettings.machineId:null,n.recipeId,n.recipeObjectiveId,i.value,(e=a.stepById()[i.key])==null?null:e.recipeId,(e=a.stepById()[i.key])==null?null:e.recipeObjectiveId,i.key===""]))}}function il(t,o){if(t&1&&u(0,el,1,17,"ng-container"),t&2){let e=l(2);f(e.itemId?0:-1)}}function nl(t,o){if(t&1&&(u(0,Qa,5,4,"tr",101),z(1,Ja,1,1,null,null,Z),u(3,Za,5,4,"tr",101),z(4,il,1,1,null,null,Dt),c(6,"keyvalue")),t&2){let e=l(),i=l(2);f(i.stepDetails()[e.id].outputs.length?0:-1),p(),U(i.stepDetails()[e.id].outputs),p(2),f(e.parents?3:-1),p(),U(E(6,2,e.parents,i.trackSvc.sortByValue))}}function ol(t,o){t&1&&P(0)}function al(t,o){t&1&&P(0)}function ll(t,o){if(t&1&&u(0,al,1,0,"ng-container",112),t&2){let e=l(),i=l().$implicit,n=l(4);l(2);let a=T(11);d("ngTemplateOutlet",a)("ngTemplateOutletContext",G(2,un,e.step.items.mul(e.percent).div(n.recipe.productivity),i.key))}}function pl(t,o){if(t&1&&u(0,ll,1,5,"ng-container"),t&2){let e=o;f(e.step&&e.percent&&e.step.items?0:-1)}}function sl(t,o){if(t&1&&u(0,pl,1,1),t&2){let e,i=o.$implicit,n=l(4),a=l(2);f((e=G(1,re,a.stepByItemEntities()[i.key],n.outputs==null?null:n.outputs[i.key]))?0:-1,e)}}function rl(t,o){if(t&1&&(s(0,"tr",101),u(1,ol,1,0,"ng-container",110),s(2,"td",111),v(3),c(4,"translate"),r()(),z(5,sl,1,4,null,null,Dt),c(7,"keyvalue")),t&2){let e=l(3),i=l(2),n=T(9);p(),d("ngTemplateOutlet",n),p(2),M(" ",m(4,2,"steps.depletion")," "),p(2),U(E(7,4,e.outputs,i.trackSvc.sortByValue))}}function _l(t,o){t&1&&P(0)}function cl(t,o){t&1&&P(0)}function dl(t,o){if(t&1&&u(0,cl,1,0,"ng-container",112),t&2){let e=o,i=l(2),n=l().$implicit,a=l(4),_=l(2),C=T(11);d("ngTemplateOutlet",C)("ngTemplateOutletContext",kt(2,Cn,[i.step.items==null?null:i.step.items.mul(i.percent),n.key,i.step.belts==null?null:i.step.belts.mul(i.percent),_.itemsState()[i.step.itemId].beltId,i.step.wagons==null?null:i.step.wagons.mul(i.percent),_.itemsState()[i.step.itemId].wagonId,e.step==null?null:e.step.machines,e.step==null||e.step.recipeSettings==null?null:e.step.recipeSettings.machineId,e.step==null?null:e.step.recipeId,e.step==null?null:e.step.recipeObjectiveId,i.percent,a.recipeId,a.recipeObjectiveId]))}}function ml(t,o){t&1&&P(0)}function ul(t,o){if(t&1&&u(0,ml,1,0,"ng-container",112),t&2){let e=l(2),i=l().$implicit,n=l(4),a=l(2),_=T(11);d("ngTemplateOutlet",_)("ngTemplateOutletContext",kt(2,gn,[e.step.items==null?null:e.step.items.mul(e.percent),i.key,e.step.belts==null?null:e.step.belts.mul(e.percent),a.itemsState()[e.step.itemId].beltId,e.step.wagons==null?null:e.step.wagons.mul(e.percent),a.itemsState()[e.step.itemId].wagonId,e.percent,n.recipeId,n.recipeObjectiveId]))}}function Cl(t,o){if(t&1&&u(0,dl,1,16,"ng-container")(1,ul,1,12,"ng-container"),t&2){let e,i=l(),n=l(7);f((e=n.stepDetails()[i.step.id].outputs.length===1&&n.stepDetails()[i.step.id].outputs[0])?0:1,e)}}function gl(t,o){if(t&1&&u(0,Cl,2,1),t&2){let e=o;f(e.step.itemId&&e.percent?0:-1)}}function fl(t,o){if(t&1&&u(0,gl,1,1),t&2){let e,i=o.$implicit,n=l(4),a=l(2);f((e=G(1,re,a.stepByItemEntities()[i.key],(e=a.stepByItemEntities()[i.key].parents)==null?null:e[n.id]))?0:-1,e)}}function xl(t,o){if(t&1&&(s(0,"tr",101),u(1,_l,1,0,"ng-container",110),s(2,"td",111),v(3),c(4,"translate"),r()(),z(5,fl,1,4,null,null,Dt),c(7,"keyvalue")),t&2){let e=l(3),i=l(2),n=T(9);p(),d("ngTemplateOutlet",n),p(2),M(" ",m(4,2,"steps.inputs")," "),p(2),U(E(7,4,e.recipe.in,i.trackSvc.sortByValue))}}function hl(t,o){t&1&&P(0)}function Sl(t,o){t&1&&P(0)}function vl(t,o){t&1&&P(0)}function bl(t,o){t&1&&P(0)}function Tl(t,o){if(t&1&&u(0,bl,1,0,"ng-container",112),t&2){let e=l(),i=l().$implicit,n=l(3),a=l(2),_=T(11);d("ngTemplateOutlet",_)("ngTemplateOutletContext",kt(2,fn,[e.step.items==null?null:e.step.items.mul(e.percent),i.key,e.step.belts==null?null:e.step.belts.mul(e.percent),a.itemsState()[e.step.itemId].beltId,e.step.wagons==null?null:e.step.wagons.mul(e.percent),a.itemsState()[e.step.itemId].wagonId,n.machines,n.recipeSettings==null?null:n.recipeSettings.machineId,n.recipeId,n.recipeObjectiveId,e.percent,i.key,n.recipeObjectiveId]))}}function wl(t,o){if(t&1&&u(0,Tl,1,16,"ng-container"),t&2){let e=o;f(e.step.itemId&&e.percent?0:-1)}}function Il(t,o){if(t&1&&u(0,wl,1,1),t&2){let e,i=o.$implicit,n=l(3),a=l(2);f((e=G(1,re,a.stepByItemEntities()[i.key],n.outputs==null?null:n.outputs[i.key]))?0:-1,e)}}function yl(t,o){if(t&1&&(u(0,rl,8,7)(1,xl,8,7),c(2,"keyvalue"),s(3,"tr",101),u(4,hl,1,0,"ng-container",110),s(5,"td",111),v(6),c(7,"translate"),r()(),s(8,"tr",101),u(9,Sl,1,0,"ng-container",110),s(10,"td",57)(11,"span",58),v(12),c(13,"rate"),r()(),s(14,"td",59)(15,"div",39),x(16,"i",113),r()(),x(17,"td",105),r(),s(18,"tr",101),u(19,vl,1,0,"ng-container",110),s(20,"td",111),v(21),c(22,"translate"),r()(),z(23,Il,1,4,null,null,Dt),c(25,"keyvalue")),t&2){let e=l(2),i=l(2),n=T(9);f(i.data().game===i.Game.Factorio&&e.recipe.isMining?0:-1),p(),f(m(2,8,e.recipe.in).length?1:-1),p(3),d("ngTemplateOutlet",n),p(2),M(" ",m(7,10,"steps.time")," "),p(3),d("ngTemplateOutlet",n),p(3),w(E(13,12,e.recipe.time,i.columnsState().items.precision)),p(7),d("ngTemplateOutlet",n),p(2),M(" ",m(22,15,"steps.outputs")," "),p(2),U(E(25,17,e.recipe.out,i.trackSvc.sortByValue))}}function Bl(t,o){if(t&1&&u(0,yl,26,20),t&2){let e=l();f(e.recipe?0:-1)}}function kl(t,o){t&1&&P(0)}function El(t,o){if(t&1&&(u(0,kl,1,0,"ng-container",112),c(1,"rate")),t&2){let e=l(2),i=l().$implicit;l();let n=T(27),a=l(2),_=l(2);d("ngTemplateOutlet",n)("ngTemplateOutletContext",G(5,jt,E(1,2,e.step.items.mul(e.percent).div(a.machines),_.columnsState().items.precision),i.key))}}function Ml(t,o){t&1&&P(0)}function Vl(t,o){if(t&1&&(u(0,Ml,1,0,"ng-container",112),c(1,"rate")),t&2){let e=l(4);l(2);let i=T(27),n=l(2),a=l(2);d("ngTemplateOutlet",i)("ngTemplateOutletContext",G(5,jt,E(1,2,e.step.belts.mul(e.percent).div(n.machines),a.columnsState().belts.precision),o))}}function Rl(t,o){if(t&1&&u(0,Vl,2,8,"ng-container"),t&2){let e,i=l(4).$implicit,n=l(5);f((e=n.itemsState()[i.key].beltId)?0:-1,e)}}function Ol(t,o){if(t&1&&(s(0,"td"),u(1,Rl,1,1),r()),t&2){let e=l(2);p(),f(e.step.belts?1:-1)}}function Pl(t,o){t&1&&P(0)}function Fl(t,o){if(t&1&&(u(0,Pl,1,0,"ng-container",112),c(1,"rate")),t&2){let e=o;l(6);let i=T(27);d("ngTemplateOutlet",i)("ngTemplateOutletContext",G(5,jt,E(1,2,e.value,1),e.id))}}function Dl(t,o){if(t&1&&(u(0,Fl,2,8,"ng-container"),c(1,"inserterSpeed")),t&2){let e,i=l(3),n=l(4),a=l(2);f((e=E(1,1,i.step.items.mul(i.percent).div(n.machines).div(a.dispRateInfo().value),a.settings()))?0:-1,e)}}function jl(t,o){if(t&1&&(s(0,"td"),u(1,Dl,2,4),r()),t&2){let e=l(2),i=l().$implicit,n=l(5);p(),f(n.itemsState()[i.key].beltId!==n.ItemId.Pipe&&e.step.items?1:-1)}}function $l(t,o){if(t&1&&(s(0,"tr")(1,"td"),u(2,El,2,8,"ng-container"),r(),u(3,Ol,2,1,"td")(4,jl,2,1,"td"),r()),t&2){let e=l(),i=l(6);p(2),f(e.step.items?2:-1),p(),f(i.columnsState().belts.show?3:-1),p(),f(i.data().game===i.Game.Factorio?4:-1)}}function Al(t,o){t&1&&u(0,$l,5,3,"tr"),t&2&&f(o.percent?0:-1)}function Nl(t,o){if(t&1&&u(0,Al,1,1),t&2){let e,i=o.$implicit,n=l(3),a=l(2);f((e=G(1,re,a.stepByItemEntities()[i.key],(e=a.stepByItemEntities()[i.key].parents)==null?null:e[n.id]))?0:-1,e)}}function zl(t,o){if(t&1&&x(0,"lab-tooltip",56),t&2){let e=l(4);d("id",e.recipeId)}}function Ul(t,o){if(t&1&&x(0,"lab-tooltip",79),t&2){let e=l();d("id",e)}}function Ll(t,o){if(t&1&&(s(0,"div",19)(1,"i",55),c(2,"iconClass"),u(3,zl,1,1,"ng-template",null,4,B),r(),s(5,"i",55),c(6,"iconClass"),u(7,Ul,1,1,"ng-template",null,4,B),r()()),t&2){let e=T(4),i=l(3);p(),y(E(2,6,i.recipeId,"recipe")),d("pTooltip",e),p(4),y(m(6,9,o)),d("pTooltip",e)}}function Wl(t,o){t&1&&P(0)}function Hl(t,o){if(t&1&&(u(0,Wl,1,0,"ng-container",112),c(1,"rate")),t&2){let e=o;l(5);let i=T(27);d("ngTemplateOutlet",i)("ngTemplateOutletContext",G(5,jt,E(1,2,e.value,1),e.id))}}function Gl(t,o){if(t&1&&(u(0,Hl,2,8,"ng-container"),c(1,"inserterSpeed")),t&2){let e,i=l(2),n=l(6);f((e=E(1,1,i,n.settings()))?0:-1,e)}}function ql(t,o){if(t&1&&(s(0,"td"),u(1,Gl,2,4),r()),t&2){let e=l(2).$implicit,i=l(5);p(),f(i.itemsState()[e.key].beltId!==i.ItemId.Pipe?1:-1)}}function Ql(t,o){t&1&&P(0)}function Kl(t,o){if(t&1&&(u(0,Ql,1,0,"ng-container",112),c(1,"rate")),t&2){let e=o,i=l(2);l(2);let n=T(27),a=l(4);d("ngTemplateOutlet",n)("ngTemplateOutletContext",G(5,jt,E(1,2,i.div(a.beltSpeed()[e]),a.columnsState().belts.precision),e))}}function Xl(t,o){if(t&1&&(s(0,"td"),u(1,Kl,2,8,"ng-container"),r()),t&2){let e,i=l(2).$implicit,n=l(5);p(),f((e=n.itemsState()[i.key].beltId)?1:-1,e)}}function Jl(t,o){t&1&&P(0)}function Yl(t,o){if(t&1&&(s(0,"tr"),u(1,ql,2,1,"td")(2,Xl,2,1,"td"),s(3,"td"),u(4,Jl,1,0,"ng-container",112),c(5,"rate"),r()()),t&2){let e=l().$implicit;l();let i=T(27),n=l(4);p(),f(n.data().game===n.Game.Factorio?1:-1),p(),f(n.columnsState().belts.show?2:-1),p(2),d("ngTemplateOutlet",i)("ngTemplateOutletContext",G(7,jt,E(5,4,o.mul(n.dispRateInfo().value),n.columnsState().items.precision),e.key))}}function Zl(t,o){if(t&1&&u(0,Yl,6,10,"tr"),t&2){let e,i=o.$implicit,n=l(3);f((e=i.value.div(n.recipe.time))?0:-1,e)}}function tp(t,o){if(t&1&&x(0,"lab-tooltip",54),t&2){let e=l().itemId;d("id",e)}}function ep(t,o){if(t&1&&(s(0,"div",117)(1,"span",58),v(2),r(),s(3,"i",55),c(4,"iconClass"),u(5,tp,1,1,"ng-template",null,4,B),r()()),t&2){let e=o.value,i=o.itemId,n=T(6);p(2),w(e),p(),y(m(4,4,i)),d("pTooltip",n)}}function ip(t,o){if(t&1&&(s(0,"div",19)(1,"table",115),z(2,Nl,1,4,null,null,Dt),c(4,"keyvalue"),r(),x(5,"i",116),s(6,"table",115)(7,"tr")(8,"td",57)(9,"span",58),v(10),c(11,"rate"),r()(),s(12,"td"),u(13,Ll,9,11,"div",19),r()(),s(14,"tr")(15,"td",57)(16,"span",58),v(17),c(18,"rate"),r()(),s(19,"td"),x(20,"i",113),r()()(),x(21,"i",116),s(22,"table",115),z(23,Zl,1,1,null,null,Dt),c(25,"keyvalue"),r(),u(26,ep,7,6,"ng-template",null,8,B),r()),t&2){let e,i=l(2),n=l(2);p(2),U(E(4,3,i.recipe.in,n.trackSvc.sortByValue)),p(8),w(E(11,6,n.rational(1),n.columnsState().machines.precision)),p(3),f((e=i.recipeSettings==null?null:i.recipeSettings.machineId)?13:-1,e),p(4),w(E(18,9,n.dispRateInfo().value,n.columnsState().machines.precision)),p(6),U(E(25,12,i.recipe.out,n.trackSvc.sortByValue))}}function np(t,o){t&1&&(x(0,"small",114),c(1,"translate")),t&2&&d("innerHTML",m(1,1,"steps.inserterCountInfo"),Ke)}function op(t,o){if(t&1&&(s(0,"tr",101),x(1,"td"),s(2,"td",105),u(3,ip,28,15,"div",19)(4,np,2,3,"small",114),r()()),t&2){let e=l(),i=l(2);p(3),f(e.recipeId&&e.recipe&&e.machines?3:-1),p(),f(i.data().game===i.Game.Factorio?4:-1)}}function ap(t,o){if(t&1&&x(0,"lab-tooltip",56),t&2){let e=l().$implicit;d("id",e)}}function lp(t,o){if(t&1){let e=I();s(0,"button",123),c(1,"iconSmClass"),b("click",function(){let n=h(e).$implicit,a=l(5);return S(a.toggleRecipe(n,a.recipesState(),a.data()))}),x(2,"i",53),u(3,ap,1,1,"ng-template",null,4,B),r()}if(t&2){let e=o.$implicit,i=T(4),n=l(5);K("hover-active",n.recipesState()[e].excluded),d("icon",E(1,4,e,"recipe"))("pTooltip",i)}}function pp(t,o){if(t&1){let e=I();s(0,"tr",101),x(1,"td"),s(2,"td",105)(3,"div")(4,"div",118),v(5),c(6,"translate"),r(),s(7,"div",119)(8,"small"),v(9),c(10,"translate"),r()(),s(11,"p-checkbox",120),c(12,"translate"),b("onChange",function(){let n=h(e),a=l(4);return S(a.toggleRecipes(n.recipeIds,n.allRecipesIncluded,a.data()))}),r()()()(),s(13,"tr",101),x(14,"td"),s(15,"td",105)(16,"div",121),z(17,lp,5,7,"button",122,Z),r()()()}if(t&2){let e=o;p(5),M(" ",m(6,5,"steps.includedRecipes")," "),p(4),w(m(10,7,"steps.includedRecipesInfo")),p(2),d("ngModel",e.allRecipesIncluded)("binary",!0)("label",m(12,9,"picker.includeAll")),p(6),U(e.recipeIds)}}function sp(t,o){if(t&1&&u(0,pp,19,11),t&2){let e,i=l(),n=l(2);f((e=i.itemId&&n.stepDetails()[i.id])?0:-1,e)}}function rp(t,o){if(t&1){let e=I();s(0,"tr",101)(1,"td",102)(2,"a",103),x(3,"button",104),r()(),s(4,"td",105)(5,"p-tabMenu",106,7),c(7,"stepId"),b("activeItemChange",function(n){let a=h(e),_=l(2);return S(_.setActiveItem(a,n))}),u(8,Ga,5,5,"ng-template",64),r()()(),u(9,nl,7,5)(10,Bl,1,1)(11,op,5,2,"tr",101)(12,sp,1,1)}if(t&2){let e,i=o,n=T(6),a=l(2);p(2),d("relativeTo",a.route)("fragment",i.id),p(3),d("model",a.stepDetails()[i.id].tabs)("activeItem",a.activeItem[m(7,5,i)]),p(4),f((e=n.activeItem==null?null:n.activeItem.label)===a.StepDetailTab.Item?9:e===a.StepDetailTab.Recipe?10:e===a.StepDetailTab.Machine?11:e===a.StepDetailTab.Recipes?12:-1)}}function _p(t,o){if(t&1&&(u(0,rp,13,7),c(1,"asStep")),t&2){let e,i=o.$implicit;f((e=m(1,1,i))?0:-1,e)}}function cp(t,o){t&1&&(s(0,"tr")(1,"td",105)(2,"div",43)(3,"span"),v(4),c(5,"translate"),r()()()()),t&2&&(p(4),w(m(5,1,"steps.emptyMessage")))}function dp(t,o){if(t&1&&u(0,cp,6,3,"tr"),t&2){let e=l();f(e.focus()?0:-1)}}function mp(t,o){t&1&&x(0,"td",26)}function up(t,o){t&1&&x(0,"td")}function Cp(t,o){t&1&&x(0,"td")}function gp(t,o){if(t&1&&u(0,up,1,0,"td")(1,Cp,1,0,"td"),t&2){let e=l(2);f(e.columnsState().checkbox.show?0:-1),p(),f(e.columnsState().tree.show?1:-1)}}function fp(t,o){if(t&1&&(x(0,"td"),u(1,gp,2,2)),t&2){let e=l();p(),f(e.focus()?-1:1)}}function xp(t,o){t&1&&P(0)}function hp(t,o){if(t&1&&x(0,"lab-tooltip",54),t&2){let e=l(2).itemId;d("id",e)}}function Sp(t,o){if(t&1&&x(0,"lab-tooltip",67),t&2){let e=l(3).beltId;d("id",e)}}function vp(t,o){if(t&1&&(s(0,"td",57)(1,"span",58),v(2),c(3,"rate"),r()(),s(4,"td",59)(5,"div",39)(6,"i",55),c(7,"iconClass"),u(8,Sp,1,1,"ng-template",null,4,B),r()()()),t&2){let e=T(9),i=l(2),n=i.belts,a=i.beltId,_=l();p(2),w(E(3,4,n,_.columnsState().belts.precision)),p(4),y(m(7,7,a)),d("pTooltip",e)}}function bp(t,o){if(t&1&&x(0,"lab-tooltip",69),t&2){let e=l(4).wagonId;d("id",e)}}function Tp(t,o){if(t&1&&(s(0,"i",55),c(1,"iconClass"),u(2,bp,1,1,"ng-template",null,4,B),r()),t&2){let e=T(3),i=l(3).wagonId;y(m(1,3,i)),d("pTooltip",e)}}function wp(t,o){if(t&1&&x(0,"lab-tooltip",70),t&2){let e=l(4).wagonId;d("id",e)}}function Ip(t,o){if(t&1&&(s(0,"i",55),c(1,"iconClass"),u(2,wp,1,1,"ng-template",null,4,B),r()),t&2){let e=T(3),i=l(3).wagonId;y(m(1,3,i)),d("pTooltip",e)}}function yp(t,o){if(t&1&&(s(0,"td",57)(1,"span",58),v(2),c(3,"rate"),r()(),s(4,"td",59)(5,"div",39),u(6,Tp,4,5,"i",49)(7,Ip,4,5,"i",49),r()()),t&2){let e=l(2),i=e.wagons,n=e.wagonId,a=l();p(2),w(E(3,2,i,a.columnsState().wagons.precision)),p(4),f(a.data().cargoWagonIds.indexOf(n)!==-1?6:7)}}function Bp(t,o){if(t&1&&(s(0,"span",58),v(1),c(2,"machineRate"),r()),t&2){let e=l(2),i=e.machines,n=e.machineId,a=l();p(),w(_t(2,1,i,a.columnsState().machines.precision,n))}}function kp(t,o){t&1&&(s(0,"div",125),v(1),c(2,"translate"),r()),t&2&&(p(),M(" ",m(2,1,"steps.inputs")," "))}function Ep(t,o){if(t&1&&(s(0,"span"),v(1),r()),t&2){let e=l(3).recipeObjectiveId;p(),M("#",e,"")}}function Mp(t,o){if(t&1&&x(0,"lab-tooltip",56),t&2){let e=l(3).recipeId;d("id",e)}}function Vp(t,o){if(t&1&&x(0,"lab-tooltip",79),t&2){let e=l(3).machineId;d("id",e)}}function Rp(t,o){if(t&1&&(s(0,"i",55),c(1,"iconClass"),u(2,Ep,2,1,"span")(3,Mp,1,1,"ng-template",null,4,B),r(),s(5,"i",55),c(6,"iconClass"),u(7,Vp,1,1,"ng-template",null,4,B),r()),t&2){let e=T(4),i=l(2),n=i.machineId,a=i.recipeId,_=i.recipeObjectiveId;y(E(1,7,a,"recipe")),d("pTooltip",e),p(2),f(_?2:-1),p(3),y(m(6,10,n)),d("pTooltip",e)}}function Op(t,o){t&1&&(s(0,"div",126),x(1,"i",127),r(),s(2,"div",126),x(3,"i",127),r())}function Pp(t,o){t&1&&x(0,"i",128)}function Fp(t,o){t&1&&x(0,"i",128)}function Dp(t,o){if(t&1&&(s(0,"span"),v(1),r()),t&2){let e=l(4).destRecipeObjectiveId;p(),M("#",e,"")}}function jp(t,o){if(t&1&&x(0,"lab-tooltip",129),t&2){let e=l(4),i=e.destId,n=e.destIsRecipe;d("id",i)("type",n?"recipe":"item")}}function $p(t,o){if(t&1&&(s(0,"i",55),c(1,"iconClass"),u(2,Dp,2,1,"span")(3,jp,1,2,"ng-template",null,4,B),r()),t&2){let e=T(4),i=l(3),n=i.destId,a=i.destRecipeObjectiveId,_=i.destIsRecipe;y(E(1,4,n,_?"recipe":"item")),d("pTooltip",e),p(2),f(a?2:-1)}}function Ap(t,o){t&1&&(s(0,"span"),v(1),c(2,"translate"),r()),t&2&&(p(),M(" ",m(2,1,"steps.outputs")," "))}function Np(t,o){if(t&1&&(u(0,Pp,1,0,"i",128),s(1,"span",58),v(2),c(3,"rate"),c(4,"leftPad"),r(),u(5,Fp,1,0,"i",128)(6,$p,5,7,"i",49)(7,Ap,3,3,"span")),t&2){let e=l(2),i=e.percent,n=e.percentOnDest,a=e.destId,_=e.outputs;f(n?0:-1),p(2),M("",m(4,8,E(3,5,i,-2)),"%"),p(3),f(n?-1:5),p(),f(a?6:-1),p(),f(_?7:-1)}}function zp(t,o){if(t&1&&(u(0,xp,1,0,"ng-container",110),s(1,"td",57)(2,"span",58),v(3),c(4,"rate"),r()(),s(5,"td",59)(6,"div",39)(7,"i",55),c(8,"iconClass"),u(9,hp,1,1,"ng-template",null,4,B),r()()(),u(11,vp,10,9)(12,yp,8,5),s(13,"td",57),u(14,Bp,3,5,"span",58),c(15,"machineShowRate"),r(),s(16,"td",124)(17,"div",19),u(18,kp,3,3,"div",125)(19,Rp,9,12),c(20,"machineShow"),u(21,Op,4,0)(22,Np,8,10),r()()),t&2){let e=T(10),i=l(),n=i.items,a=i.itemId,_=i.belts,C=i.beltId,g=i.wagons,k=i.wagonId,R=i.machines,$=i.machineId,j=i.percent,J=i.inputs,W=l(),$t=T(9);d("ngTemplateOutlet",$t),p(3),w(E(4,11,n,W.columnsState().items.precision)),p(4),y(m(8,14,a)),d("pTooltip",e),p(4),f(W.columnsState().belts.show&&_&&C?11:-1),p(),f(W.columnsState().wagons.show&&g&&k?12:-1),p(2),f(R&&R.nonzero()&&E(15,16,$,W.data().game)?14:-1),p(4),f(J?18:-1),p(),f(E(20,19,$,W.data().game)?19:21),p(3),f(j?22:-1)}}function Up(t,o){if(t&1&&(s(0,"tr",101),u(1,zp,23,22),r()),t&2){let e=o.itemId;p(),f(e?1:-1)}}function Lp(t,o){t&1&&x(0,"td")}function Wp(t,o){t&1&&x(0,"td")}function Hp(t,o){t&1&&P(0)}function Gp(t,o){t&1&&P(0)}function qp(t,o){t&1&&P(0)}function Qp(t,o){t&1&&P(0)}function Kp(t,o){if(t&1&&(s(0,"td",130)(1,"span",58),v(2),c(3,"power"),r()()),t&2){let e=l(3);p(2),w(_t(3,1,e.totals().power,e.columnsState().power.precision,e.effectivePowerUnit()))}}function Xp(t,o){if(t&1&&(s(0,"td",130)(1,"span",58),v(2),c(3,"rate"),r()()),t&2){let e=l(3);p(2),w(E(3,1,e.totals().pollution,e.columnsState().pollution.precision))}}function Jp(t,o){t&1&&x(0,"td")}function Yp(t,o){if(t&1&&(s(0,"tr"),x(1,"td"),u(2,Lp,1,0,"td")(3,Wp,1,0,"td"),s(4,"td",26),v(5),c(6,"translate"),r(),u(7,Hp,1,0,"ng-container",112)(8,Gp,1,0,"ng-container",112)(9,qp,1,0,"ng-container",112)(10,Qp,1,0,"ng-container",112)(11,Kp,4,5,"td",130)(12,Xp,4,4,"td",130)(13,Jp,1,0,"td"),r()),t&2){l();let e=T(2),i=l();p(2),f(i.columnsState().checkbox.show?2:-1),p(),f(i.columnsState().tree.show?3:-1),p(2),M(" ",m(6,14,"steps.total")," "),p(2),d("ngTemplateOutlet",e)("ngTemplateOutletContext",G(16,xn,i.columnsState().belts,i.totals().belts)),p(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",G(19,hn,i.columnsState().wagons,i.totals().wagons)),p(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",Nt(22,Sn,i.columnsState().machines,i.totals().machines,i.totals().modules)),p(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",Nt(26,vn,i.columnsState().beacons,i.totals().beacons,i.totals().beaconModules)),p(),f(i.columnsState().power.show?11:-1),p(),f(i.columnsState().pollution.show?12:-1),p(),f(i.columnsState().link.show?13:-1)}}function Zp(t,o){if(t&1&&(s(0,"div",132)(1,"span",58),v(2),c(3,"rate"),r()()),t&2){let e=o.$implicit,i=l(2).columnSettings;p(2),w(E(3,1,e.value,i.precision))}}function ts(t,o){if(t&1&&x(0,"lab-tooltip",129),t&2){let e=l(2).$implicit,i=l(2).type;d("id",e.key)("type",i)}}function es(t,o){if(t&1&&(s(0,"i",137),c(1,"iconClass"),u(2,ts,1,2,"ng-template",null,4,B),r()),t&2){let e=T(3),i=l().$implicit;y(m(1,3,i.key)),d("pTooltip",e)}}function is(t,o){if(t&1&&x(0,"lab-tooltip",56),t&2){let e=l(2).$implicit;d("id",e.key)}}function ns(t,o){if(t&1&&(s(0,"i",137),c(1,"iconClass"),u(2,is,1,1,"ng-template",null,4,B),r()),t&2){let e=T(3),i=l().$implicit;y(E(1,3,i.key,"recipe")),d("pTooltip",e)}}function os(t,o){if(t&1&&u(0,es,4,5,"i",136)(1,ns,4,6,"i",136),t&2){let e=o.$implicit,i=l(4);f(i.data().itemEntities[e.key]?0:1)}}function as(t,o){if(t&1&&x(0,"lab-tooltip",86),t&2){let e=l().$implicit;d("id",e.key)}}function ls(t,o){if(t&1&&(s(0,"div",138)(1,"span",58),v(2),r()(),s(3,"i",137),c(4,"iconClass"),u(5,as,1,1,"ng-template",null,4,B),r()),t&2){let e=o.$implicit,i=T(6);p(2),w(e.value),p(),y(E(4,4,e.key,"item")),d("pTooltip",e.key!=="module"?i:void 0)}}function ps(t,o){if(t&1&&(s(0,"td",131),z(1,Zp,4,4,"div",132,Z),c(3,"keyvalue"),r(),s(4,"td",133)(5,"div",39)(6,"div",134),z(7,os,2,1,null,null,Z),c(9,"keyvalue"),r(),s(10,"div",135),z(11,ls,7,7,null,null,Z),c(13,"keyvalue"),r()()()),t&2){let e=l(),i=e.totals,n=e.modulesTotals,a=l(2);p(),U(E(3,0,i,a.trackSvc.sortByValue)),p(6),U(E(9,3,i,a.trackSvc.sortByValue)),p(4),U(E(13,6,n,a.trackSvc.sortByValue))}}function ss(t,o){if(t&1&&u(0,ps,14,9),t&2){let e=o.columnSettings;f(e.show?0:-1)}}function rs(t,o){if(t&1&&u(0,Yp,14,30,"tr")(1,ss,1,1,"ng-template",null,9,B),t&2){let e=l();f(e.focus()?-1:0)}}var _s=(()=>{let o=class o{constructor(){this.document=F(Je),this.route=F(xi),this.ref=F(Xt),this.contentSvc=F(lt),this.trackSvc=F(te),this.store=F(ct),this.exportSvc=F(yi),this.routerSvc=F(Rt),this.focus=At(!1),this.selectedId=At(),this.steps=it(()=>{let i=[...this.store.selectSignal(O.getSteps)()];if(!this.focus())return i;let a=this.selectedId();return i.filter(_=>_.id===a)}),this.activeItemsEffect=Et(()=>{let i=this.steps(),n=this.store.selectSignal(O.getStepDetails)();this.setActiveItems(i,n)}),this.toggleEffect=Et(()=>{let i=this.focus(),n=this.steps();i&&this.stepsTable().toggleRow(n[0])}),this.machinesState=this.store.selectSignal(X.getMachinesState),this.itemsState=this.store.selectSignal(q.getItemsState),this.itemsModified=this.store.selectSignal(q.getItemsModified),this.stepsModified=this.store.selectSignal(O.getStepsModified),this.totals=this.store.selectSignal(O.getTotals),this.stepDetails=this.store.selectSignal(O.getStepDetails),this.stepById=this.store.selectSignal(O.getStepById),this.stepByItemEntities=this.store.selectSignal(O.getStepByItemEntities),this.stepTree=this.store.selectSignal(O.getStepTree),this.effectivePowerUnit=this.store.selectSignal(O.getEffectivePowerUnit),this.recipesState=this.store.selectSignal(D.getRecipesState),this.recipesModified=this.store.selectSignal(O.getRecipesModified),this.data=this.store.selectSignal(D.getAdjustedDataset),this.columnsState=this.store.selectSignal(V.getColumnsState),this.settings=this.store.selectSignal(V.getSettings),this.dispRateInfo=this.store.selectSignal(V.getDisplayRateInfo),this.options=this.store.selectSignal(V.getOptions),this.beltSpeed=this.store.selectSignal(V.getBeltSpeed),this.preferences=this.store.selectSignal(N.preferencesState),this.sortSteps$=new Le(null),this.stepsTable=Gt.required("stepsTable"),this.activeItem={},this.stepDetailIcon=ui,this.ItemId=Y,this.StepDetailTab=mi,this.Game=nt,this.RecipeField=at,this.EnergyType=Ze,this.ObjectiveUnit=tt,this.rational=L,me([this.sortSteps$.pipe(He()),this.store.select(O.getSteps)]).pipe(vi()).subscribe(([[i,n],a])=>{this.sortSteps(i,n,a)})}ngOnInit(){this.route.fragment.pipe(et(),We(i=>i!=null)).subscribe(i=>{this.fragmentId=i})}ngAfterViewInit(){try{if(this.fragmentId){let[i,n,a]=this.fragmentId.split("_");me([this.store.select(O.getSteps),this.store.select(O.getStepDetails)]).pipe(et()).subscribe(([_,C])=>{let g=_.find(k=>k.id===n);g&&C[g.id].tabs.length&&this.stepsTable&&(this.stepsTable().toggleRow(g),setTimeout(()=>{if(a){let R=this.document.querySelector("#"+this.fragmentId);R&&R.click()}else this.document.querySelector("#"+this.fragmentId)?.scrollIntoView()},10))})}}catch{}}sortSteps(i,n,a){if(n==null||n.order==null||n.field==null)return;let _=n.order,C=n.field;if(i!=null&&i.field===C&&i.order!==_&&_===-1&&this.stepsTable!=null)return n.data?.sort((g,k)=>a.indexOf(g)-a.indexOf(k)),this.stepsTable().sortOrder=0,this.stepsTable().sortField="",this.stepsTable().reset(),this.sortSteps$.next(null);n.data?.sort((g,k)=>(g[C]??L(0n)).sub(k[C]??L(0n)).toNumber()*_)}setActiveItems(i,n){i.forEach(a=>{let _=Ft.transform(a),C=this.activeItem[_],g=n[a.id];if(g!=null)if(C==null)this.activeItem[_]=g.tabs[0];else{let k=g.tabs.find(R=>R.label===C.label);k==null?this.activeItem[_]=g.tabs[0]:this.activeItem[_]=k}})}setActiveItem(i,n){let a=Ft.transform(i);this.activeItem[a]=n}resetStep(i){i.itemId&&this.resetItem(i.itemId),i.recipeObjectiveId?this.resetRecipeObjective(i.recipeObjectiveId):i.recipeId&&this.resetRecipe(i.recipeId)}toggleRecipes(i,n,a){let _=i.map(C=>({id:C,value:n,def:Bt(a.defaults?.excludedRecipeIds,[]).includes(C)}));this.setRecipeExcludedBatch(_)}toggleRecipe(i,n,a){let _=!n[i].excluded,C=Bt(a.defaults?.excludedRecipeIds,[]).some(g=>g===i);this.setRecipeExcluded(i,_,C)}changeRecipeField(i,n,a,_,C,g,k){if(i.recipeId==null)return;let R=i.recipeObjectiveId??i.recipeId,$=i.recipeObjectiveId!=null,j=i.recipeSettings;if(j?.machineId){let J=a.entities[j.machineId];switch(C){case at.Machine:{typeof n=="string"&&a.ids!=null&&this.setMachine(i.recipeObjectiveId??i.recipeId,n,gt.bestMatch(_.recipeEntities[i.recipeId].producers,a.ids),i.recipeObjectiveId!=null);break}case at.Fuel:{typeof n=="string"&&this.setFuel(i.recipeObjectiveId??i.recipeId,n,J.fuelId,i.recipeObjectiveId!=null);break}case at.Modules:{if(J.moduleRankIds!=null&&_!=null&&typeof n=="string"&&g!=null&&j.moduleIds!=null){let W=_.machineEntities[j.machineId],$t=L(j.moduleIds.length),_e=gt.moduleOptions(W,i.recipeId,_),ce=gt.defaultModules(_e,J.moduleRankIds,$t),de=this.generateModules(g,n,j.moduleIds);this.setModules(R,de,ce,$)}break}case at.BeaconCount:{if(n instanceof Ce&&g!=null){let W=J.beaconCount;this.setBeaconCount(R,g,n,W,$)}break}case at.Beacon:{if(typeof n=="string"&&g!=null){let W=J.beaconId;this.setBeacon(R,g,n,W,$)}break}case at.BeaconModules:{if(J.beaconModuleRankIds!=null&&typeof n=="string"&&g!=null&&k!=null){let W=j.beacons?.[g];if(W?.id!=null&&W?.moduleIds!=null){let $t=_.beaconEntities[W.id],_e=L(W.moduleIds.length),ce=gt.moduleOptions($t,i.recipeId,_),de=gt.defaultModules(ce,J.beaconModuleRankIds,_e),Qi=this.generateModules(k,n,W.moduleIds);this.setBeaconModules(R,g,Qi,de,$)}}break}case at.BeaconTotal:{n instanceof Ce&&g!=null&&this.setBeaconTotal(R,g,n,$);break}case at.Overclock:{if(typeof n=="number"){let W=J.overclock;this.setOverclock(R,L(n),W,$)}break}}}}generateModules(i,n,a){let _=[...a];for(let C=i;C<_.length;C++)_[C]=n;return _}changeStepChecked(i,n){i.itemId!=null?this.setItemChecked(i.itemId,n):i.recipeObjectiveId!=null?this.setRecipeChecked(i.recipeObjectiveId,n,!0):i.recipeId!=null&&this.setRecipeChecked(i.recipeId,n)}setRows(i){this.store.dispatch(new N.SetRowsAction(i))}setItemExcluded(i,n){this.store.dispatch(new q.SetExcludedAction({id:i,value:n}))}setItemChecked(i,n){this.store.dispatch(new q.SetCheckedAction({id:i,value:n}))}setBelt(i,n,a){this.store.dispatch(new q.SetBeltAction({id:i,value:n,def:a}))}setWagon(i,n,a){this.store.dispatch(new q.SetWagonAction({id:i,value:n,def:a}))}setRecipeExcluded(i,n,a){this.store.dispatch(new D.SetExcludedAction({id:i,value:n,def:a}))}setRecipeExcludedBatch(i){this.store.dispatch(new D.SetExcludedBatchAction(i))}addObjective(i){this.store.dispatch(new O.AddAction(i))}setMachine(i,n,a,_=!1){let C=_?O.SetMachineAction:D.SetMachineAction;this.store.dispatch(new C({id:i,value:n,def:a}))}setFuel(i,n,a,_=!1){let C=_?O.SetFuelAction:D.SetFuelAction;this.store.dispatch(new C({id:i,value:n,def:a}))}setModules(i,n,a,_=!1){let C=_?O.SetModulesAction:D.SetModulesAction;this.store.dispatch(new C({id:i,value:n,def:a}))}addBeacon(i,n=!1){let a=n?O.AddBeaconAction:D.AddBeaconAction;this.store.dispatch(new a(i))}removeBeacon(i,n,a=!1){let _=a?O.RemoveBeaconAction:D.RemoveBeaconAction;this.store.dispatch(new _({id:i,value:n}))}setBeaconCount(i,n,a,_,C=!1){let g=C?O.SetBeaconCountAction:D.SetBeaconCountAction;this.store.dispatch(new g({id:i,index:n,value:a,def:_}))}setBeacon(i,n,a,_,C=!1){let g=C?O.SetBeaconAction:D.SetBeaconAction;this.store.dispatch(new g({id:i,index:n,value:a,def:_}))}setBeaconModules(i,n,a,_,C=!1){let g=C?O.SetBeaconModulesAction:D.SetBeaconModulesAction;this.store.dispatch(new g({id:i,index:n,value:a,def:_}))}setBeaconTotal(i,n,a,_=!1){let C=_?O.SetBeaconTotalAction:D.SetBeaconTotalAction;this.store.dispatch(new C({id:i,index:n,value:a}))}setOverclock(i,n,a,_=!1){let C=_?O.SetOverclockAction:D.SetOverclockAction;this.store.dispatch(new C({id:i,value:n,def:a}))}setRecipeChecked(i,n,a=!1){let _=a?O.SetCheckedAction:D.SetCheckedAction;this.store.dispatch(new _({id:i,value:n}))}resetItem(i){this.store.dispatch(new q.ResetItemAction(i))}resetRecipe(i){this.store.dispatch(new D.ResetRecipeAction(i))}resetRecipeObjective(i){this.store.dispatch(new O.ResetObjectiveAction(i))}resetChecked(){this.store.dispatch(new q.ResetCheckedAction)}resetExcluded(){this.store.dispatch(new q.ResetExcludedAction)}resetBelts(){this.store.dispatch(new q.ResetBeltsAction)}resetWagons(){this.store.dispatch(new q.ResetWagonsAction)}resetMachines(){this.store.dispatch(new D.ResetMachinesAction)}resetBeacons(){this.store.dispatch(new D.ResetBeaconsAction)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=st({type:o,selectors:[["lab-steps"]],viewQuery:function(n,a){n&1&&Qt(a.stepsTable,rn,5),n&2&&Kt()},inputs:{focus:[1,"focus"],selectedId:[1,"selectedId"]},decls:13,vars:10,consts:[["stepsTable",""],["emptyCol2",""],["leftPad",""],["detailRow",""],["tooltip",""],["overclockInput",""],["duplicatorsInput",""],["expandTabMenu",""],["machineValueCell",""],["totalCell",""],["dataKey","id","styleClass","p-datatable-sm",3,"rowsChange","sortFunction","rowTrackBy","value","customSort","rowExpandMode","defaultSortOrder","paginator","rows","rowsPerPageOptions","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],["pTemplate","footer"],[1,"w-0","px-1"],["pButton","","pRipple","","type","button","icon","fa-solid fa-table-columns",1,"p-button-outlined","p-button-rounded",3,"click","pTooltip"],["colspan","2","pSortableColumn","items"],[1,"d-flex","align-items-center"],["field","items"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left",1,"ms-2","p-button-text","p-button-rounded",3,"pTooltip"],["colspan","2","pSortableColumn","belts"],["colspan","2","pSortableColumn","wagons"],["colspan","2","pSortableColumn","machines"],["field","machines"],["colspan","2"],["pSortableColumn","power"],["pSortableColumn","pollution"],[1,"d-flex","align-items-center","justify-content-center"],[1,"fa-solid","fa-square-check"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left",1,"ms-2","p-button-text","p-button-rounded",3,"click","pTooltip"],["field","belts"],["field","wagons"],["field","power"],["field","pollution"],["pButton","","pRipple","","type","button","icon","fa-solid fa-file-arrow-down","tooltipPosition","left",1,"p-button-outlined","p-button-rounded",3,"click","pTooltip"],[1,"w-0","px-1","position-relative"],[1,"fragment",3,"id"],[1,"d-flex"],["pButton","","pRipple","","type","button","icon","fa-solid fa-angle-right",1,"p-button-text","p-button-rounded","transition-ease",3,"pTooltip","pRowToggler"],[1,"overflow-hidden","px-1","py-0"],[1,"text-end"],[1,"d-flex","justify-content-center"],[3,"onChange","binary","ngModel"],[1,"d-flex","align-items-center","links"],[1,"indent"],[1,"icon"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"hover-active","icon","pTooltip"],[3,"class","pTooltip"],[1,"connect",3,"trail","last"],[1,"connect"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"click","icon","pTooltip"],[1,"hover-icon","fa-solid","fa-eye-slash"],[3,"id"],[3,"pTooltip"],["type","recipe",3,"id"],[1,"w-0","text-end"],[1,"monospace"],[1,"ps-0"],[1,"find-text"],["labDropdownBase","icon",3,"pTooltip","ngModel","options"],["labDropdownBase","icon",3,"onChange","pTooltip","ngModel","options"],["pTemplate","selectedItem"],["pTemplate","item"],[1,"d-flex","align-items-center","py-2","w-100","h-100",3,"pTooltip"],[1,"ms-3","text-truncate"],["type","belt",3,"id"],["type","pipe",3,"id"],["type","cargo-wagon",3,"id"],["type","fluid-wagon",3,"id"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"pTooltip"],["labDropdownBase","icon",3,"pTooltip","options","ngModel"],["suffix","%","inputStyleClass","text-end",3,"min","max","step","maxFractionDigits","size","pTooltip","ngModel"],["inputStyleClass","text-end","incrementButtonClass","p-button-text","decrementButtonClass","p-button-text",3,"min","step","maxFractionDigits","showButtons","size","pTooltip","ngModel"],["pButton","","pRipple","","type","button",1,"hover-action","p-button-text",3,"click","pTooltip"],[1,"p-button-icon"],[1,"hover-icon","fa-solid","fa-circle-plus"],["labDropdownBase","icon",3,"onChange","pTooltip","options","ngModel"],["type","machine",3,"id"],["suffix","%","inputStyleClass","text-end",3,"onBlur","min","max","step","maxFractionDigits","size","pTooltip","ngModel"],["inputStyleClass","text-end","incrementButtonClass","p-button-text","decrementButtonClass","p-button-text",3,"onBlur","min","step","maxFractionDigits","showButtons","size","pTooltip","ngModel"],[1,"padded",3,"pTooltip"],["type","fuel",3,"id"],["labDropdownBase","icon","tooltipPosition","top",1,"module-dropdown",3,"last","pTooltip","options","ngModel"],["labDropdownBase","icon","tooltipPosition","top",1,"module-dropdown",3,"onChange","pTooltip","options","ngModel"],["type","module",3,"id"],[1,"w-0","pe-0"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-text","p-button-rounded"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-text","p-button-rounded"],["tooltipPosition","left","width","2.5rem",1,"text-end",3,"pTooltip","value","textButtons"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-text","p-button-rounded",3,"click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-text","p-button-rounded",3,"click"],["tooltipPosition","left","width","2.5rem",1,"text-end",3,"setValue","pTooltip","value","textButtons"],["width","3rem",1,"text-end",3,"pTooltip","value","textButtons"],["type","beacon",3,"id"],["width","3rem",1,"text-end",3,"setValue","pTooltip","value","textButtons"],["target","_blank",1,"text-decoration-none",3,"href"],["pButton","","pRipple","","type","button","icon","fa-solid fa-arrow-up-right-from-square","tooltipPosition","left",1,"p-button-text","p-button-rounded",3,"pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left","tooltipPosition","left",1,"p-button-text","p-button-rounded",3,"pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-rotate-left","tooltipPosition","left",1,"p-button-text","p-button-rounded",3,"click","pTooltip"],[1,"detail"],[1,"px-1"],["routerLink",".","queryParamsHandling","preserve",1,"text-decoration-none",3,"relativeTo","fragment"],["pButton","","pRipple","","type","button","icon","fa-solid fa-link",1,"p-button-text","p-button-rounded"],["colspan","100"],[3,"activeItemChange","model","activeItem"],[1,"p-menuitem-link"],[1,"p-menuitem-icon"],[1,"p-menuitem-text"],[4,"ngTemplateOutlet"],["colspan","100",1,"fw-bold"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"lab-icon","time"],[3,"innerHTML"],[1,"mw-0"],[1,"fa-solid","fa-arrow-right","mx-3"],[1,"d-flex","align-items-center","justify-content-end"],[1,"fw-bold"],[1,"mb-2"],[3,"onChange","ngModel","binary","label"],[1,"d-flex","flex-wrap"],["pButton","","pRipple","","type","button",1,"p-button-text","hover-action","me-2",3,"hover-active","icon","pTooltip"],["pButton","","pRipple","","type","button",1,"p-button-text","hover-action","me-2",3,"click","icon","pTooltip"],["colspan","100",1,"p-0"],[1,"position-absolute"],[1,"d-flex","invisible"],[1,"lab-icon"],[1,"m-1","p-2","fa-solid","fa-arrow-right"],[3,"id","type"],[1,"text-end","inherit"],[1,"w-0","text-end","inherit"],[1,"py-2","icon-height"],[1,"ps-0","inherit"],[1,"d-flex","flex-column","justify-content-center"],[1,"modules-column"],[1,"d-block",3,"class","pTooltip"],[1,"d-block",3,"pTooltip"],[1,"p-2","icon-height","text-end"]],template:function(n,a){if(n&1){let _=I();s(0,"p-table",10,0),b("rowsChange",function(g){return h(_),S(a.setRows(g))})("sortFunction",function(g){return h(_),S(a.sortSteps$.next(g))}),u(2,Un,26,21,"ng-template",11)(3,Ha,2,3,"ng-template",12)(4,_p,2,3,"ng-template",13)(5,dp,1,1,"ng-template",14)(6,mp,1,0,"ng-template",null,1,B)(8,fp,2,1,"ng-template",null,2,B)(10,Up,2,1,"ng-template",null,3,B)(12,rs,3,1,"ng-template",15),r()}n&2&&d("rowTrackBy",a.trackSvc.trackStep)("value",a.steps())("customSort",!0)("rowExpandMode",a.focus()?"single":"multiple")("defaultSortOrder",-1)("paginator",!a.focus()&&!a.preferences().disablePaginator)("rows",a.preferences().rows)("rowsPerPageOptions",H(9,cn))("showCurrentPageReport",!0)},dependencies:[Mt,ut,Ct,mt,Si,ht,xt,Ot,St,ne,ft,oe,ki,Mi,Ei,Ai,Pt,bt,Lt,Jt,dt,Vi,vt,he,Se,ve,be,Te,we,Ie,ye,pt,Be,Ft],styles:[".links[_ngcontent-%COMP%]{height:50px}.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%]{position:relative;height:100vh;margin-left:16px}.links[_ngcontent-%COMP%]   .connect.last[_ngcontent-%COMP%], .links[_ngcontent-%COMP%]   .connect.trail[_ngcontent-%COMP%]{border-left:2px dotted var(--text-color-secondary)}.links[_ngcontent-%COMP%]   .connect.last[_ngcontent-%COMP%]:not(.trail){margin-bottom:50vh;height:50vh}.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%] + .connect[_ngcontent-%COMP%]{margin-left:24px}@media (max-width: 1199.98px){.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%]{margin-left:8px}.links[_ngcontent-%COMP%]   .connect[_ngcontent-%COMP%] + .connect[_ngcontent-%COMP%]{margin-left:16px}}.links[_ngcontent-%COMP%]   .indent[_ngcontent-%COMP%]{margin-left:0;border-top:2px dotted var(--text-color-secondary);width:8px}.links[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px}[_nghost-%COMP%]     .p-dropdown:not(:hover):not(:focus):not(.ng-invalid), [_nghost-%COMP%]     .p-inputtext:not(:hover):not(:focus):not(.ng-invalid){border-color:transparent;background-color:transparent}[_nghost-%COMP%]     .module-dropdown:not(.last){margin-right:-.5rem}[_nghost-%COMP%]     .module-dropdown:not(.last) .p-dropdown{border-right-color:transparent;border-top-right-radius:0;border-bottom-right-radius:0}[_nghost-%COMP%]     .module-dropdown:hover~.module-dropdown .lab-icon.sm{opacity:.3}[_nghost-%COMP%]     .module-dropdown:hover~.module-dropdown:not(.last) .p-dropdown{border-top-color:var(--primary-color);border-bottom-color:var(--primary-color)}[_nghost-%COMP%]     .module-dropdown:hover~.module-dropdown.last .p-dropdown{border-color:var(--primary-color);border-left-color:transparent}tr.detail[_ngcontent-%COMP%]{background-color:var(--surface-ground)}[_nghost-%COMP%]     tr.detail .p-tabmenu .p-tabmenu-nav .p-tabmenuitem:not(.p-highlight) .p-menuitem-link{background-color:transparent}.icon-height[_ngcontent-%COMP%]{min-height:32px}.modules-column[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;margin:auto}.fragment[_ngcontent-%COMP%]{position:absolute;top:-10rem;visibility:hidden}"],changeDetection:0});let t=o;return t})();var Wt=(()=>{let o=class o{onMousedown(i){i.stopPropagation()}onTouchStart(i){i.stopPropagation()}};o.\u0275fac=function(n){return new(n||o)},o.\u0275dir=Ht({type:o,selectors:[["","labNoDrag",""]],hostBindings:function(n,a){n&1&&b("mousedown",function(C){return a.onMousedown(C)})("touchstart",function(C){return a.onTouchStart(C)})}});let t=o;return t})();function us(t,o){if(t&1&&(s(0,"span",27),v(1),r()),t&2){let e=l(2).$implicit,i=l();p(),w(i.data().recipeEntities[e.targetId].name)}}function Cs(t,o){if(t&1){let e=I();s(0,"button",25),c(1,"translate"),b("click",function(){h(e);let n=T(8),a=l().$implicit,_=l();return S(n.clickOpen("recipe",_.recipeIds(),a.targetId))}),s(2,"i",26),c(3,"iconSmClass"),s(4,"span"),v(5),r()(),u(6,us,2,1,"span",27),r(),s(7,"lab-picker",18,4),c(9,"translate"),b("selectId",function(n){h(e);let a=l().$implicit,_=l();return S(_.setTarget(a.id,n))}),r()}if(t&2){let e=l().$implicit,i=l();d("pTooltip",m(1,6,"objectives.selectARecipe")),p(2),y(E(3,8,e.targetId,"recipe")),p(3),M("#",e.id,""),p(),f(i.contentSvc.isMobile()?-1:6),p(),d("header",m(9,11,"objectives.selectARecipe"))}}function gs(t,o){if(t&1){let e=I();s(0,"button",28),c(1,"iconSmClass"),c(2,"translate"),b("click",function(){h(e);let n=T(4),a=l().$implicit,_=l();return S(n.clickOpen("item",_.itemIds(),a.targetId))}),r(),s(3,"lab-picker",18,5),c(5,"translate"),b("selectId",function(n){h(e);let a=l().$implicit,_=l();return S(_.setTarget(a.id,n))}),r()}if(t&2){let e=l().$implicit,i=l();d("icon",m(1,4,e.targetId))("label",i.contentSvc.isMobile()?"":i.data().itemEntities[e.targetId].name)("pTooltip",m(2,6,"objectives.selectAnItem")),p(3),d("header",m(5,8,"objectives.selectAnItem"))}}function fs(t,o){if(t&1){let e=I();s(0,"p-dropdown",23),c(1,"translate"),b("onChange",function(n){h(e);let a=l().$implicit,_=l(),C=T(23),g=T(26);return S(_.changeUnit(a,n.value,C,g))}),r()}if(t&2){let e=l().$implicit,i=l();d("tooltip",m(1,3,"objectives.unitTooltip"))("options",i.rateUnitOptions())("ngModel",e.unit)}}function xs(t,o){if(t&1){let e=I();s(0,"div",19),x(1,"button",20),u(2,Cs,10,13)(3,gs,6,10),s(4,"lab-input-number",21),c(5,"translate"),c(6,"translate"),c(7,"translate"),b("setValue",function(n){let a=h(e).$implicit,_=l();return S(_.setValue(a.id,n))}),r(),u(8,fs,2,5,"p-dropdown",22),s(9,"p-dropdown",23),c(10,"translate"),b("onChange",function(n){let a=h(e).$implicit,_=l();return S(_.setType(a.id,n.value))}),r(),s(11,"button",24),c(12,"translate"),b("click",function(){let n=h(e).$implicit,a=l();return S(a.removeObjective(n.id))}),r()()}if(t&2){let e=o.$implicit,i=l();p(2),f(e.unit===i.ObjectiveUnit.Machines?2:3),p(2),d("pTooltip",e.type===i.ObjectiveType.Maximize?i.maximizeType()===i.MaximizeType.Weight?m(5,9,"objectives.valueWeightTooltip"):m(6,11,"objectives.valueRatioTooltip"):m(7,13,"objectives.valueTooltip"))("hideButtons",i.contentSvc.isMobile())("value",e.value),p(4),f(e.type!==i.ObjectiveType.Maximize?8:-1),p(),d("tooltip",m(10,15,"objectives.typeTooltip"))("options",i.objectiveTypeOptions)("ngModel",e.type),p(2),d("pTooltip",m(12,17,"objectives.removeTooltip"))}}function hs(t,o){if(t&1&&x(0,"lab-tooltip",35),t&2){let e=l(2);d("id",e)}}function Ss(t,o){if(t&1){let e=I();s(0,"div")(1,"div",30)(2,"span",31),v(3),c(4,"translate"),r(),x(5,"i",32),c(6,"iconSmClass"),s(7,"span",33),v(8),r(),u(9,hs,1,1,"ng-template",null,6,B),r(),s(11,"button",34),c(12,"translate"),b("click",function(){h(e);let n=l(),a=l();return S(a.addRecipeLimit(n))}),r()()}if(t&2){let e=T(10),i=l(),n=l();p(3),w(m(4,6,"objectives.errorSimplexUnboundedRecipe")),p(2),y(E(6,8,i,"recipe")),d("pTooltip",e),p(3),w(n.data().recipeEntities[i].name),p(3),d("label",m(12,11,"objectives.errorSimplexUnboundedAddRecipeLimit"))}}function vs(t,o){t&1&&(s(0,"p-messages",16),u(1,Ss,13,13,"ng-template",29),r())}function bs(t,o){if(t&1&&x(0,"p-messages",17),t&2){let e=l();d("value",e.messages())("closable",!1)("escape",!1)}}var Ts=(()=>{let o=class o{constructor(){this.store=F(ct),this.translateSvc=F(Vt),this.contentSvc=F(lt),this.trackSvc=F(te),this._objectives=this.store.selectSignal(O.getObjectives),this.result=this.store.selectSignal(O.getMatrixResult),this.itemsState=this.store.selectSignal(q.getItemsState),this.recipesState=this.store.selectSignal(D.getRecipesState),this.itemIds=this.store.selectSignal(D.getAvailableItems),this.data=this.store.selectSignal(D.getAdjustedDataset),this.maximizeType=this.store.selectSignal(V.getMaximizeType),this.beltSpeed=this.store.selectSignal(V.getBeltSpeed),this.dispRateInfo=this.store.selectSignal(V.getDisplayRateInfo),this.rateUnitOptions=this.store.selectSignal(V.getObjectiveUnitOptions),this.recipeIds=this.store.selectSignal(V.getAvailableRecipes),this.paused=this.store.selectSignal(N.getPaused),this.objectives=it(()=>[...this._objectives()]),this.messages=it(()=>this.getMessages(this._objectives(),this.result(),this.itemsState(),this.recipesState())),this.objectiveTypeOptions=ri,this.displayRateOptions=Yt,this.MaximizeType=pi,this.ObjectiveUnit=tt,this.ObjectiveType=ot}getMessages(i,n,a,_){if(n.resultType===fe.Paused)return[{severity:"info",detail:this.translateSvc.instant("objectives.pausedMessage")}];if(n.resultType!==fe.Failed)return[];if(n.simplexStatus==="unbounded"){let C=i.filter(g=>g.type===ot.Maximize);return C.length&&i.every(g=>g.type!==ot.Limit)?this.buildErrorMessages("objectives.errorUnbounded","objectives.errorNoLimits",n):C.some(g=>g.unit===tt.Machines?_[g.targetId].excluded:a[g.targetId].excluded)?this.buildErrorMessages("objectives.errorUnbounded","objectives.errorMaximizeExcluded",n):this.buildErrorMessages("objectives.errorUnbounded","objectives.errorUnboundedDetail",n)}else return n.simplexStatus==="no_feasible"?this.buildErrorMessages("objectives.errorInfeasible","objectives.errorInfeasibleDetail",n):this.buildErrorMessages("objectives.error","objectives.errorDetail",n)}buildErrorMessages(i,n,a){return[{severity:"error",summary:this.translateSvc.instant(i),detail:`${this.translateSvc.instant(n)} ${this.translateSvc.instant("objectives.errorSimplexInfo",{returnCode:a.returnCode??"unknown",simplexStatus:a.simplexStatus??"unknown"})}`}]}setObjectiveOrder(i){this.setOrder(i.map(n=>n.id))}changeUnit(i,n,a,_){let C=this.data();if(n===tt.Machines){if(i.unit!==tt.Machines){let g=C.itemRecipeIds[i.targetId],k=R=>this.convertItemsToMachines(i,R,C);g.length===1?k(g[0]):(_.selectId.pipe(et()).subscribe(R=>k(R)),_.clickOpen("recipe",g))}}else if(i.unit===tt.Machines){let g=Array.from(C.adjustedRecipe[i.targetId].produces),k=R=>this.convertMachinesToItems(i,R,n,C);g.length===1?k(g[0]):(a.selectId.pipe(et()).subscribe(R=>k(R)),a.clickOpen("item",g))}else this.convertItemsToItems(i,i.targetId,n,C)}convertItemsToMachines(i,n,a){if(this.setUnit(i.id,{targetId:n,unit:tt.Machines}),i.type===ot.Maximize)return;let _=this.itemsState(),C=this.beltSpeed(),g=this.dispRateInfo(),k=Ut.objectiveNormalizedRate(i,_,C,g,a),R=a.adjustedRecipe[n],$=k.div(R.output[i.targetId]);this.setValue(i.id,$)}convertMachinesToItems(i,n,a,_){if(this.setUnit(i.id,{targetId:n,unit:a}),i.type===ot.Maximize||i.recipe==null)return;let C=this.itemsState(),g=this.beltSpeed(),k=this.dispRateInfo(),R=Ut.objectiveNormalizedRate({id:"",targetId:n,value:L(1n),unit:a,type:ot.Output},C,g,k,_),j=i.value.mul(i.recipe.output[n]).div(R);this.setValue(i.id,j)}convertItemsToItems(i,n,a,_){if(this.setUnit(i.id,{targetId:n,unit:a}),i.type===ot.Maximize)return;let C=this.itemsState(),g=this.beltSpeed(),k=this.dispRateInfo(),R=Ut.objectiveNormalizedRate(i,C,g,k,_),$=Ut.objectiveNormalizedRate({id:"",targetId:n,value:L(1n),unit:a,type:ot.Output},C,g,k,_),j=R.div($);this.setValue(i.id,j)}addItemObjective(i){this.addObjective({targetId:i,unit:tt.Items})}addRecipeObjective(i){this.addObjective({targetId:i,unit:tt.Machines})}addRecipeLimit(i){this.addObjective({targetId:i,unit:tt.Machines,type:ot.Limit})}removeObjective(i){this.store.dispatch(new O.RemoveAction(i))}setOrder(i){this.store.dispatch(new O.SetOrderAction(i))}setTarget(i,n){this.store.dispatch(new O.SetTargetAction({id:i,value:n}))}setValue(i,n){this.store.dispatch(new O.SetValueAction({id:i,value:n}))}setUnit(i,n){this.store.dispatch(new O.SetUnitAction({id:i,value:n}))}setType(i,n){this.store.dispatch(new O.SetTypeAction({id:i,value:n}))}addObjective(i){this.store.dispatch(new O.AddAction(i))}setDisplayRate(i,n){this.store.dispatch(new V.SetDisplayRateAction({value:i,prev:n}))}setPaused(i){this.store.dispatch(new N.SetPausedAction(i))}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=st({type:o,selectors:[["lab-objectives"]],decls:28,vars:35,consts:[["addItemPicker",""],["addRecipePicker",""],["chooseItemPicker",""],["chooseRecipePicker",""],["editRecipePicker",""],["editItemPicker",""],["tooltip",""],[3,"header"],[1,"objectives-content"],[3,"onReorder","value","dragdrop","trackBy"],["pTemplate","item"],[1,"objectives-buttons","d-flex","flex-wrap","mt-2"],["pButton","","pRipple","","type","button","icon","fa-solid fa-box","tooltipPosition","top",1,"flex-grow-1","p-button-outlined",3,"click","label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-industry","tooltipPosition","top",1,"flex-grow-1","p-button-outlined",3,"click","label"],["labDropdownTranslate","","styleClass","h-100",3,"onChange","tooltip","ngModel","options"],["offIcon","fa-solid fa-pause",3,"onChange","ngModel","onIcon","pTooltip"],["severity","warn","styleClass","mt-2"],["styleClass","mt-2",3,"value","closable","escape"],[3,"selectId","header"],[1,"p-inputgroup"],["pButton","","pRipple","","type","button","icon","fa-solid fa-grip-lines",1,"p-button-outlined","border-end-0","cursor-grab"],["labNoDrag","","tooltipPosition","top",3,"setValue","pTooltip","hideButtons","value"],["labDropdownTranslate","","labNoDrag","","tooltipPosition","top",3,"tooltip","options","ngModel"],["labDropdownTranslate","","labNoDrag","","tooltipPosition","top",3,"onChange","tooltip","options","ngModel"],["pButton","","pRipple","","labNoDrag","","type","button","icon","fa-solid fa-xmark","tooltipPosition","left",1,"p-button-outlined",3,"click","pTooltip"],["pButton","","pRipple","","labNoDrag","","type","button","tooltipPosition","top",1,"p-button-outlined","lab-button-icon-only","text-truncate",3,"click","pTooltip"],[1,"p-button-icon"],[1,"p-button-label"],["labNoDrag","","pButton","","pRipple","","type","button","tooltipPosition","top",1,"p-button-outlined","text-truncate",3,"click","icon","label","pTooltip"],["pTemplate",""],[1,"d-flex","align-items-center"],[1,"me-3"],[3,"pTooltip"],[1,"ms-3"],["type","button","pButton","","pRipple","","icon","fa-solid fa-plus",1,"mt-2","p-button-rounded",3,"click","label"],["type","recipe",3,"id"]],template:function(n,a){if(n&1){let _=I();s(0,"p-card",7),c(1,"translate"),s(2,"div",8)(3,"p-orderList",9),b("onReorder",function(){return h(_),S(a.setObjectiveOrder(a.objectives()))}),u(4,xs,13,19,"ng-template",10),r(),s(5,"div",11)(6,"button",12),c(7,"translate"),b("click",function(){h(_);let g=T(17);return S(g.clickOpen("item",a.itemIds()))}),r(),s(8,"button",13),c(9,"translate"),b("click",function(){h(_);let g=T(20);return S(g.clickOpen("recipe",a.recipeIds()))}),r(),s(10,"p-dropdown",14),c(11,"translate"),b("onChange",function(g){return h(_),S(a.setDisplayRate(g.value,a.dispRateInfo().option))}),r(),s(12,"p-toggleButton",15),c(13,"translate"),b("onChange",function(g){let k;return h(_),S(a.setPaused((k=g.checked)!==null&&k!==void 0?k:!1))}),r()(),u(14,vs,2,0,"p-messages",16)(15,bs,1,3,"p-messages",17),r(),s(16,"lab-picker",18,0),c(18,"translate"),b("selectId",function(g){return h(_),S(a.addItemObjective(g))}),r(),s(19,"lab-picker",18,1),c(21,"translate"),b("selectId",function(g){return h(_),S(a.addRecipeObjective(g))}),r(),x(22,"lab-picker",7,2),c(24,"translate"),x(25,"lab-picker",7,3),c(27,"translate"),r()}if(n&2){let _;d("header",m(1,17,"objectives.title")),p(3),d("value",a.objectives())("dragdrop",!0)("trackBy",a.trackSvc.trackById),p(3),d("label",m(7,19,"objectives.addItems")),p(2),d("label",m(9,21,"objectives.addMachines")),p(2),d("tooltip",m(11,23,"objectives.selectDisplayRate"))("ngModel",a.dispRateInfo().option)("options",a.displayRateOptions),p(2),d("ngModel",a.paused())("onIcon","fa-solid fa-play")("pTooltip",m(13,25,"objectives.pauseTooltip")),p(2),f((_=a.result().unboundedRecipeId)?14:a.messages().length?15:-1,_),p(2),d("header",m(18,27,"objectives.selectAnItem")),p(3),d("header",m(21,29,"objectives.selectARecipe")),p(3),d("header",m(24,31,"objectives.selectAnItem")),p(3),d("header",m(27,33,"objectives.selectARecipe"))}},dependencies:[ut,Ct,mt,ht,xt,Pi,St,ji,se,ft,Ni,Pt,le,bt,pe,Wt,dt,vt],styles:[".objectives-content[_ngcontent-%COMP%]{max-width:1000px}.objectives-buttons[_ngcontent-%COMP%]{gap:.25rem}.p-inputgroup[_ngcontent-%COMP%]   p-dropdown.icon[_ngcontent-%COMP%]{flex:0 0 36px}@media (min-width: 576px){button.text-truncate[_ngcontent-%COMP%], .p-inputgroup[_ngcontent-%COMP%]   lab-input-number.p-inputwrapper[_ngcontent-%COMP%]{flex:0 0 25%}}@media (max-width: 575.98px){.p-inputgroup[_ngcontent-%COMP%]   lab-input-number.p-inputwrapper[_ngcontent-%COMP%]{flex:0 0 15%}}@media (max-width: 575.98px){[_nghost-%COMP%]     button.lab-button-icon-only{justify-content:center;width:2.571rem;padding:.5rem 0}[_nghost-%COMP%]     button.lab-button-icon-only .p-button-icon{margin:0}[_nghost-%COMP%]     button.lab-button-icon-only .p-button-label{flex:0 0 auto;visibility:hidden;width:0}}"],changeDetection:0});let t=o;return t})();var Bs=["filterInput"],ks=()=>({minHeight:"528px",height:"80vh",width:"50vw"}),Es=()=>({"768px":"80vw","576px":"100vw"}),Ms=()=>({width:"30vw"}),Vs=()=>({"768px":"50vw","576px":"90vw"}),Rs=()=>({height:"calc(80vh - 165px)",minHeight:"363px"}),Os=t=>({title:"techPicker.available",ids:t,class:"p-button-text"}),Ps=t=>({title:"techPicker.locked",ids:t,class:"p-button-danger"}),Fs=t=>({title:"techPicker.researched",ids:t,class:"p-button-success"}),Ds=(t,o)=>({id:t,class:o});function js(t,o){if(t&1){let e=I();s(0,"div",15)(1,"span",7),v(2),c(3,"translate"),r(),s(4,"button",19),c(5,"translate"),b("click",function(){h(e);let n=l();return S(n.copyScriptToClipboard())}),r(),x(6,"a",20),c(7,"translate"),r()}t&2&&(p(2),w(m(3,3,"techPicker.exportFromFactorio")),p(2),d("label",m(5,5,"techPicker.exportCopyScript")),p(2),d("label",m(7,7,"techPicker.exportUseMod")))}function $s(t,o){if(t&1){let e=I();s(0,"button",21),c(1,"translate"),b("click",function(){h(e);let n=l();return S(n.importTechs())}),r()}t&2&&d("label",m(1,1,"ok"))}function As(t,o){t&1&&P(0)}function Ns(t,o){t&1&&P(0)}function zs(t,o){t&1&&P(0)}function Us(t,o){t&1&&(s(0,"i"),v(1),c(2,"translate"),r()),t&2&&(p(),w(m(2,1,"none")))}function Ls(t,o){t&1&&P(0)}function Ws(t,o){if(t&1&&u(0,Ls,1,0,"ng-container",22),t&2){let e=o.$implicit,i=l().class;l();let n=T(7);d("ngTemplateOutlet",n)("ngTemplateOutletContext",G(2,Ds,e,i))}}function Hs(t,o){if(t&1&&(s(0,"h3"),v(1),c(2,"translate"),r(),s(3,"div",23),u(4,Us,3,3,"i"),z(5,Ws,1,5,"ng-container",null,Z),r()),t&2){let e=o.title,i=o.ids;p(),w(m(2,2,e)),p(3),f(i.length===0?4:-1),p(),U(i)}}function Gs(t,o){if(t&1&&x(0,"lab-tooltip",25),t&2){let e=l().id;d("id",e)}}function qs(t,o){if(t&1){let e=I();s(0,"button",24),c(1,"iconSmClass"),b("click",function(){let n=h(e).id,a=l(2);return S(a.clickId(n))}),u(2,Gs,1,1,"ng-template",null,4,B),r()}if(t&2){let e,i=o.id,n=o.class,a=T(3),_=l(2);y(n),K("hover-active",_.selection().indexOf(i)===-1),d("label",_.showTechLabels()&&((e=_.data().itemEntities[i])==null?null:e.name)||"")("icon",m(1,7,i))("pTooltip",a)}}function Qs(t,o){if(t&1&&(s(0,"p-scrollPanel"),u(1,As,1,0,"ng-container",22)(2,Ns,1,0,"ng-container",22)(3,zs,1,0,"ng-container",22)(4,Hs,7,4,"ng-template",null,2,B)(6,qs,4,9,"ng-template",null,3,B),r()),t&2){let e=T(5),i=l();Tt(H(8,Rs)),p(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",rt(9,Os,i.status().available)),p(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",rt(11,Ps,i.status().locked)),p(),d("ngTemplateOutlet",e)("ngTemplateOutletContext",rt(13,Fs,i.status().researched))}}var je=(()=>{let o=class o{constructor(){this.ref=F(Xt),this.filterSvc=F(bi),this.translateSvc=F(Vt),this.store=F(ct),this.contentSvc=F(lt),this.filterInput=Gt.required("filterInput"),this.selectIds=new Qe,this.data=this.store.selectSignal(D.getAdjustedDataset),this.showTechLabels=this.store.selectSignal(N.getShowTechLabels),this.filter=ue(""),this.selection=ue([]),this.allSelected=it(()=>this.selection().length===this.data().technologyIds.length),this.status=it(()=>{let i=this.data(),n=this.filter(),a=this.selection(),_=new Set(a),C=[],g=[],k=i.technologyIds;if(n){let $=k.map(j=>i.itemEntities[j]);k=this.filterSvc.filter($,["name"],n,"contains").map(j=>j.id),a=a.filter(j=>k.includes(j))}let R=a;for(let $ of k)if(!_.has($)){let j=i.technologyEntities[$];j.prerequisites==null||j.prerequisites.every(J=>_.has(J))?C.push($):g.push($)}return{available:C,locked:g,researched:R}}),this.visible=!1,this.importVisible=!1,this.importValue="",this.Game=nt}clickOpen(i){i=[...i??this.data().technologyIds],this.selection.set(i),this.visible=!0,this.ref.markForCheck(),this.contentSvc.isMobile()||setTimeout(()=>{this.filterInput().nativeElement.focus()})}selectAll(i){this.selection.set(i?[...this.data().technologyIds]:[])}openImport(i){this.importVisible=!0,setTimeout(()=>i.focus())}copyScriptToClipboard(){window.navigator.clipboard.writeText(`/c local list = {}
for _, tech in pairs(game.player.force.technologies) do
    if tech.researched then
        list[#list + 1] = tech.name
    end
end
game.write_file("techs.txt", table.concat(list, ","))
`),this.contentSvc.showToast$.next({severity:"success",detail:this.translateSvc.instant("techPicker.exportScriptCopied"),contentStyleClass:"detail-only"})}importTechs(){let i=this.importValue.split(",").map(a=>a.trim()).map(a=>{if(!a)return"";let _=`${a}-technology`;return this.data().technologyIds.includes(_)?_:this.data().technologyIds.includes(a)?a:""}).filter(a=>!!a),n=new Set(i);this.addPrerequisites(n),this.selection.set(Array.from(n)),this.importValue="",this.importVisible=!1}clickId(i){let n=new Set(this.selection());if(n.has(i)){n.delete(i);let a;do{a=new Set;for(let _ of n)this.data().technologyEntities[_].prerequisites?.some(g=>!n.has(g))&&a.add(_);a.forEach(_=>n.delete(_))}while(a.size)}else n.add(i),this.addPrerequisites(n);this.selection.set(Array.from(n))}addPrerequisites(i){let n;do{n=new Set;for(let a of i)this.data().technologyEntities[a].prerequisites?.filter(C=>!i.has(C)).forEach(C=>n.add(C));n.forEach(a=>i.add(a))}while(n.size)}onHide(){let i=this.selection(),n=this.data();i.length===n.technologyIds.length&&this.selectIds.emit(null);let a=i.filter(_=>!i.some(C=>{let g=n.technologyEntities[C];return g.prerequisites&&g.prerequisites.indexOf(_)!==-1}));this.selectIds.emit(a)}setShowTechLabels(i){this.store.dispatch(new N.SetShowTechLabelsAction(i))}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=st({type:o,selectors:[["lab-tech-picker"]],viewQuery:function(n,a){n&1&&Qt(a.filterInput,Bs,5),n&2&&Kt()},outputs:{selectIds:"selectIds"},decls:27,vars:49,consts:[["filterInput",""],["importInput",""],["techSet",""],["techButton",""],["tooltip",""],["styleClass","picker-dialog","appendTo","body",3,"visibleChange","onHide","visible","modal","dismissableMask","draggable","resizable","header","breakpoints"],[1,"d-flex","w-100","my-1","p-inputgroup"],[1,"p-inputgroup-addon"],[1,"fa-solid","fa-magnifying-glass"],["pInputText","","type","text",1,"w-100",3,"input","ngModel"],[1,"p-inputgroup-addon","flex-shrink-0"],["labelStyleClass","text-nowrap",3,"onChange","binary","label","ngModel"],["pButton","","pRipple","","type","button","icon","fa-solid fa-file-import",1,"flex-shrink-0",3,"click","label","pTooltip"],["appendTo","body",3,"visibleChange","visible","modal","dismissableMask","draggable","resizable","breakpoints","header"],[1,"d-flex","flex-column"],[1,"p-inputgroup","mb-3"],["rows","10","pInputTextarea","",1,"mt-2","w-100",3,"ngModelChange","keydown.enter","ngModel"],["pTemplate","footer"],[3,"style"],["pButton","","pRipple","","type","button","icon","fa-solid fa-copy",1,"p-button-outlined",3,"click","label"],["href","https://mods.factorio.com/mod/export-researched-technologies","target","_blank","pButton","","pRipple","","icon","fa-solid fa-link",1,"text-decoration-none","p-inputgroup-addon","p-button-outlined",3,"label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-check",1,"p-button-text",3,"click","label"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"d-flex","flex-wrap","invert"],["pButton","","pRipple","","type","button","tooltipPosition","bottom",1,"me-1","mb-1",3,"click","label","icon","pTooltip"],["type","technology",3,"id"]],template:function(n,a){if(n&1){let _=I();s(0,"p-dialog",5),c(1,"translate"),yt("visibleChange",function(g){return h(_),It(a.visible,g)||(a.visible=g),S(g)}),b("onHide",function(){return h(_),S(a.onHide())}),s(2,"div",6)(3,"span",7),x(4,"i",8),r(),s(5,"input",9,0),b("input",function(){h(_);let g=T(6);return S(a.filter.set(g.value))}),r(),s(7,"span",10)(8,"p-checkbox",11),c(9,"translate"),b("onChange",function(g){return h(_),S(a.selectAll(g.checked))}),r()(),s(10,"span",10)(11,"p-checkbox",11),c(12,"translate"),b("onChange",function(g){return h(_),S(a.setShowTechLabels(g.checked))}),r()(),s(13,"button",12),c(14,"translate"),c(15,"translate"),b("click",function(){h(_);let g=T(24);return S(a.openImport(g))}),r(),s(16,"p-dialog",13),c(17,"translate"),yt("visibleChange",function(g){return h(_),It(a.importVisible,g)||(a.importVisible=g),S(g)}),s(18,"div",14),u(19,js,8,9,"div",15),s(20,"div"),v(21),c(22,"translate"),r(),s(23,"textarea",16,1),yt("ngModelChange",function(g){return h(_),It(a.importValue,g)||(a.importValue=g),S(g)}),b("keydown.enter",function(){return h(_),S(a.importVisible=!1)}),r()(),u(25,$s,2,3,"ng-template",17),r()(),u(26,Qs,8,15,"p-scrollPanel",18),r()}n&2&&(Tt(H(45,ks)),wt("visible",a.visible),d("modal",!0)("dismissableMask",!0)("draggable",!1)("resizable",!1)("header",m(1,31,"techPicker.header"))("breakpoints",H(46,Es)),p(5),d("ngModel",a.filter()),p(3),d("binary",!0)("label",m(9,33,"techPicker.unlockAll"))("ngModel",a.allSelected()),p(3),d("binary",!0)("label",m(12,35,"techPicker.showLabels"))("ngModel",a.showTechLabels()),p(2),d("label",m(14,37,"techPicker.import"))("pTooltip",m(15,39,"techPicker.importTooltip")),p(3),Tt(H(47,Ms)),wt("visible",a.importVisible),d("modal",!0)("dismissableMask",!0)("draggable",!0)("resizable",!1)("breakpoints",H(48,Vs))("header",m(17,41,"techPicker.importHeader")),p(3),f(a.data().game===a.Game.Factorio?19:-1),p(2),w(m(22,43,"techPicker.importInstructions")),p(2),wt("ngModel",a.importValue),p(3),f(a.visible?26:-1))},dependencies:[Mt,Zt,ut,Ct,mt,ht,xt,Ot,ee,Fi,ie,ft,ae,bt,dt,vt],changeDetection:0});let t=o;return t})();var $e=(()=>{let o=class o{transform(i,n,a){if(i==null)return[];if(!n?.length)return i;let _=new Set(n);return i.filter(C=>!_.has(C.value)||C.value===a)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275pipe=A({name:"filterOptions",type:o,pure:!0});let t=o;return t})();var Js=()=>({height:"100%"}),Ae=t=>({count:t}),Ys=()=>({width:"400px",maxHeight:"500px"}),Zs=()=>({"400px":"100vw"}),tr=(t,o)=>({machineId:"",settings:t,defaults:o}),er=(t,o,e)=>({machineId:t,settings:o,defaults:e}),Ne=()=>[];function ir(t,o){if(t&1&&(s(0,"div"),v(1),r()),t&2){let e=l(2);p(),w(e.state)}}function nr(t,o){if(t&1&&(s(0,"div",69)(1,"div"),v(2),c(3,"translate"),r(),u(4,ir,2,1,"div"),r()),t&2){let e=l();p(2),w(m(3,2,"settings.savedStates")),p(2),f(e.state?4:-1)}}function or(t,o){if(t&1){let e=I();s(0,"div",24)(1,"button",70),b("click",function(){h(e);let n=T(3),a=l();return S(a.setSearch(n.value))}),r(),x(2,"input",71,5),s(4,"button",72),b("click",function(){h(e);let n=T(3),a=l();return S(a.copySearchToClipboard(n.value))}),r()()}if(t&2){let e=l();p(2),d("ngModel",e.BrowserUtility.search)}}function ar(t,o){if(t&1){let e=I();s(0,"div",24)(1,"input",73,6),c(3,"translate"),c(4,"translate"),yt("ngModelChange",function(n){h(e);let a=l();return It(a.editValue,n)||(a.editValue=n),S(n)}),b("keydown.enter",function(){h(e);let n=l();return S(n.clickSaveState(n.data().game))}),r(),s(5,"button",74),c(6,"translate"),b("click",function(){h(e);let n=l();return S(n.clickSaveState(n.data().game))}),r(),s(7,"button",75),c(8,"translate"),b("click",function(){h(e);let n=l();return S(n.editState=null)}),r()()}if(t&2){let e=T(2),i=l();p(),d("autofocus",!0)("placeholder",m(3,7,"settings.nameSavedState"))("pTooltip",m(4,9,"settings.nameSavedState")),wt("ngModel",i.editValue),p(4),d("pTooltip",m(6,11,"settings.saveState"))("disabled",e.invalid),p(2),d("pTooltip",m(8,13,"cancel"))}}function lr(t,o){if(t&1){let e=I();s(0,"button",79),b("click",function(n){h(e);let a=T(2);return S(a.toggle(n))}),x(1,"p-menu",80,7),r()}if(t&2){let e=l(2);p(),d("popup",!0)("model",e.editStateMenu)}}function pr(t,o){if(t&1){let e=I();s(0,"button",81),c(1,"translate"),b("click",function(){h(e);let n=l(2);return S(n.openCreateState())}),r()}t&2&&d("pTooltip",m(1,1,"settings.createSavedState"))}function sr(t,o){if(t&1){let e=I();s(0,"div",25)(1,"p-dropdown",76),c(2,"translate"),c(3,"translate"),b("onChange",function(n){h(e);let a=l();return S(a.setState(n.value,a.gameStates()))}),r(),u(4,lr,3,2,"button",77)(5,pr,2,3,"button",78),r()}if(t&2){let e=l();p(),d("placeholder",m(2,5,"settings.selectSavedState"))("tooltip",m(3,7,"settings.selectSavedState"))("ngModel",e.state)("options",e.savedStates()),p(3),f(e.state?4:5)}}function rr(t,o){if(t&1){let e=I();s(0,"button",82),c(1,"translate"),b("click",function(){h(e);let n=l();return S(n.openCreateState())}),r()}t&2&&d("label",m(1,1,"settings.createSavedState"))}function _r(t,o){if(t&1&&(s(0,"div",69)(1,"div"),v(2),c(3,"translate"),r(),s(4,"div"),v(5),r()()),t&2){let e,i=l();p(2),w(m(3,2,"settings.game")),p(3),w((e=i.modRecord()[i.settings().modId])==null?null:e.id)}}function cr(t,o){if(t&1&&(s(0,"small",57),v(1),r()),t&2){let e=o.$implicit;p(),M(" ",e.value," ")}}function dr(t,o){if(t&1&&(z(0,cr,2,1,"small",57,Z),c(2,"keyvalue")),t&2){let e=l();U(m(2,0,e.data().version))}}function mr(t,o){t&1&&(s(0,"tr")(1,"th"),v(2),c(3,"translate"),r(),s(4,"th"),v(5),c(6,"translate"),r()()),t&2&&(p(2),w(m(3,2,"settings.mod")),p(3),w(m(6,4,"settings.version")))}function ur(t,o){if(t&1&&(s(0,"tr")(1,"td"),v(2),r(),s(3,"td"),v(4),r()()),t&2){let e=o.$implicit;p(2),w(e.key),p(2),w(e.value)}}function Cr(t,o){if(t&1){let e=I();s(0,"button",92),c(1,"translate"),b("click",function(){h(e);let n=l(2);return S(n.versionsVisible=!1)}),r()}t&2&&d("label",m(1,1,"ok"))}function gr(t,o){if(t&1){let e=I();s(0,"div",32)(1,"label",83),v(2),c(3,"translate"),r(),s(4,"small",84)(5,"a",85),v(6),c(7,"translate"),r()(),s(8,"span",25)(9,"p-dropdown",86),c(10,"translate"),b("onChange",function(n){h(e);let a=l();return S(a.setMod(n.value))}),r(),s(11,"button",87),c(12,"translate"),b("click",function(){h(e);let n=l();return S(n.versionsVisible=!0)}),s(13,"p-dialog",88),c(14,"translate"),yt("visibleChange",function(n){h(e);let a=l();return It(a.versionsVisible,n)||(a.versionsVisible=n),S(n)}),s(15,"p-table",89),c(16,"keyvalue"),u(17,mr,7,6,"ng-template",23)(18,ur,5,2,"ng-template",90),r(),u(19,Cr,2,3,"ng-template",91),r()()()()}if(t&2){let e=l();p(2),w(m(3,18,"settings.modSet")),p(4),w(m(7,20,"settings.requestMod")),p(3),d("filter",!0)("autofocusFilter",!e.contentSvc.isMobile())("tooltip",m(10,22,"settings.modSetTooltip"))("ngModel",e.settings().modId)("options",e.modOptions()),p(2),d("pTooltip",m(12,24,"settings.modVersions")),p(2),Tt(H(30,Ys)),wt("visible",e.versionsVisible),d("modal",!0)("dismissableMask",!0)("draggable",!1)("resizable",!1)("breakpoints",H(31,Zs))("header",m(14,26,"settings.modVersions")),p(2),d("value",m(16,28,e.data().version))}}function fr(t,o){t&1&&(s(0,"div"),v(1),c(2,"translate"),r()),t&2&&(p(),w(m(2,1,o)))}function xr(t,o){if(t&1&&(s(0,"div",69)(1,"div"),v(2),c(3,"translate"),r(),u(4,fr,3,3,"div"),r()),t&2){let e;l();let i=T(44);p(2),w(m(3,2,"settings.factory")),p(2),f((e=i.label())?4:-1,e)}}function hr(t,o){t&1&&P(0)}function Sr(t,o){t&1&&P(0)}function vr(t,o){if(t&1&&u(0,Sr,1,0,"ng-container",93),t&2){let e=o.$implicit;l();let i=T(4),n=l();d("ngTemplateOutlet",i)("ngTemplateOutletContext",Nt(2,er,e,n.machinesState().entities[e],n.machinesState().entities[""]))}}function br(t,o){if(t&1&&x(0,"button",104),t&2){let e=l(2).machineId;K("invisible",e==="")}}function Tr(t,o){t&1&&(s(0,"span",99),c(1,"translate"),x(2,"i",105),r()),t&2&&d("pTooltip",m(1,1,"settings.machineDefaults"))}function wr(t,o){if(t&1&&(s(0,"div",107),x(1,"i"),c(2,"iconSmClass"),r()),t&2){let e=l().$implicit;p(),y(m(2,2,e.value))}}function Ir(t,o){if(t&1&&(s(0,"div"),v(1),r()),t&2){let e=l(4).machineId;p(),w(e)}}function yr(t,o){if(t&1&&u(0,wr,3,4,"div",107)(1,Ir,2,1,"div"),t&2){let e=o.$implicit;f(e?0:1)}}function Br(t,o){if(t&1&&x(0,"lab-tooltip",110),t&2){let e=l().$implicit;d("id",e.value)}}function kr(t,o){if(t&1&&(s(0,"div",108),x(1,"i"),c(2,"iconSmClass"),s(3,"div",109),v(4),r(),u(5,Br,1,1,"ng-template",null,9,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function Er(t,o){if(t&1){let e=I();s(0,"p-dropdown",106),c(1,"translate"),c(2,"filterOptions"),b("onChange",function(n){let a;h(e);let _=l(2).machineId,C=l(2);return S(C.setMachine(_,n.value,(a=C.data().defaults)==null?null:a.machineRankIds))}),u(3,yr,2,1,"ng-template",40)(4,kr,7,6,"ng-template",41),r()}if(t&2){let e=l(2).machineId,i=l(2);d("tooltip",m(1,3,"settings.machineTooltip"))("ngModel",e)("options",_t(2,5,i.options().machines,i.machineIds(),e))}}function Mr(t,o){t&1&&(s(0,"div",112),x(1,"i",113),r())}function Vr(t,o){if(t&1&&x(0,"lab-tooltip",110),t&2){let e=l().$implicit;d("id",e.value)}}function Rr(t,o){if(t&1&&(s(0,"div",108),x(1,"i"),c(2,"iconSmClass"),s(3,"div",109),v(4),r(),u(5,Vr,1,1,"ng-template",null,9,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function Or(t,o){if(t&1){let e=I();s(0,"p-dropdown",111),c(1,"translate"),c(2,"filterOptions"),b("onChange",function(n){let a;h(e);let _=l(4);return S(_.addMachine(n.value,(a=_.data().defaults)==null?null:a.machineRankIds))}),u(3,Mr,2,0,"ng-template",40)(4,Rr,7,6,"ng-template",41),r()}if(t&2){let e,i=l(4);d("ngModel",(e=i.options().machines[0])==null?null:e.value)("tooltip",m(1,3,"settings.addMachineTooltip"))("options",E(2,5,i.options().machines,i.machineIds()))}}function Pr(t,o){if(t&1&&(s(0,"div",107),x(1,"i"),c(2,"iconSmClass"),r()),t&2){let e=o.$implicit;p(),y(m(2,2,e.value))}}function Fr(t,o){if(t&1&&x(0,"lab-tooltip",114),t&2){let e=l().$implicit;d("id",e.value)}}function Dr(t,o){if(t&1&&(s(0,"div",108),x(1,"i"),c(2,"iconSmClass"),s(3,"div",109),v(4),r(),u(5,Fr,1,1,"ng-template",null,9,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function jr(t,o){if(t&1){let e=I();s(0,"p-dropdown",106),c(1,"translate"),b("onChange",function(n){h(e);let a=l(2),_=a.machineId,C=a.settings,g=l(2);return S(g.changeFuel(_,n.value,C,g.settings().fuelRankIds))}),u(2,Pr,3,4,"ng-template",40)(3,Dr,7,6,"ng-template",41),r()}if(t&2){let e=l(2).settings;d("tooltip",m(1,3,"settings.fuelTooltip"))("ngModel",e.fuelId)("options",e.fuelOptions)}}function $r(t,o){if(t&1&&(s(0,"span"),v(1),r()),t&2){let e=l(2).$implicit;p(),M("+",e.length-1,"")}}function Ar(t,o){if(t&1&&(s(0,"i"),c(1,"iconSmClass"),u(2,$r,2,1,"span"),r()),t&2){let e=l().$implicit;y(m(1,3,e[0])),p(2),f(e.length>1?2:-1)}}function Nr(t,o){if(t&1&&(x(0,"i"),c(1,"iconSmClass")),t&2){let e=l(7);y(m(1,2,e.ItemId.Module))}}function zr(t,o){if(t&1&&(s(0,"div",107),u(1,Ar,3,5,"i",118)(2,Nr,2,4,"i",118),r()),t&2){let e=o.$implicit;p(),f(e!=null&&e.length?1:2)}}function Ur(t,o){if(t&1&&x(0,"lab-tooltip",119),t&2){let e=l().$implicit;d("id",e.value)}}function Lr(t,o){if(t&1&&(s(0,"div",108),x(1,"i"),c(2,"iconSmClass"),s(3,"div",109),v(4),r(),u(5,Ur,1,1,"ng-template",null,9,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",e.value!=="module"?i:void 0),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function Wr(t,o){if(t&1){let e=I();s(0,"p-multiSelect",116),c(1,"translate"),b("onChange",function(n){h(e);let a=l(3),_=a.machineId,C=a.defaults,g=l(2);return S(g.setModuleRank(_,n.value,C==null?null:C.moduleRankIds))}),u(2,zr,3,1,"ng-template",117)(3,Lr,7,6,"ng-template",41),r()}if(t&2){let e,i=l(3).settings;d("selectionLimit",2)("tooltip",m(1,4,"settings.modifierTooltip"))("ngModel",i.moduleRankIds)("options",(e=i.moduleOptions)!==null&&e!==void 0?e:H(6,Ne))}}function Hr(t,o){if(t&1){let e=I();s(0,"p-inputNumber",121,10),c(2,"translate"),b("onBlur",function(){let n;h(e);let a=T(1),_=l(4).machineId,C=l(2);return S(C.setOverclock(_,C.rational((n=a.value)!==null&&n!==void 0?n:0),_?C.machinesState().entities[""].overclock:C.rational(0)))}),r()}if(t&2){let e=l(4).settings;d("min",0)("step",1)("maxFractionDigits",0)("showButtons",!0)("pTooltip",m(2,6,"settings.modifierCountTooltip"))("ngModel",e.overclock.toNumber())}}function Gr(t,o){if(t&1&&(s(0,"div",107),x(1,"i"),c(2,"iconSmClass"),r()),t&2){let e=o.$implicit;p(),y(m(2,2,e.value))}}function qr(t,o){if(t&1&&x(0,"lab-tooltip",119),t&2){let e=l().$implicit;d("id",e.value)}}function Qr(t,o){if(t&1&&(s(0,"div",108),x(1,"i"),c(2,"iconSmClass"),s(3,"div",109),v(4),r(),u(5,qr,1,1,"ng-template",null,9,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",e.value!=="module"?i:void 0),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function Kr(t,o){if(t&1){let e=I();u(0,Hr,3,8,"p-inputNumber",120),s(1,"p-dropdown",106),c(2,"translate"),b("onChange",function(n){let a;h(e);let _=l(3).machineId,C=l(2);return S(C.setModuleRank(_,[n.value],(a=C.data().defaults)==null?null:a.moduleRankIds))}),u(3,Gr,3,4,"ng-template",40)(4,Qr,7,6,"ng-template",41),r()}if(t&2){let e,i=l(3).settings,n=l(2);f(n.data().game===n.Game.FinalFactory?0:-1),p(),d("tooltip",m(2,4,"settings.modifierTooltip"))("ngModel",i.moduleRankIds==null?null:i.moduleRankIds[0])("options",(e=i.moduleOptions)!==null&&e!==void 0?e:H(6,Ne))}}function Xr(t,o){if(t&1&&u(0,Wr,4,7,"p-multiSelect",115)(1,Kr,5,7,"p-dropdown",100),t&2){let e=l(4);f(e.data().game!==e.Game.Satisfactory&&e.data().game!==e.Game.FinalFactory?0:1)}}function Jr(t,o){if(t&1){let e=I();s(0,"p-inputNumber",122,11),c(2,"translate"),b("onBlur",function(){let n;h(e);let a=T(1),_=l(2).machineId,C=l(2);return S(C.setOverclock(_,C.rational((n=a.value)!==null&&n!==void 0?n:100),_?C.machinesState().entities[""].overclock:C.rational(100)))}),r()}if(t&2){let e=l(2).settings;d("min",1)("max",250)("step",10)("maxFractionDigits",2)("showButtons",!0)("pTooltip",m(2,7,"settings.overclockTooltip"))("ngModel",e.overclock.toNumber())}}function Yr(t,o){if(t&1&&(s(0,"div",107),x(1,"i"),c(2,"iconSmClass"),r()),t&2){let e=l().$implicit;p(),y(m(2,2,e.value))}}function Zr(t,o){if(t&1&&u(0,Yr,3,4,"div",107),t&2){let e=o.$implicit;f(e?0:-1)}}function t_(t,o){if(t&1&&x(0,"lab-tooltip",125),t&2){let e=l().$implicit;d("id",e.value)}}function e_(t,o){if(t&1&&(s(0,"div",108),x(1,"i"),c(2,"iconSmClass"),s(3,"div",109),v(4),r(),u(5,t_,1,1,"ng-template",null,9,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function i_(t,o){if(t&1&&(s(0,"span"),v(1),r()),t&2){let e=l(2).$implicit;p(),M("+",e.length-1,"")}}function n_(t,o){if(t&1&&(s(0,"i"),c(1,"iconSmClass"),u(2,i_,2,1,"span"),r()),t&2){let e=l().$implicit;y(m(1,3,e[0])),p(2),f(e.length>1?2:-1)}}function o_(t,o){if(t&1&&(x(0,"i"),c(1,"iconSmClass")),t&2){let e=l(7);y(m(1,2,e.ItemId.Module))}}function a_(t,o){if(t&1&&(s(0,"div",107),u(1,n_,3,5,"i",118)(2,o_,2,4,"i",118),r()),t&2){let e=o.$implicit;p(),f(e!=null&&e.length?1:2)}}function l_(t,o){if(t&1&&x(0,"lab-tooltip",119),t&2){let e=l().$implicit;d("id",e.value)}}function p_(t,o){if(t&1&&(s(0,"div",108),x(1,"i"),c(2,"iconSmClass"),s(3,"div",109),v(4),r(),u(5,l_,1,1,"ng-template",null,9,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",e.value!=="module"?i:void 0),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function s_(t,o){if(t&1){let e=I();s(0,"p-multiSelect",116),c(1,"translate"),b("onChange",function(n){h(e);let a=l(3),_=a.machineId,C=a.defaults,g=l(2);return S(g.changeBeaconModuleRank(_,n.value,C))}),u(2,a_,3,1,"ng-template",117)(3,p_,7,6,"ng-template",41),r()}if(t&2){let e,i=l(3).settings;d("selectionLimit",2)("tooltip",m(1,4,"settings.beaconModuleTooltip"))("ngModel",i.beaconModuleRankIds)("options",(e=i.beaconModuleOptions)!==null&&e!==void 0?e:H(6,Ne))}}function r_(t,o){if(t&1){let e=I();s(0,"lab-input-number",123),c(1,"translate"),b("setValue",function(n){h(e);let a=l(2),_=a.machineId,C=a.defaults,g=l(2);return S(g.setBeaconCount(_,n,C==null?null:C.beaconCount))}),r(),s(2,"p-dropdown",124),c(3,"translate"),b("onChange",function(n){h(e);let a=l(2),_=a.machineId,C=a.defaults,g=l(2);return S(g.setBeacon(_,n.value,C==null?null:C.beaconId))}),u(4,Zr,1,1,"ng-template",40)(5,e_,7,6,"ng-template",41),r(),u(6,s_,4,7,"p-multiSelect",115)}if(t&2){let e=l(2).settings,i=l(2);d("pTooltip",m(1,6,"settings.beaconCountTooltip"))("value",e.beaconCount),p(2),d("tooltip",m(3,8,"settings.beaconTooltip"))("ngModel",e.beaconId)("options",i.options().beacons),p(4),f(e.beaconModuleRankIds?6:-1)}}function __(t,o){if(t&1){let e=I();s(0,"div",97),u(1,br,1,2,"button",98)(2,Tr,3,3,"span",99)(3,Er,5,9,"p-dropdown",100)(4,Or,5,8,"p-dropdown",101)(5,jr,4,5,"p-dropdown",100)(6,Xr,2,1)(7,Jr,3,9,"p-inputNumber",102)(8,r_,7,10),s(9,"button",103),c(10,"translate"),b("click",function(){let n;h(e);let a=l().machineId,_=l(2);return S(_.removeMachine(a,(n=_.data().defaults)==null?null:n.machineRankIds))}),r()()}if(t&2){let e=l(),i=e.machineId,n=e.settings,a=l(2);K("mb-1",i===""),p(),f(i?1:2),p(2),f(i?3:4),p(2),f(n.fuelId?5:-1),p(),f(n.moduleRankIds?6:-1),p(),f(a.data().game===a.Game.Satisfactory?7:-1),p(),f(a.data().game===a.Game.Factorio&&n.beaconCount!=null?8:-1),p(),K("invisible",i===""),d("pTooltip",m(10,11,"settings.removeMachinePreference"))}}function c_(t,o){if(t&1&&u(0,__,11,13,"div",96),t&2){let e=o.settings;f(e?0:-1)}}function d_(t,o){if(t&1){let e=I();u(0,hr,1,0,"ng-container",93),s(1,"p-orderList",94),b("onReorder",function(){let n;h(e);let a=l();return S(a.setMachineRank(a.machineIds(),(n=a.data().defaults)==null?null:n.machineRankIds))}),u(2,vr,1,6,"ng-template",41),r(),u(3,c_,1,1,"ng-template",null,8,B),x(5,"div",95)}if(t&2){let e=T(4),i=l();d("ngTemplateOutlet",e)("ngTemplateOutletContext",G(4,tr,i.machinesState().entities[""],i.data().defaults)),p(),d("value",i.machineIds())("dragdrop",!0)}}function m_(t,o){if(t&1){let e=I();s(0,"div",33)(1,"p-checkbox",49),c(2,"translate"),c(3,"translate"),b("onChange",function(n){h(e);let a=l();return S(a.toggleBeaconReceivers(n.checked))}),r()()}if(t&2){let e=l();p(),d("ngModel",e.settings().beaconReceivers!=null)("binary",!0)("label",m(2,4,"settings.estimateBeaconPowerUsage"))("pTooltip",m(3,6,"settings.estimateBeaconPowerUsageTooltip"))}}function u_(t,o){if(t&1){let e=I();s(0,"div",33)(1,"label",126),v(2),c(3,"translate"),r(),s(4,"lab-input-number",127),c(5,"translate"),b("setValue",function(n){h(e);let a=l();return S(a.setBeaconReceivers(n))}),r()()}t&2&&(p(2),w(m(3,3,"settings.averageBeaconReceivers")),p(2),d("pTooltip",m(5,5,"settings.averageBeaconReceiversTooltip"))("value",o))}function C_(t,o){if(t&1&&(s(0,"div",130),x(1,"i"),c(2,"iconSmClass"),s(3,"div",109),v(4),r()()),t&2){let e=o.$implicit;p(),y(m(2,3,e.value)),p(3),M(" ",e.label," ")}}function g_(t,o){if(t&1&&x(0,"lab-tooltip",119),t&2){let e=l().$implicit;d("id",e.value)}}function f_(t,o){if(t&1&&(s(0,"div",108),x(1,"i"),c(2,"iconSmClass"),s(3,"div",109),v(4),r(),u(5,g_,1,1,"ng-template",null,9,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",e.value!=="module"?i:void 0),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function x_(t,o){if(t&1){let e=I();s(0,"div",36)(1,"div",29)(2,"p-dropdown",128),c(3,"translate"),b("onChange",function(n){h(e);let a=l();return S(a.setProliferatorSpray(n.value))}),u(4,C_,5,5,"ng-template",40)(5,f_,7,6,"ng-template",41),r(),s(6,"label",129),v(7),c(8,"translate"),r()()()}if(t&2){let e=l();p(2),d("autoDisplayFirst",!1)("tooltip",m(3,5,"settings.proliferatorSelfSprayTooltip"))("ngModel",e.settings().proliferatorSprayId)("options",e.options().proliferatorModules),p(5),w(m(8,7,"settings.proliferatorSelfSpray"))}}function h_(t,o){if(t&1&&(s(0,"div",130),x(1,"i"),c(2,"iconSmClass"),s(3,"div",109),v(4),r()()),t&2){let e=l().$implicit;p(),y(m(2,3,e.value)),p(3),M(" ",e.label," ")}}function S_(t,o){if(t&1&&u(0,h_,5,5,"div",130),t&2){let e=o.$implicit;f(e?0:-1)}}function v_(t,o){if(t&1&&x(0,"lab-tooltip",131),t&2){let e=l().$implicit;d("id",e.value)}}function b_(t,o){if(t&1&&(s(0,"div",108),x(1,"i"),c(2,"iconSmClass"),s(3,"div",109),v(4),r(),u(5,v_,1,1,"ng-template",null,9,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function T_(t,o){if(t&1&&(s(0,"div",130),x(1,"i"),c(2,"iconSmClass"),s(3,"div",109),v(4),r()()),t&2){let e=o.$implicit;p(),y(m(2,3,e.value)),p(3),M(" ",e.label," ")}}function w_(t,o){if(t&1&&x(0,"lab-tooltip",134),t&2){let e=l().$implicit;d("id",e.value)}}function I_(t,o){if(t&1&&(s(0,"div",108),x(1,"i"),c(2,"iconSmClass"),s(3,"div",109),v(4),r(),u(5,w_,1,1,"ng-template",null,9,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function y_(t,o){if(t&1){let e=I();s(0,"div",36)(1,"div",29)(2,"p-dropdown",132),c(3,"translate"),b("onChange",function(n){let a;h(e);let _=l();return S(_.setPipe(n.value,(a=_.data().defaults)==null?null:a.pipeId))}),u(4,T_,5,5,"ng-template",40)(5,I_,7,6,"ng-template",41),r(),s(6,"label",133),v(7),c(8,"translate"),r()()()}if(t&2){let e=l();p(2),d("tooltip",m(3,4,"settings.defaultPipeTooltip"))("ngModel",e.settings().pipeId)("options",e.options().pipes),p(5),w(m(8,6,"settings.defaultPipe"))}}function B_(t,o){if(t&1&&(s(0,"div",130),x(1,"i"),c(2,"iconSmClass"),s(3,"div",109),v(4),r()()),t&2){let e=o.$implicit;p(),y(m(2,3,e.value)),p(3),M(" ",e.label," ")}}function k_(t,o){if(t&1&&x(0,"lab-tooltip",137),t&2){let e=l().$implicit;d("id",e.value)}}function E_(t,o){if(t&1&&(s(0,"div",108),x(1,"i"),c(2,"iconSmClass"),s(3,"div",109),v(4),r(),u(5,k_,1,1,"ng-template",null,9,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function M_(t,o){if(t&1){let e=I();s(0,"div",36)(1,"div",29)(2,"p-dropdown",135),c(3,"translate"),b("onChange",function(n){let a;h(e);let _=l();return S(_.setCargoWagon(n.value,(a=_.data().defaults)==null?null:a.cargoWagonId))}),u(4,B_,5,5,"ng-template",40)(5,E_,7,6,"ng-template",41),r(),s(6,"label",136),v(7),c(8,"translate"),r()()()}if(t&2){let e=l();p(2),d("tooltip",m(3,4,"settings.defaultCargoWagonTooltip"))("ngModel",e.settings().cargoWagonId)("options",e.options().cargoWagons),p(5),w(m(8,6,"settings.defaultCargoWagon"))}}function V_(t,o){if(t&1&&(s(0,"div",130),x(1,"i"),c(2,"iconSmClass"),s(3,"div",109),v(4),r()()),t&2){let e=o.$implicit;p(),y(m(2,3,e.value)),p(3),M(" ",e.label," ")}}function R_(t,o){if(t&1&&x(0,"lab-tooltip",140),t&2){let e=l().$implicit;d("id",e.value)}}function O_(t,o){if(t&1&&(s(0,"div",108),x(1,"i"),c(2,"iconSmClass"),s(3,"div",109),v(4),r(),u(5,R_,1,1,"ng-template",null,9,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function P_(t,o){if(t&1){let e=I();s(0,"div",36)(1,"div",29)(2,"p-dropdown",138),c(3,"translate"),b("onChange",function(n){let a;h(e);let _=l();return S(_.setFluidWagon(n.value,(a=_.data().defaults)==null?null:a.fluidWagonId))}),u(4,V_,5,5,"ng-template",40)(5,O_,7,6,"ng-template",41),r(),s(6,"label",139),v(7),c(8,"translate"),r()()()}if(t&2){let e=l();p(2),d("tooltip",m(3,4,"settings.defaultFluidWagonTooltip"))("ngModel",e.settings().fluidWagonId)("options",e.options().fluidWagons),p(5),w(m(8,6,"settings.defaultFluidWagon"))}}function F_(t,o){if(t&1&&(x(0,"i"),c(1,"iconSmClass")),t&2){let e=l(4);y(m(1,2,e.ItemId.Module))}}function D_(t,o){if(t&1&&(x(0,"i",145),c(1,"iconSmClass")),t&2){let e=o.$implicit;y(m(1,2,e))}}function j_(t,o){if(t&1&&z(0,D_,2,4,"i",144,Z),t&2){let e=l().$implicit;U(e)}}function $_(t,o){if(t&1&&(s(0,"div",107),u(1,F_,2,4,"i",118)(2,j_,2,0),r()),t&2){let e=o.$implicit;p(),f(e!=null&&e.length?2:1)}}function A_(t,o){if(t&1&&x(0,"lab-tooltip",114),t&2){let e=l().$implicit;d("id",e.value)}}function N_(t,o){if(t&1&&(s(0,"div",108),x(1,"i"),c(2,"iconSmClass"),s(3,"div",109),v(4),r(),u(5,A_,1,1,"ng-template",null,9,B),r()),t&2){let e=o.$implicit,i=T(6);d("pTooltip",i),p(),y(m(2,4,e.value)),p(3),M(" ",e.label," ")}}function z_(t,o){if(t&1){let e=I();s(0,"p-multiSelect",143),c(1,"translate"),b("onChange",function(n){let a=h(e),_=l(2);return S(_.setFuels(n.value,a.defaults&&a.defaults.fuelId?[a.defaults.fuelId]:[]))}),u(2,$_,3,1,"ng-template",117)(3,N_,7,6,"ng-template",41),r()}if(t&2){let e=l(2);d("tooltip",m(1,3,"settings.fuelRankTooltip"))("ngModel",e.settings().fuelRankIds)("options",e.options().fuels)}}function U_(t,o){if(t&1&&(s(0,"div",36)(1,"div",29),u(2,z_,4,5,"p-multiSelect",141),s(3,"label",142),v(4),c(5,"translate"),r()()()),t&2){let e,i=l();p(2),f((e=i.data())?2:-1,e),p(2),w(m(5,2,"settings.fuelRank"))}}function L_(t,o){if(t&1){let e=I();s(0,"div",36)(1,"div",29)(2,"p-inputNumber",146,12),c(4,"translate"),c(5,"translate"),b("onBlur",function(){let n;h(e);let a=T(3),_=l();return S(_.setFlowRate(_.rational((n=a.value)!==null&&n!==void 0?n:1500)))}),r(),s(6,"label",147),v(7),c(8,"translate"),r(),s(9,"small",57)(10,"a",148),v(11),c(12,"translate"),r()()()(),s(13,"div",28)(14,"div",29)(15,"p-dropdown",149),c(16,"translate"),b("onChange",function(n){h(e);let a=l();return S(a.setInserterTarget(n.value))}),r(),s(17,"label",150),v(18),c(19,"translate"),r()()()}if(t&2){let e=l();p(2),d("suffix"," "+m(4,12,"settings.flowRateUnit"))("min",1)("step",100)("showButtons",!0)("pTooltip",m(5,14,"settings.pipeFlowRateTooltip"))("ngModel",e.settings().flowRate.toNumber()),p(5),w(m(8,16,"settings.pipeFlowRate")),p(4),w(m(12,18,"settings.wiki")),p(4),d("tooltip",m(16,20,"settings.inserterTargetTooltip"))("ngModel",e.settings().inserterTarget)("options",e.inserterTargetOptions),p(3),w(m(19,22,"settings.inserterTarget"))}}function W_(t,o){if(t&1){let e=I();s(0,"div",28)(1,"div",29)(2,"p-inputNumber",151,13),c(4,"translate"),b("onBlur",function(){let n;h(e);let a=T(3),_=l();return S(_.setMiningBonus(_.rational(((n=a.value)!==null&&n!==void 0?n:100)-100)))}),r(),s(5,"label",152),v(6),c(7,"translate"),r()()()}if(t&2){let e=l();p(2),d("min",100)("step",10)("showButtons",!0)("pTooltip",m(4,6,"settings.miningSpeedTooltip"))("ngModel",e.settings().miningBonus.add(e.rational(100)).toNumber()),p(4),w(m(7,8,"settings.miningSpeed"))}}function H_(t,o){t&1&&(s(0,"div"),v(1),c(2,"translate"),r()),t&2&&(p(),w(m(2,1,o)))}function G_(t,o){if(t&1&&(s(0,"div",69)(1,"div"),v(2),c(3,"translate"),r(),u(4,H_,3,3,"div"),r()),t&2){let e;l();let i=T(74);p(2),w(m(3,2,"settings.flow")),p(2),f((e=i.label())?4:-1,e)}}function q_(t,o){if(t&1){let e=I();s(0,"div",36)(1,"span",29)(2,"p-dropdown",153),c(3,"translate"),b("onChange",function(n){h(e);let a=l();return S(a.setSankeyAlign(n.value))}),r(),s(4,"label",154),v(5),c(6,"translate"),r()()()}if(t&2){let e=l();p(2),d("tooltip",m(3,4,"settings.sankeyAlignTooltip"))("ngModel",e.preferences().sankeyAlign)("options",e.sankeyAlignOptions),p(3),w(m(6,6,"settings.sankeyAlign"))}}function Q_(t,o){if(t&1){let e=I();s(0,"p-accordionTab",50),c(1,"translate"),s(2,"div",27)(3,"div",36)(4,"div",29)(5,"p-inputNumber",155,14),c(7,"translate"),b("onBlur",function(){let n;h(e);let a=T(6),_=l();return S(_.setMiningBonus(_.rational((n=a.value)!==null&&n!==void 0?n:0)))}),r(),s(8,"label",156),v(9),c(10,"translate"),r()()(),s(11,"div",36)(12,"div",29)(13,"p-dropdown",157),c(14,"translate"),b("onChange",function(n){h(e);let a=l();return S(a.setResearchSpeed(n.value))}),r(),s(15,"label",158),v(16),c(17,"translate"),r()()(),s(18,"div",28)(19,"div",29)(20,"p-dropdown",159),c(21,"translate"),b("onChange",function(n){h(e);let a=l();return S(a.setInserterCapacity(n.value))}),r(),s(22,"label",160),v(23),c(24,"translate"),r()()()()()}if(t&2){let e=l();d("header",m(1,15,"settings.bonuses")),p(5),d("min",0)("step",10)("showButtons",!0)("pTooltip",m(7,17,"settings.miningProductivityTooltip"))("ngModel",e.settings().miningBonus.toNumber()),p(4),w(m(10,19,"settings.miningProductivity")),p(4),d("pTooltip",m(14,21,"settings.researchSpeedTooltip"))("ngModel",e.settings().researchBonus)("options",e.researchSpeedOptions),p(3),w(m(17,23,"settings.researchSpeed")),p(4),d("tooltip",m(21,25,"settings.inserterCapacityTooltip"))("ngModel",e.settings().inserterCapacity)("options",e.inserterCapacityOptions),p(3),w(m(24,27,"settings.inserterCapacity"))}}function K_(t,o){if(t&1){let e=I();s(0,"div",36)(1,"span",29)(2,"p-dropdown",161),c(3,"translate"),b("onChange",function(n){h(e);let a=l();return S(a.setPowerUnit(n.value))}),r(),s(4,"label",162),v(5),c(6,"translate"),r()()()}if(t&2){let e=l();p(2),d("tooltip",m(3,4,"settings.powerUnitTooltip"))("ngModel",e.preferences().powerUnit)("options",e.powerUnitOptions),p(3),w(m(6,6,"settings.powerUnit"))}}var X_=(()=>{let o=class o{constructor(){this.contentSvc=F(lt),this.router=F(hi),this.store=F(ct),this.translateSvc=F(Vt),this.routerSvc=F(Rt),this.active=!1,this.hidden=!1,this.itemsState=this.store.selectSignal(q.getItemsState),this.excludedItemIds=this.store.selectSignal(q.getExcludedItemIds),this.recipesState=this.store.selectSignal(D.getRecipesState),this.excludedRecipeIds=this.store.selectSignal(D.getExcludedRecipeIds),this.itemIds=this.store.selectSignal(D.getAvailableItems),this.data=this.store.selectSignal(D.getAdjustedDataset),this.machinesState=this.store.selectSignal(X.getMachinesState),this.settings=this.store.selectSignal(V.getSettings),this.columnsState=this.store.selectSignal(V.getColumnsState),this.options=this.store.selectSignal(V.getOptions),this.modOptions=this.store.selectSignal(V.getModOptions),this.presetOptions=this.store.selectSignal(V.getPresetOptions),this.linkValueOptions=this.store.selectSignal(V.getLinkValueOptions),this.researchedTechnologyIds=this.store.selectSignal(V.getAllResearchedTechnologyIds),this.recipeIds=this.store.selectSignal(V.getAvailableRecipes),this.gameStates=this.store.selectSignal(V.getGameStates),this.savedStates=this.store.selectSignal(V.getSavedStates),this.preferences=this.store.selectSignal(N.preferencesState),this.modRecord=this.store.selectSignal(Ii.getModRecord),this.machineIds=it(()=>[...this.store.selectSignal(X.getMachinesState)().ids]),this.state="",this.editValue="",this.editState=null,this.editStateMenu=[{label:this.translateSvc.instant("settings.createSavedState"),icon:"fa-solid fa-plus",command:()=>this.openCreateState()},{label:this.translateSvc.instant("settings.saveSavedState"),icon:"fa-solid fa-floppy-disk",command:()=>this.overwriteState()},{label:this.translateSvc.instant("settings.editSavedState"),icon:"fa-solid fa-pencil",command:()=>this.openEditState()},{label:this.translateSvc.instant("settings.deleteSavedState"),icon:"fa-solid fa-trash",command:()=>this.clickDeleteState()}],this.versionsVisible=!1,this.displayRateOptions=Yt,this.gameOptions=ni,this.inserterCapacityOptions=oi,this.inserterTargetOptions=ai,this.languageOptions=li,this.powerUnitOptions=_i,this.researchSpeedOptions=ci,this.themeOptions=Ci,this.flowDiagramOptions=ei,this.sankeyAlignOptions=di,this.maximizeTypeOptions=si,this.FuelType=ii,this.Game=nt,this.ItemId=Y,this.FlowDiagram=ti,this.BrowserUtility=zt,this.rational=L}ngOnInit(){this.store.select(V.getGameStates).pipe(et()).subscribe(i=>{this.state=Bt(Object.keys(i).find(n=>i[n]===zt.search),"")})}clickResetSettings(){this.contentSvc.confirm({icon:"fa-solid fa-exclamation-triangle",header:this.translateSvc.instant("settings.reset"),message:this.translateSvc.instant("settings.resetWarning"),acceptLabel:this.translateSvc.instant("yes"),rejectLabel:this.translateSvc.instant("cancel"),accept:()=>{localStorage.clear(),this.resetSettings()}})}setSearch(i){let n=this.router.parseUrl(this.router.url);new URLSearchParams(i).forEach((_,C)=>n.queryParams[C]=_),this.router.navigateByUrl(n)}copySearchToClipboard(i){navigator.clipboard.writeText(i)}setState(i,n){let a=n[i];if(a){let _=this.routerSvc.getParams(a);this.state=i,this.router.navigate([],{queryParams:_})}}clickSaveState(i){!this.editValue||!this.editState||(this.saveState(i,this.editValue,zt.search),this.editState==="edit"&&this.state&&this.removeState(i,this.state),this.editState=null,this.state=this.editValue)}openCreateState(){this.editValue="",this.editState="create"}overwriteState(){this.store.select(V.getGame).pipe(et()).subscribe(i=>{this.saveState(i,this.state,zt.search)})}openEditState(){this.editValue=this.state,this.editState="edit"}clickDeleteState(){this.store.select(V.getGame).pipe(et()).subscribe(i=>{this.removeState(i,this.state),this.state=""})}setGame(i){this.setMod(gi[i].modId)}setExcludedRecipes(i,n,a){let _=[];for(let C of a.recipeIds){let g=i.some(k=>k===C);if(g!==n[C].excluded){let k=Bt(a.defaults?.excludedRecipeIds,[]).some(R=>R===C);_.push({id:C,value:g,def:k})}}this.setRecipeExcludedBatch(_)}setExcludedItems(i,n,a){let _=[];for(let C of a.itemIds){let g=i.some(k=>k===C);g!==n[C].excluded&&_.push({id:C,value:g})}this.setItemExcludedBatch(_)}changeFuel(i,n,a,_){let C=gt.bestMatch(Bt(a.fuelOptions?.map(g=>g.value),[]),_);this.setFuel(i,n,C)}changeBeaconModuleRank(i,n,a){i===""?this.setBeaconModuleRank(i,n,[a.beaconModuleId]):this.setBeaconModuleRank(i,n,a.beaconModuleRankIds)}toggleBeaconReceivers(i){this.setBeaconReceivers(i?L(1n):null)}resetSettings(){this.store.dispatch(new wi.ResetAction)}saveState(i,n,a){this.store.dispatch(new N.SaveStateAction({key:i,id:n,value:a}))}removeState(i,n){this.store.dispatch(new N.RemoveStateAction({key:i,id:n}))}setMod(i){this.store.dispatch(new V.SetModAction(i))}setResearchedTechnologies(i){this.store.dispatch(new V.SetResearchedTechnologiesAction(i))}setItemExcludedBatch(i){this.store.dispatch(new q.SetExcludedBatchAction(i))}setRecipeExcludedBatch(i){this.store.dispatch(new D.SetExcludedBatchAction(i))}setNetProductionOnly(i){this.store.dispatch(new V.SetNetProductionOnlyAction(i))}setSurplusMachinesOutput(i){this.store.dispatch(new V.SetSurplusMachinesOutputAction(i))}setPreset(i){this.store.dispatch(new V.SetPresetAction(i))}addMachine(i,n){this.store.dispatch(new X.AddAction({value:i,def:n}))}removeMachine(i,n){this.store.dispatch(new X.RemoveAction({value:i,def:n}))}setMachineRank(i,n){this.store.dispatch(new X.SetRankAction({value:i,def:n}))}setMachine(i,n,a){this.store.dispatch(new X.SetMachineAction({id:i,value:n,def:a}))}setFuel(i,n,a){this.store.dispatch(new X.SetFuelAction({id:i,value:n,def:a}))}setModuleRank(i,n,a){this.store.dispatch(new X.SetModuleRankAction({id:i,value:n,def:a}))}setOverclock(i,n,a){this.store.dispatch(new X.SetOverclockAction({id:i,value:n,def:a}))}setBeaconCount(i,n,a){this.store.dispatch(new X.SetBeaconCountAction({id:i,value:n,def:a}))}setBeacon(i,n,a){this.store.dispatch(new X.SetBeaconAction({id:i,value:n,def:a}))}setBeaconModuleRank(i,n,a){this.store.dispatch(new X.SetBeaconModuleRankAction({id:i,value:n,def:a}))}setBeaconReceivers(i){this.store.dispatch(new V.SetBeaconReceiversAction(i))}setProliferatorSpray(i){this.store.dispatch(new V.SetProliferatorSprayAction(i))}setBelt(i,n){this.store.dispatch(new V.SetBeltAction({value:i,def:n}))}setPipe(i,n){this.store.dispatch(new V.SetPipeAction({value:i,def:n}))}setCargoWagon(i,n){this.store.dispatch(new V.SetCargoWagonAction({value:i,def:n}))}setFluidWagon(i,n){this.store.dispatch(new V.SetFluidWagonAction({value:i,def:n}))}setFuels(i,n){this.store.dispatch(new V.SetFuelRankAction({value:i,def:n}))}setFlowRate(i){this.store.dispatch(new V.SetFlowRateAction(i))}setInserterTarget(i){this.store.dispatch(new V.SetInserterTargetAction(i))}setMiningBonus(i){this.store.dispatch(new V.SetMiningBonusAction(i))}setResearchSpeed(i){this.store.dispatch(new V.SetResearchBonusAction(i))}setInserterCapacity(i){this.store.dispatch(new V.SetInserterCapacityAction(i))}setDisplayRate(i,n){this.store.dispatch(new V.SetDisplayRateAction({value:i,prev:n}))}setMaximizeType(i){this.store.dispatch(new V.SetMaximizeTypeAction(i))}setPowerUnit(i){this.store.dispatch(new N.SetPowerUnitAction(i))}setLanguage(i){this.translateSvc.use(i),this.store.dispatch(new N.SetLanguageAction(i))}setTheme(i){this.store.dispatch(new N.SetThemeAction(i))}setBypassLanding(i){this.store.dispatch(new N.SetBypassLandingAction(i))}setHideDuplicateIcons(i){this.store.dispatch(new N.SetHideDuplicateIconsAction(i))}setDisablePaginator(i){this.store.dispatch(new N.SetDisablePaginatorAction(i))}setFlowDiagram(i){this.store.dispatch(new N.SetFlowDiagramAction(i))}setSankeyAlign(i){this.store.dispatch(new N.SetSankeyAlignAction(i))}setLinkSize(i){this.store.dispatch(new N.SetLinkSizeAction(i))}setLinkText(i){this.store.dispatch(new N.SetLinkTextAction(i))}setFlowHideExcluded(i){this.store.dispatch(new N.SetFlowHideExcludedAction(i))}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=st({type:o,selectors:[["lab-settings"]],hostVars:4,hostBindings:function(n,a){n&2&&K("active",a.active)("hidden",a.hidden)},inputs:{active:"active",hidden:"hidden"},decls:174,vars:201,consts:[["techPicker",""],["presetDropdown",""],["flowDiagramDropdown",""],["itemsPicker",""],["recipesPicker",""],["search",""],["nameCtrl","ngModel"],["stateMenu",""],["machineRow",""],["tooltip",""],["duplicatorsInput",""],["overclockInput",""],["flowRateInput",""],["miningBonusInput",""],["miningProdInput",""],[1,"p-3"],[1,"d-flex","align-items-center","justify-content-between"],["pButton","","pRipple","","type","button","icon","fa-solid fa-trash","tooltipPosition","bottom",1,"p-button-rounded","p-button-text",3,"click","pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-rounded","p-button-text","d-inline-flex","d-none","d-xl-inline-flex",3,"click"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-rounded","p-button-text","d-inline-flex","d-sm-none",3,"click"],[1,"flex-grow-1","overflow-hidden"],[3,"multiple"],[3,"selected"],["pTemplate","header"],[1,"p-inputgroup","mb-2"],[1,"p-inputgroup"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-outlined","p-button-rounded","w-100",3,"label"],[1,"p-fluid"],[1,"mt-3"],[1,"p-float-label"],["labDropdownTranslate","","inputId","game",3,"onChange","tooltip","ngModel","options"],["for","game"],[1,"position-relative"],[1,"pb-3"],["pButton","","pRipple","","type","button","icon","fa-solid fa-microchip",1,"p-button-rounded","p-button-outlined",3,"click","pTooltip","label"],[3,"selectIds"],[1,"mt-3","pb-3"],["labDropdownTranslate","","inputId","preset",3,"onChange","tooltip","ngModel","options"],["for","preset"],["labDropdownBase","","inputId","default-transport-belt",3,"onChange","tooltip","ngModel","options"],["pTemplate","selectedItem"],["pTemplate","item"],["for","default-transport-belt"],["labDropdownTranslate","","inputId","flow-diagram",3,"onChange","tooltip","ngModel","options"],["for","flow-diagram"],["labDropdownTranslate","","inputId","link-size",3,"onChange","tooltip","ngModel","options"],["for","link-size"],["labDropdownTranslate","","inputId","link-text",3,"onChange","tooltip","ngModel","options"],["for","link-text"],[3,"onChange","ngModel","binary","label","pTooltip"],[3,"header"],["pButton","","pRipple","","type","button","icon","fa-solid fa-table-columns",1,"p-button-rounded","p-button-outlined","mb-2",3,"click","label"],["labDropdownTranslate","","inputId","display-rate",3,"onChange","tooltip","ngModel","options"],["for","display-rate"],[1,"text-end"],["labDropdownTranslate","","inputId","language",3,"onChange","tooltip","ngModel","options"],["for","language"],[1,"position-absolute","end-0","bottom-100","me-1","mb-1"],["href","https://github.com/factoriolab/factoriolab/wiki/Translating-FactorioLab","target","_blank"],["labDropdownTranslate","","inputId","theme",3,"onChange","tooltip","ngModel","options"],["for","theme"],[3,"onChange","binary","label","ngModel"],[3,"onChange","ngModel","binary","label"],["labDropdownTranslate","","inputId","maximize-type",3,"onChange","tooltip","ngModel","options"],["for","maximize-type"],["pButton","","pRipple","","type","button","icon","fa-solid fa-boxes-stacked",1,"p-button-rounded","p-button-outlined",3,"click","pTooltip","label"],[3,"selectIds","header"],["pButton","","pRipple","","type","button","icon","fa-solid fa-flask-vial",1,"p-button-rounded","p-button-outlined",3,"click","pTooltip","label"],["pButton","","pRipple","","type","button","icon","fa-solid fa-dollar-sign",1,"p-button-rounded","p-button-outlined","mb-4",3,"click","label"],[1,"d-flex","align-items-center","justify-content-between","flex-grow-1"],["pButton","","pRipple","","type","button","icon","fa-solid fa-arrow-up-right-from-square",1,"p-button-outlined",3,"click"],["pInputText","","type","text",3,"ngModel"],["pButton","","pRipple","","type","button","icon","fa-solid fa-copy",1,"p-button-outlined",3,"click"],["pInputText","","pAutoFocus","","type","text","tooltipPosition","top","required","",3,"ngModelChange","keydown.enter","autofocus","placeholder","pTooltip","ngModel"],["pButton","","pRipple","","type","button","icon","fa-solid fa-floppy-disk","tooltipPosition","top",1,"p-button-outlined",3,"click","pTooltip","disabled"],["pButton","","pRipple","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined",3,"click","pTooltip"],["tooltipPosition","top",3,"onChange","placeholder","tooltip","ngModel","options"],["pButton","","pRipple","","type","button","icon","fa-solid fa-ellipsis-vertical",1,"p-button-outlined"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-outlined",3,"pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-ellipsis-vertical",1,"p-button-outlined",3,"click"],["appendTo","body",3,"popup","model"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-outlined",3,"click","pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-plus",1,"p-button-outlined","p-button-rounded","w-100",3,"click","label"],[1,"p-static-label"],[1,"position-absolute","end-0","top-0","me-1","mb-1"],["href","https://github.com/factoriolab/factoriolab/issues/new?assignees=&labels=mod+support&template=mod-request.md&title=","target","_blank"],["inputId","mod","styleClass","w-100",3,"onChange","filter","autofocusFilter","tooltip","ngModel","options"],["pButton","","pRipple","","icon","fa-solid fa-info",1,"p-button-outlined",3,"click","pTooltip"],["appendTo","body",3,"visibleChange","visible","modal","dismissableMask","draggable","resizable","breakpoints","header"],["responsiveLayout","scroll","styleClass","p-datatable-sm",3,"value"],["pTemplate","body"],["pTemplate","footer"],["pButton","","pRipple","","type","button","icon","fa-solid fa-check",1,"p-button-outlined",3,"click","label"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"onReorder","value","dragdrop"],[1,"pt-3"],[1,"p-inputgroup","flex-wrap","machine-preference",3,"mb-1"],[1,"p-inputgroup","flex-wrap","machine-preference"],["pButton","","pRipple","","type","button","icon","fa-solid fa-grip-lines",1,"p-button-outlined","cursor-grab",3,"invisible"],[1,"p-inputgroup-addon",3,"pTooltip"],["labDropdownBase","icon","labNoDrag","",3,"tooltip","ngModel","options"],["labDropdownBase","icon",3,"ngModel","tooltip","options"],["labNoDrag","","suffix","%","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined","inputStyleClass","text-end",3,"min","max","step","maxFractionDigits","showButtons","pTooltip","ngModel"],["pButton","","pRipple","","labNoDrag","","type","button","icon","fa-solid fa-xmark",1,"p-button-outlined","ms-auto",3,"click","pTooltip"],["pButton","","pRipple","","type","button","icon","fa-solid fa-grip-lines",1,"p-button-outlined","cursor-grab"],[1,"fa-solid","fa-industry"],["labDropdownBase","icon","labNoDrag","",3,"onChange","tooltip","ngModel","options"],[1,"d-flex"],[1,"d-flex","align-items-center","py-2","w-100","h-100",3,"pTooltip"],[1,"ms-3","text-truncate"],["type","machine",3,"id"],["labDropdownBase","icon",3,"onChange","ngModel","tooltip","options"],[1,"d-flex","align-items-center","justify-content-center","h-100"],[1,"fa-solid","fa-plus"],["type","fuel",3,"id"],["labNoDrag","","appendTo","body","scrollHeight","40vh","styleClass","icon","panelStyleClass","tooltip","placeholder","unused","tooltipPosition","top",3,"selectionLimit","tooltip","ngModel","options"],["labNoDrag","","appendTo","body","scrollHeight","40vh","styleClass","icon","panelStyleClass","tooltip","placeholder","unused","tooltipPosition","top",3,"onChange","selectionLimit","tooltip","ngModel","options"],["pTemplate","selectedItems"],[3,"class"],["type","module",3,"id"],["labNoDrag","","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined","inputStyleClass","text-end",3,"min","step","maxFractionDigits","showButtons","pTooltip","ngModel"],["labNoDrag","","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined","inputStyleClass","text-end",3,"onBlur","min","step","maxFractionDigits","showButtons","pTooltip","ngModel"],["labNoDrag","","suffix","%","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined","inputStyleClass","text-end",3,"onBlur","min","max","step","maxFractionDigits","showButtons","pTooltip","ngModel"],["labNoDrag","","tooltipPosition","top",3,"setValue","pTooltip","value"],["labDropdownBase","icon","labNoDrag","","tooltipPosition","top",3,"onChange","tooltip","ngModel","options"],["type","beacon",3,"id"],["for","beacon-receivers",1,"p-static-label"],["inputId","beacon-receivers",1,"w-100",3,"setValue","pTooltip","value"],["labDropdownBase","","inputId","proliferator-self-spray",3,"onChange","autoDisplayFirst","tooltip","ngModel","options"],["for","proliferator-self-spray"],[1,"d-flex","align-items-center","h-100"],["type","belt",3,"id"],["labDropdownBase","","inputId","default-pipe",3,"onChange","tooltip","ngModel","options"],["for","default-pipe"],["type","pipe",3,"id"],["labDropdownBase","","inputId","default-cargo-wagon",3,"onChange","tooltip","ngModel","options"],["for","default-cargo-wagon"],["type","cargo-wagon",3,"id"],["labDropdownBase","","inputId","default-fluid-wagon",3,"onChange","tooltip","ngModel","options"],["for","default-fluid-wagon"],["type","fluid-wagon",3,"id"],["appendTo","body","scrollHeight","40vh",3,"tooltip","ngModel","options"],["for","fuel-rank"],["appendTo","body","scrollHeight","40vh",3,"onChange","tooltip","ngModel","options"],[1,"mx-2",3,"class"],[1,"mx-2"],["inputId","pipe-flow-rate","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined",3,"onBlur","suffix","min","step","showButtons","pTooltip","ngModel"],["for","pipe-flow-rate"],["href","https://wiki.factorio.com/Fluid_system#Pipelines","target","_blank"],["labDropdownTranslate","","inputId","inserter-target",3,"onChange","tooltip","ngModel","options"],["for","inserter-target"],["inputId","mining-speed","suffix","%","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined",3,"onBlur","min","step","showButtons","pTooltip","ngModel"],["for","mining-speed"],["labDropdownTranslate","","inputId","sankey-align",3,"onChange","tooltip","ngModel","options"],["for","sankey-align"],["inputId","mining-productivity","prefix","+","suffix","%","incrementButtonClass","p-button-outlined","decrementButtonClass","p-button-outlined",3,"onBlur","min","step","showButtons","pTooltip","ngModel"],["for","mining-productivity"],["labDropdownTranslate","","inputId","research-bonus",3,"onChange","pTooltip","ngModel","options"],["for","research-speed"],["labDropdownTranslate","","inputId","inserter-capacity",3,"onChange","tooltip","ngModel","options"],["for","inserter-capacity"],["labDropdownTranslate","","inputId","power-unit",3,"onChange","tooltip","ngModel","options"],["for","power-unit"]],template:function(n,a){if(n&1){let _=I();s(0,"div",15)(1,"div",16)(2,"h2"),v(3),c(4,"translate"),r(),s(5,"div")(6,"button",17),c(7,"translate"),b("click",function(){return h(_),S(a.clickResetSettings())}),r(),s(8,"button",18),b("click",function(){return h(_),S(a.contentSvc.toggleSettingsXl())}),r(),s(9,"button",19),b("click",function(){return h(_),S(a.contentSvc.toggleSettings())}),r()()()(),s(10,"div",20)(11,"p-scrollPanel")(12,"p-accordion",21)(13,"p-accordionTab",22),u(14,nr,5,4,"ng-template",23)(15,or,5,1,"div",24)(16,ar,9,15,"div",24)(17,sr,6,9,"div",25)(18,rr,2,3,"button",26),r(),s(19,"p-accordionTab",22),u(20,_r,6,4,"ng-template",23),s(21,"div",27)(22,"div",28)(23,"span",29)(24,"p-dropdown",30),c(25,"translate"),b("onChange",function(g){return h(_),S(a.setGame(g.value))}),r(),s(26,"label",31),v(27),c(28,"translate"),r(),u(29,dr,3,2),r()(),u(30,gr,20,32,"div",32),r()(),s(31,"p-accordionTab",22),u(32,xr,5,4,"ng-template",23),s(33,"div",27)(34,"div",33)(35,"button",34),c(36,"translate"),c(37,"translate"),c(38,"translate"),b("click",function(){h(_);let g=T(40);return S(g.clickOpen(a.researchedTechnologyIds()))}),r(),s(39,"lab-tech-picker",35,0),b("selectIds",function(g){return h(_),S(a.setResearchedTechnologies(g))}),r()(),s(41,"div",36)(42,"span",29)(43,"p-dropdown",37,1),c(45,"translate"),b("onChange",function(g){return h(_),S(a.setPreset(g.value))}),r(),s(46,"label",38),v(47),c(48,"translate"),r()()(),u(49,d_,6,7)(50,m_,4,8,"div",33)(51,u_,6,7,"div",33)(52,x_,9,9,"div",36),s(53,"div",36)(54,"div",29)(55,"p-dropdown",39),c(56,"translate"),b("onChange",function(g){let k;return h(_),S(a.setBelt(g.value,(k=a.data().defaults)==null?null:k.beltId))}),u(57,S_,1,1,"ng-template",40)(58,b_,7,6,"ng-template",41),r(),s(59,"label",42),v(60),c(61,"translate"),r()()(),u(62,y_,9,8,"div",36)(63,M_,9,8,"div",36)(64,P_,9,8,"div",36)(65,U_,6,4,"div",36)(66,L_,20,24)(67,W_,8,10,"div",28),r()(),s(68,"p-accordionTab"),u(69,G_,5,4,"ng-template",23),s(70,"div",27)(71,"div",36)(72,"span",29)(73,"p-dropdown",43,2),c(75,"translate"),b("onChange",function(g){return h(_),S(a.setFlowDiagram(g.value))}),r(),s(76,"label",44),v(77),c(78,"translate"),r()()(),u(79,q_,7,8,"div",36),s(80,"div",36)(81,"span",29)(82,"p-dropdown",45),c(83,"translate"),b("onChange",function(g){return h(_),S(a.setLinkSize(g.value))}),r(),s(84,"label",46),v(85),c(86,"translate"),r()()(),s(87,"div",36)(88,"span",29)(89,"p-dropdown",47),c(90,"translate"),b("onChange",function(g){return h(_),S(a.setLinkText(g.value))}),r(),s(91,"label",48),v(92),c(93,"translate"),r()()(),s(94,"div",33)(95,"p-checkbox",49),c(96,"translate"),c(97,"translate"),b("onChange",function(g){return h(_),S(a.setFlowHideExcluded(g.checked))}),r()()()(),u(98,Q_,25,29,"p-accordionTab",50),s(99,"p-accordionTab",50),c(100,"translate"),s(101,"div",27)(102,"button",51),c(103,"translate"),b("click",function(){return h(_),S(a.contentSvc.showColumns$.next())}),r(),s(104,"div",36)(105,"span",29)(106,"p-dropdown",52),c(107,"translate"),b("onChange",function(g){return h(_),S(a.setDisplayRate(g.value,a.settings().displayRate))}),r(),s(108,"label",53),v(109),c(110,"translate"),r()()(),u(111,K_,7,8,"div",36),s(112,"div",36),x(113,"div",54),s(114,"div",29)(115,"p-dropdown",55),c(116,"translate"),b("onChange",function(g){return h(_),S(a.setLanguage(g.value))}),r(),s(117,"label",56),v(118),c(119,"translate"),r(),s(120,"small",57)(121,"a",58),v(122),c(123,"translate"),r()()()(),s(124,"div",36)(125,"div",29)(126,"p-dropdown",59),c(127,"translate"),b("onChange",function(g){return h(_),S(a.setTheme(g.value))}),r(),s(128,"label",60),v(129),c(130,"translate"),r()()(),s(131,"div",33)(132,"p-checkbox",61),c(133,"translate"),b("onChange",function(g){return h(_),S(a.setBypassLanding(g.checked))}),r()(),s(134,"div",33)(135,"p-checkbox",62),c(136,"translate"),b("onChange",function(g){return h(_),S(a.setHideDuplicateIcons(g.checked))}),r()(),s(137,"div")(138,"p-checkbox",62),c(139,"translate"),b("onChange",function(g){return h(_),S(a.setDisablePaginator(g.checked))}),r()()()(),s(140,"p-accordionTab",50),c(141,"translate"),s(142,"div",27)(143,"div",36)(144,"span",29)(145,"p-dropdown",63),c(146,"translate"),b("onChange",function(g){return h(_),S(a.setMaximizeType(g.value))}),r(),s(147,"label",64),v(148),c(149,"translate"),r()()(),s(150,"div",33)(151,"p-checkbox",49),c(152,"translate"),c(153,"translate"),b("onChange",function(g){return h(_),S(a.setNetProductionOnly(g.checked))}),r()(),s(154,"div",33)(155,"p-checkbox",49),c(156,"translate"),c(157,"translate"),b("onChange",function(g){return h(_),S(a.setSurplusMachinesOutput(g.checked))}),r()(),s(158,"div",33)(159,"button",65),c(160,"translate"),c(161,"translate"),b("click",function(){h(_);let g=T(163);return S(g.clickOpen("item",a.itemIds(),a.excludedItemIds()))}),r(),s(162,"lab-picker",66,3),c(164,"translate"),b("selectIds",function(g){return h(_),S(a.setExcludedItems(g,a.itemsState(),a.data()))}),r()(),s(165,"div",33)(166,"button",67),c(167,"translate"),c(168,"translate"),b("click",function(){h(_);let g=T(170);return S(g.clickOpen("recipe",a.recipeIds(),a.excludedRecipeIds()))}),r(),s(169,"lab-picker",66,4),c(171,"translate"),b("selectIds",function(g){return h(_),S(a.setExcludedRecipes(g,a.recipesState(),a.data()))}),r()(),s(172,"button",68),c(173,"translate"),b("click",function(){return h(_),S(a.contentSvc.showCosts$.next())}),r()()()()()()}if(n&2){let _;p(3),w(m(4,101,"settings.header")),p(3),d("pTooltip",m(7,103,"settings.reset")),p(5),Tt(H(194,Js)),p(),d("multiple",!0),p(),d("selected",!0),p(2),f(a.BrowserUtility.isStandalone?15:-1),p(),f(a.editState?16:a.savedStates().length?17:18),p(3),d("selected",!0),p(3),K("pb-3",a.data().game===a.Game.Factorio),p(2),d("tooltip",m(25,105,"settings.gameTooltip"))("ngModel",a.data().game)("options",a.gameOptions),p(3),w(m(28,107,"settings.game")),p(2),f(a.data().game!==a.Game.Factorio?29:-1),p(),f(a.data().game===a.Game.Factorio?30:-1),p(),d("selected",!0),p(4),d("pTooltip",m(36,109,"settings.techsTooltip"))("label",a.researchedTechnologyIds()?E(37,111,"settings.techsResearched",rt(195,Ae,a.researchedTechnologyIds().length)):m(38,114,"settings.allTechsResearched")),p(8),d("tooltip",m(45,116,"settings.presetTooltip"))("ngModel",a.settings().preset)("options",a.presetOptions()),p(4),w(m(48,118,"settings.preset")),p(2),f(a.data().game!==a.Game.CaptainOfIndustry?49:-1),p(),f(a.data().game===a.Game.Factorio?50:-1),p(),f((_=a.settings().beaconReceivers)?51:-1,_),p(),f(a.data().game===a.Game.DysonSphereProgram?52:-1),p(3),d("tooltip",m(56,120,"settings.defaultTransportBeltTooltip"))("ngModel",a.settings().beltId)("options",a.options().belts),p(5),w(m(61,122,"settings.defaultTransportBelt")),p(2),f(a.data().pipeIds.length>1?62:-1),p(),f(a.data().cargoWagonIds.length>1?63:-1),p(),f(a.data().fluidWagonIds.length>1?64:-1),p(),f(a.data().fuelIds.length&&a.data().game!==a.Game.Satisfactory?65:-1),p(),f(a.data().game===a.Game.Factorio?66:-1),p(),f(a.data().game===a.Game.DysonSphereProgram?67:-1),p(6),d("tooltip",m(75,124,"settings.flowDiagramTooltip"))("ngModel",a.preferences().flowDiagram)("options",a.flowDiagramOptions),p(4),w(m(78,126,"settings.flowDiagram")),p(2),f(a.preferences().flowDiagram===a.FlowDiagram.Sankey?79:-1),p(3),d("tooltip",m(83,128,"settings.linkSizeTooltip"))("ngModel",a.preferences().linkSize)("options",a.linkValueOptions()),p(3),w(m(86,130,"settings.linkSize")),p(4),d("tooltip",m(90,132,"settings.linkTextTooltip"))("ngModel",a.preferences().linkText)("options",a.linkValueOptions()),p(3),w(m(93,134,"settings.linkText")),p(3),d("ngModel",a.preferences().flowHideExcluded)("binary",!0)("label",m(96,136,"settings.flowHideExcluded"))("pTooltip",m(97,138,"settings.flowHideExcludedTooltip")),p(3),f(a.data().game===a.Game.Factorio?98:-1),p(),d("header",m(100,140,"settings.display")),p(3),d("label",m(103,142,"settings.openColumnSettings")),p(4),d("tooltip",m(107,144,"settings.displayRateTooltip"))("ngModel",a.settings().displayRate)("options",a.displayRateOptions),p(3),w(m(110,146,"settings.displayRate")),p(2),f(a.columnsState().power.show?111:-1),p(4),d("tooltip",m(116,148,"settings.languageTooltip"))("ngModel",a.preferences().language)("options",a.languageOptions),p(3),w(m(119,150,"settings.language")),p(4),w(m(123,152,"settings.helpTranslate")),p(4),d("tooltip",m(127,154,"settings.themeTooltip"))("ngModel",a.preferences().theme)("options",a.themeOptions),p(3),w(m(130,156,"settings.theme")),p(3),d("binary",!0)("label",m(133,158,"settings.bypassLanding"))("ngModel",a.preferences().bypassLanding),p(3),d("ngModel",a.preferences().hideDuplicateIcons)("binary",!0)("label",m(136,160,"settings.hideDuplicateIcons")),p(3),d("ngModel",a.preferences().disablePaginator)("binary",!0)("label",m(139,162,"settings.disablePaginator")),p(2),d("header",m(141,164,"settings.advanced")),p(5),d("tooltip",m(146,166,"settings.maximizeTypeTooltip"))("ngModel",a.settings().maximizeType)("options",a.maximizeTypeOptions),p(3),w(m(149,168,"settings.maximizeType")),p(3),d("ngModel",a.settings().netProductionOnly)("binary",!0)("label",m(152,170,"settings.netProductionOnly"))("pTooltip",m(153,172,"settings.netProductionOnlyTooltip")),p(4),d("ngModel",a.settings().surplusMachinesOutput)("binary",!0)("label",m(156,174,"settings.surplusMachinesOutput"))("pTooltip",m(157,176,"settings.surplusMachinesOutputTooltip")),p(4),d("pTooltip",m(160,178,"settings.itemsTooltip"))("label",E(161,180,"settings.itemsExcluded",rt(197,Ae,a.excludedItemIds().length))),p(3),d("header",m(164,183,"settings.itemsHeader")),p(4),d("pTooltip",m(167,185,"settings.recipesTooltip"))("label",E(168,187,"settings.recipesExcluded",rt(199,Ae,a.excludedRecipeIds().length))),p(3),d("header",m(171,190,"settings.recipesHeader")),p(3),d("label",m(173,192,"settings.openCosts"))}},dependencies:[Mt,Zt,ut,Ti,Ct,Oi,Ri,mt,Bi,ht,xt,Ot,ee,St,ne,ie,Di,$i,se,ft,ae,oe,Pt,le,bt,pe,je,Lt,Wt,Jt,dt,vt,$e],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:fixed;z-index:4;top:0;left:0;transition:transform .4s cubic-bezier(.05,.74,.2,.99);width:322px;height:100%;background-color:var(--surface-overlay)}@media (max-width: 1199.98px){[_nghost-%COMP%]{transform:translate(-100%)}.active[_nghost-%COMP%]{transform:translate(0)}}@media (min-width: 1200px){.hidden[_nghost-%COMP%]{transform:translate(-100%)}}[_nghost-%COMP%]     .p-scrollpanel .p-scrollpanel-content{overflow-y:scroll}[_nghost-%COMP%]     .p-scrollpanel .p-scrollpanel-bar-x{visibility:hidden}[_nghost-%COMP%]     .p-accordion{width:323px}.p-inputgroup.machine-preference[_ngcontent-%COMP%]   p-dropdown[_ngcontent-%COMP%], .p-inputgroup.machine-preference[_ngcontent-%COMP%]   p-multiselect[_ngcontent-%COMP%]{flex-basis:36px;flex-grow:0;flex-shrink:0}"],changeDetection:0});let t=o;return t})();var Jc=(()=>{let o=class o{};o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=qe({type:o}),o.\u0275inj=Ge({imports:[Ye,xe,zi,xe]});let t=o;return t})();export{Ts as a,X_ as b,_s as c,Jc as d};

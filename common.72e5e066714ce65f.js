"use strict";(self.webpackChunkfactoriolab=self.webpackChunkfactoriolab||[]).push([[592],{5156:(T,r,n)=>{n.d(r,{F:()=>d});var c=n(4707),p=n(9841),m=n(4004),g=n(3087),t=n(4650),_=n(2997),E=n(6895),f=n(4006),P=n(805),M=n(4258),v=n(5593),b=n(5722),O=n(1795),C=n(403),D=n(8829),A=n(6188),y=n(1969);function I(e,o){1&e&&(t.TgZ(0,"th",8)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"p-sortIcon",9),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"data.category")))}function L(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"p-multiSelect",13),t.NdJ("onChange",function(i){const u=t.CHM(a).filterCallback;return t.KtG(u(i.value))}),t.ALo(1,"translate"),t.ALo(2,"translate"),t.qZA()}if(2&e){const a=o.$implicit,l=t.oxw(4).ngIf;t.Q6J("ngModel",a)("options",l.options.categories)("maxSelectedLabels",1)("selectedItemsLabel",t.lcZ(1,5,"data.selectedLabel"))("placeholder",t.lcZ(2,7,"data.any"))}}function x(e,o){1&e&&(t.TgZ(0,"th")(1,"p-columnFilter",11),t.YNc(2,L,3,9,"ng-template",12),t.qZA()())}function Z(e,o){if(1&e&&(t.TgZ(0,"tr")(1,"th"),t._UZ(2,"p-columnFilter",10),t.qZA(),t.YNc(3,x,3,0,"th",7),t.qZA()),2&e){const a=t.oxw(2).ngIf;t.xp6(3),t.Q6J("ngIf","category"!==a.type)}}function U(e,o){if(1&e&&(t.TgZ(0,"tr")(1,"th",4)(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"p-sortIcon",5),t.qZA(),t.YNc(6,I,5,3,"th",6),t.qZA(),t.YNc(7,Z,4,1,"tr",7)),2&e){const a=t.oxw().ngIf;t.xp6(3),t.Oqu(t.lcZ(4,3,"data.name")),t.xp6(3),t.Q6J("ngIf","category"!==a.type),t.xp6(1),t.Q6J("ngIf",a.value.length>10)}}function R(e,o){if(1&e&&(t.TgZ(0,"a",14),t._UZ(1,"button",15),t.ALo(2,"iconSmClass"),t.qZA()),2&e){const a=t.oxw(2).$implicit;t.Q6J("routerLink","/data/categories/"+a.category.id),t.xp6(1),t.Q6J("label",a.category.name)("icon",t.xi3(2,3,a.category.id,"category"))}}function B(e,o){if(1&e&&(t.TgZ(0,"td"),t.YNc(1,R,3,6,"a",16),t.qZA()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",a.category)}}function K(e,o){if(1&e&&(t.TgZ(0,"tr")(1,"td")(2,"a",14),t._UZ(3,"button",15),t.ALo(4,"iconSmClass"),t.qZA()(),t.YNc(5,B,2,1,"td",7),t.qZA()),2&e){const a=o.$implicit,l=t.oxw().ngIf;t.xp6(2),t.Q6J("routerLink",l.route+a.id),t.xp6(1),t.Q6J("label",a.name)("icon",t.xi3(4,4,a.id,l.type)),t.xp6(2),t.Q6J("ngIf","category"!==l.type)}}const W=function(){return["category.id"]};function J(e,o){if(1&e&&(t.TgZ(0,"p-table",1),t.YNc(1,U,8,5,"ng-template",2),t.YNc(2,K,6,7,"ng-template",3),t.qZA()),2&e){const a=o.ngIf;t.Q6J("value",a.value)("paginator",a.value.length>10)("globalFilterFields",t.DdM(3,W))}}class d{set ids(o){this.ids$.next(o)}set type(o){this.type$.next(o)}constructor(o){this.store=o,this.useRelativePath=!1,this.ids$=new c.t,this.type$=new c.t,this.vm$=(0,p.a)([this.ids$,this.type$,this.store.select(g.Zr.FW),this.store.select(g.Zr.pY)]).pipe((0,m.U)(([a,l,i,s])=>({type:l,value:this.getValue(a,l,s),route:this.getCollectionRoute(l),options:i})))}getCollectionRoute(o){if(this.useRelativePath)return"";switch(o){case"category":return"/data/categories/";case"item":return"/data/items/";case"recipe":return"/data/recipes/"}}getValue(o,a,l){if(null==o)return[];let i;switch(a){case"category":i=l.categoryEntities;break;case"item":i=l.itemEntities;break;case"recipe":i=l.recipeEntities}return o.filter(s=>i[s]).map(s=>{const u=i[s],h={id:u.id,name:u.name};return"category"!==a&&(h.category=l.categoryEntities[u.category]),h})}}d.\u0275fac=function(o){return new(o||d)(t.Y36(_.yh))},d.\u0275cmp=t.Xpm({type:d,selectors:[["lab-collection-table"]],inputs:{ids:"ids",type:"type",useRelativePath:"useRelativePath"},decls:2,vars:3,consts:[["labPagedTable","",3,"value","paginator","globalFilterFields",4,"ngIf"],["labPagedTable","",3,"value","paginator","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","name"],["field","name"],["pSortableColumn","category.name",4,"ngIf"],[4,"ngIf"],["pSortableColumn","category.name"],["field","category.name"],["type","text","field","name","matchMode","contains"],["field","category.id","matchMode","in"],["pTemplate","filter"],["appendTo","body",3,"ngModel","options","maxSelectedLabels","selectedItemsLabel","placeholder","onChange"],["queryParamsHandling","preserve",3,"routerLink"],["pButton","","pRipple","","type","button",1,"p-button-link",3,"label","icon"],["queryParamsHandling","preserve",3,"routerLink",4,"ngIf"]],template:function(o,a){1&o&&(t.YNc(0,J,3,4,"p-table",0),t.ALo(1,"async")),2&o&&t.Q6J("ngIf",t.lcZ(1,1,a.vm$))},dependencies:[E.O5,f.JJ,f.On,P.jx,M.rH,v.Hq,b.NU,O.H,C.iA,C.lQ,C.fz,C.xl,D.A,E.Ov,A.X$,y.y],styles:["th[_ngcontent-%COMP%]{width:50%}"],changeDetection:0})},1232:(T,r,n)=>{n.d(r,{r:()=>t});var c=n(6895),p=n(2518),m=n(4650);n(5156);class t{}t.\u0275fac=function(E){return new(E||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[c.ez,p.o]})},8909:(T,r,n)=>{n.d(r,{J:()=>p});var c=n(4004);class p{constructor(g,t){this.route=g,this.translateSvc=t,this.id$=this.route.params.pipe((0,c.U)(_=>_.id)),this.detail$=this.route.data.pipe((0,c.U)(_=>_)),this.parent$=this.detail$.pipe((0,c.U)(_=>({label:this.translateSvc.instant(_.collectionLabel??"none"),routerLink:"..",queryParamsHandling:"preserve"})))}}}}]);